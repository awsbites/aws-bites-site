{
  "speakers": {
    "spk_0": "spk_0",
    "spk_1": "spk_1"
  },
  "segments": [
    {
      "speakerLabel": "spk_0",
      "start": 0,
      "end": 2.9,
      "text": " Have you ever deployed infrastructure with CloudFormation,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 2.9,
      "end": 6.3,
      "text": " only to notice later that things weren't quite lining up as they should?"
    },
    {
      "speakerLabel": "spk_0",
      "start": 6.3,
      "end": 9.5,
      "text": " Well, you might be experiencing CloudFormation Drift."
    },
    {
      "speakerLabel": "spk_0",
      "start": 9.5,
      "end": 12,
      "text": " We've all been there. Deployments look fine initially,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 12,
      "end": 15.200000000000001,
      "text": " but gradually drift away from their original configuration over time."
    },
    {
      "speakerLabel": "spk_0",
      "start": 15.200000000000001,
      "end": 17.3,
      "text": " This can lead to very unpredictable results"
    },
    {
      "speakerLabel": "spk_0",
      "start": 17.3,
      "end": 19.3,
      "text": " when you try and update your stack later on,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 19.3,
      "end": 21.3,
      "text": " and it can really end in disaster."
    },
    {
      "speakerLabel": "spk_0",
      "start": 21.3,
      "end": 24.400000000000002,
      "text": " So today, we're diving deep into CloudFormation Drift,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 24.400000000000002,
      "end": 26.900000000000002,
      "text": " what causes it, how to detect it and fix it,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 26.900000000000002,
      "end": 29.5,
      "text": " and most importantly, how to prevent it in the future."
    },
    {
      "speakerLabel": "spk_0",
      "start": 29.5,
      "end": 31.8,
      "text": " And we're going to cover what it is,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 31.8,
      "end": 35.4,
      "text": " how it relates to CloudFormation and other infrastructure as code tools,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 35.4,
      "end": 37.3,
      "text": " why it happens, how to resolve it,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 37.3,
      "end": 40.2,
      "text": " some best practices on detecting drift as soon as possible,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 40.2,
      "end": 42.2,
      "text": " and to try and avoid it entirely."
    },
    {
      "speakerLabel": "spk_0",
      "start": 42.2,
      "end": 45,
      "text": " I'm Eoin, I'm here as usual with Luciano,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 45,
      "end": 47.7,
      "text": " and this is another episode of AWS Bites."
    },
    {
      "speakerLabel": "spk_0",
      "start": 47.7,
      "end": 49.5,
      "text": " AWS Bites"
    },
    {
      "speakerLabel": "spk_0",
      "start": 49.5,
      "end": 51.5,
      "text": " AWS Bites"
    },
    {
      "speakerLabel": "spk_0",
      "start": 51.5,
      "end": 54.5,
      "text": " AWS Bites"
    },
    {
      "speakerLabel": "spk_0",
      "start": 54.5,
      "end": 55.900000000000006,
      "text": " AWS Bites"
    },
    {
      "speakerLabel": "spk_0",
      "start": 55.900000000000006,
      "end": 58.7,
      "text": " This episode of AWS Bites is brought to you by Fortherm."
    },
    {
      "speakerLabel": "spk_0",
      "start": 58.7,
      "end": 62.2,
      "text": " Need to modernize your infrastructure or build scalable cloud solutions?"
    },
    {
      "speakerLabel": "spk_0",
      "start": 62.2,
      "end": 64.7,
      "text": " Fortherm brings the experience to build high quality,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 64.7,
      "end": 67.2,
      "text": " maintainable and scalable cloud applications"
    },
    {
      "speakerLabel": "spk_0",
      "start": 67.2,
      "end": 68.9,
      "text": " that evolve with your business needs."
    },
    {
      "speakerLabel": "spk_0",
      "start": 68.9,
      "end": 73.2,
      "text": " Visit Fortherm to see how we can help take your cloud journey to the next level."
    },
    {
      "speakerLabel": "spk_0",
      "start": 73.2,
      "end": 75.7,
      "text": " We might just start with a quick CloudFormation summary."
    },
    {
      "speakerLabel": "spk_0",
      "start": 75.7,
      "end": 78.9,
      "text": " We've talked about it before, but let's rapidly go through it again."
    },
    {
      "speakerLabel": "spk_0",
      "start": 78.9,
      "end": 83.7,
      "text": " CloudFormation is an infrastructure as code or IAC service from AWS"
    },
    {
      "speakerLabel": "spk_0",
      "start": 83.7,
      "end": 87.80000000000001,
      "text": " that allows you to define and manage all of your AWS resources and configuration"
    },
    {
      "speakerLabel": "spk_0",
      "start": 87.8,
      "end": 90.5,
      "text": " using templates that are written in either JSON or YAML."
    },
    {
      "speakerLabel": "spk_0",
      "start": 90.5,
      "end": 94.5,
      "text": " So you can use it to provision, model and manage all of the resources"
    },
    {
      "speakerLabel": "spk_0",
      "start": 94.5,
      "end": 97.1,
      "text": " for your application in a fairly safe and repeatable way."
    },
    {
      "speakerLabel": "spk_0",
      "start": 97.1,
      "end": 99.8,
      "text": " So instead of creating things ad hoc manually,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 99.8,
      "end": 101.7,
      "text": " you define them in code using a template"
    },
    {
      "speakerLabel": "spk_0",
      "start": 101.7,
      "end": 105.8,
      "text": " and CloudFormation is the service that handles provisioning and updating it for you."
    },
    {
      "speakerLabel": "spk_0",
      "start": 105.8,
      "end": 108.1,
      "text": " So it's perfect when you need repeatability"
    },
    {
      "speakerLabel": "spk_0",
      "start": 108.1,
      "end": 112.3,
      "text": " because it allows you to define a consistent repeatable infrastructure setup."
    },
    {
      "speakerLabel": "spk_0",
      "start": 112.3,
      "end": 115,
      "text": " And also if you've got complex environments."
    },
    {
      "speakerLabel": "spk_0",
      "start": 115,
      "end": 118,
      "text": " So if you've got projects involving multiple resources"
    },
    {
      "speakerLabel": "spk_0",
      "start": 118,
      "end": 122.3,
      "text": " like EC2, RDS, VPCs and Lambda,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 122.3,
      "end": 125.9,
      "text": " CloudFormation can handle all the dependencies between them fairly seamlessly."
    },
    {
      "speakerLabel": "spk_0",
      "start": 125.9,
      "end": 129.1,
      "text": " It's also really good if you want to automate infrastructure management."
    },
    {
      "speakerLabel": "spk_0",
      "start": 129.1,
      "end": 131.4,
      "text": " And this is almost table stakes these days,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 131.4,
      "end": 134.4,
      "text": " but you can automate the entire lifecycle of your infrastructure,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 134.4,
      "end": 138.3,
      "text": " creating, updating and deleting resources without manual intervention."
    },
    {
      "speakerLabel": "spk_0",
      "start": 138.3,
      "end": 142.1,
      "text": " And it allows you to provide support for best practices"
    },
    {
      "speakerLabel": "spk_0",
      "start": 142.1,
      "end": 144.5,
      "text": " like versioning enrolled back as well."
    },
    {
      "speakerLabel": "spk_0",
      "start": 144.5,
      "end": 147.7,
      "text": " So it has automatic rollbacks if something goes wrong during deployment."
    },
    {
      "speakerLabel": "spk_0",
      "start": 147.7,
      "end": 150.4,
      "text": " By the way, if you want to dive a bit deeper on CloudFormation,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 150.4,
      "end": 152.2,
      "text": " we have spoken about it before."
    },
    {
      "speakerLabel": "spk_0",
      "start": 152.2,
      "end": 154.4,
      "text": " So in the show notes in the description below,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 154.4,
      "end": 156.3,
      "text": " you'll see links to episode 31,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 156.3,
      "end": 159,
      "text": " the battle between CloudFormation or Terraform"
    },
    {
      "speakerLabel": "spk_0",
      "start": 159,
      "end": 161.2,
      "text": " and episode 121,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 161.2,
      "end": 164,
      "text": " where we talked about five ways to extend CloudFormation."
    },
    {
      "speakerLabel": "spk_0",
      "start": 164,
      "end": 168.3,
      "text": " And that's the overview of CloudFormation and infrastructure as code."
    },
    {
      "speakerLabel": "spk_0",
      "start": 168.3,
      "end": 169.9,
      "text": " But we're here to talk about Drift."
    },
    {
      "speakerLabel": "spk_0",
      "start": 169.9,
      "end": 171.7,
      "text": " So what is the concept of Drift?"
    },
    {
      "speakerLabel": "spk_1",
      "start": 171.7,
      "end": 174.7,
      "text": " The concept of Drift is not unique to CloudFormation."
    },
    {
      "speakerLabel": "spk_1",
      "start": 174.7,
      "end": 178.7,
      "text": " In fact, it's something that can occur even with other infrastructure as code tools."
    },
    {
      "speakerLabel": "spk_1",
      "start": 178.7,
      "end": 181.79999999999998,
      "text": " For instance, you mentioned Terraform, even with Terraform."
    },
    {
      "speakerLabel": "spk_1",
      "start": 181.79999999999998,
      "end": 185.6,
      "text": " If you don't do things correctly or by the book, as they say,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 185.6,
      "end": 187.2,
      "text": " you can have Drift as well."
    },
    {
      "speakerLabel": "spk_1",
      "start": 187.2,
      "end": 191.39999999999998,
      "text": " So it's not necessarily an issue only with CloudFormation,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 191.39999999999998,
      "end": 195.2,
      "text": " but something that you need to keep into account every time you do infrastructure as code."
    },
    {
      "speakerLabel": "spk_1",
      "start": 195.2,
      "end": 198.6,
      "text": " And today, of course, we are going to focus a little bit more on CloudFormation"
    },
    {
      "speakerLabel": "spk_1",
      "start": 198.6,
      "end": 200.2,
      "text": " and the tooling around it"
    },
    {
      "speakerLabel": "spk_1",
      "start": 200.2,
      "end": 203.39999999999998,
      "text": " and some of the tips that are maybe a little bit more specific to CloudFormation."
    },
    {
      "speakerLabel": "spk_1",
      "start": 203.39999999999998,
      "end": 206.79999999999998,
      "text": " But I think the general concepts and the advice that we are going to give"
    },
    {
      "speakerLabel": "spk_1",
      "start": 206.79999999999998,
      "end": 210.1,
      "text": " can be applied also to another ISC tool."
    },
    {
      "speakerLabel": "spk_1",
      "start": 210.1,
      "end": 212.2,
      "text": " So if you prefer to use Terraform,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 212.2,
      "end": 214.5,
      "text": " I think you're still going to find value in this episode."
    },
    {
      "speakerLabel": "spk_1",
      "start": 214.5,
      "end": 215.79999999999998,
      "text": " So back to Drift,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 215.79999999999998,
      "end": 218.79999999999998,
      "text": " it happens when the current state of your infrastructure"
    },
    {
      "speakerLabel": "spk_1",
      "start": 218.79999999999998,
      "end": 222.7,
      "text": " diverge from the defined configuration in your templates."
    },
    {
      "speakerLabel": "spk_1",
      "start": 222.7,
      "end": 226.7,
      "text": " So in other words, if you have defined something using infrastructure as code"
    },
    {
      "speakerLabel": "spk_1",
      "start": 226.7,
      "end": 229.29999999999998,
      "text": " and at some point what you have defined there"
    },
    {
      "speakerLabel": "spk_1",
      "start": 229.3,
      "end": 232.5,
      "text": " doesn't exactly match what's in your AWS environment."
    },
    {
      "speakerLabel": "spk_1",
      "start": 232.5,
      "end": 234.60000000000002,
      "text": " So you have, if you just look at your templates,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 234.60000000000002,
      "end": 236.70000000000002,
      "text": " you think the reality should look in a certain way,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 236.70000000000002,
      "end": 238.9,
      "text": " but then if you actually look at your deployed stack,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 238.9,
      "end": 242.3,
      "text": " it doesn't really look exactly like you defined in your template."
    },
    {
      "speakerLabel": "spk_1",
      "start": 242.3,
      "end": 245,
      "text": " So you might be wondering how is this even possible"
    },
    {
      "speakerLabel": "spk_1",
      "start": 245,
      "end": 250.10000000000002,
      "text": " because we just say that CloudFormation infrastructure as code in general"
    },
    {
      "speakerLabel": "spk_1",
      "start": 250.10000000000002,
      "end": 253.3,
      "text": " is a way to get reproducible and deterministic deployments."
    },
    {
      "speakerLabel": "spk_1",
      "start": 253.3,
      "end": 257.90000000000003,
      "text": " So how is it possible that all of a sudden it doesn't really match anymore"
    },
    {
      "speakerLabel": "spk_1",
      "start": 257.9,
      "end": 260,
      "text": " what was defined in a template?"
    },
    {
      "speakerLabel": "spk_1",
      "start": 260,
      "end": 262.4,
      "text": " And this is something that can happen as we said"
    },
    {
      "speakerLabel": "spk_1",
      "start": 262.4,
      "end": 266.4,
      "text": " and generally happens when you start to misuse infrastructure as code."
    },
    {
      "speakerLabel": "spk_1",
      "start": 266.4,
      "end": 269.2,
      "text": " So again, let's maybe try to do a little bit of a step back"
    },
    {
      "speakerLabel": "spk_1",
      "start": 269.2,
      "end": 272.7,
      "text": " trying to describe what's the idea of infrastructure as code."
    },
    {
      "speakerLabel": "spk_1",
      "start": 272.7,
      "end": 277.4,
      "text": " In general, when you use tools such as CloudFormation or Terraform,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 277.4,
      "end": 280.2,
      "text": " those are declarative tools we can say."
    },
    {
      "speakerLabel": "spk_1",
      "start": 280.2,
      "end": 283.59999999999997,
      "text": " So tools where in a way they provide you with a language"
    },
    {
      "speakerLabel": "spk_1",
      "start": 283.59999999999997,
      "end": 286.09999999999997,
      "text": " that you can use to define or describe"
    },
    {
      "speakerLabel": "spk_1",
      "start": 286.1,
      "end": 288.70000000000005,
      "text": " what's the desired state of a given stack."
    },
    {
      "speakerLabel": "spk_1",
      "start": 288.70000000000005,
      "end": 292.3,
      "text": " So you never tell the infrastructure as code tool"
    },
    {
      "speakerLabel": "spk_1",
      "start": 292.3,
      "end": 296.20000000000005,
      "text": " what is the sequence of steps that it needs to do to get to a certain state."
    },
    {
      "speakerLabel": "spk_1",
      "start": 296.20000000000005,
      "end": 298.70000000000005,
      "text": " You just define what is that state"
    },
    {
      "speakerLabel": "spk_1",
      "start": 298.70000000000005,
      "end": 301.90000000000003,
      "text": " and you let the tool figure it out by itself"
    },
    {
      "speakerLabel": "spk_1",
      "start": 301.90000000000003,
      "end": 305.90000000000003,
      "text": " how to get from the current state to the new desired state."
    },
    {
      "speakerLabel": "spk_1",
      "start": 305.90000000000003,
      "end": 311.70000000000005,
      "text": " And the problem is that most of these infrastructure as code tools,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 311.7,
      "end": 316.3,
      "text": " they don't necessarily query upfront your current environment."
    },
    {
      "speakerLabel": "spk_1",
      "start": 316.3,
      "end": 318.59999999999997,
      "text": " For instance, your current AWS account."
    },
    {
      "speakerLabel": "spk_1",
      "start": 318.59999999999997,
      "end": 322.4,
      "text": " They will just store the state of the last deployment somewhere."
    },
    {
      "speakerLabel": "spk_1",
      "start": 322.4,
      "end": 324.9,
      "text": " In the case of CloudFormation, this is entirely managed"
    },
    {
      "speakerLabel": "spk_1",
      "start": 324.9,
      "end": 327,
      "text": " by the CloudFormation service itself."
    },
    {
      "speakerLabel": "spk_1",
      "start": 327,
      "end": 330.4,
      "text": " If you use something like Terraform, Terraform is actually quite flexible."
    },
    {
      "speakerLabel": "spk_1",
      "start": 330.4,
      "end": 332.5,
      "text": " It gives you visibility of the state file."
    },
    {
      "speakerLabel": "spk_1",
      "start": 332.5,
      "end": 335.5,
      "text": " You can decide to store it in a simple file in the file system."
    },
    {
      "speakerLabel": "spk_1",
      "start": 335.5,
      "end": 338.3,
      "text": " You can store it in DynamoDB, you can store it in S3."
    },
    {
      "speakerLabel": "spk_1",
      "start": 338.3,
      "end": 340.8,
      "text": " Actually, Terraform, it's quite open about that."
    },
    {
      "speakerLabel": "spk_1",
      "start": 340.8,
      "end": 344.90000000000003,
      "text": " CloudFormation is a little bit more opaque, but the same principle applies."
    },
    {
      "speakerLabel": "spk_1",
      "start": 344.90000000000003,
      "end": 347.7,
      "text": " So what happens the next time that you do a deployment"
    },
    {
      "speakerLabel": "spk_1",
      "start": 347.7,
      "end": 351.40000000000003,
      "text": " is that rather than reassessing what's the current state,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 351.40000000000003,
      "end": 355,
      "text": " the tool is just going to take the latest state recorded"
    },
    {
      "speakerLabel": "spk_1",
      "start": 355,
      "end": 357.90000000000003,
      "text": " during the previous deployment as the starting point."
    },
    {
      "speakerLabel": "spk_1",
      "start": 357.90000000000003,
      "end": 362.1,
      "text": " So it's going to try to understand, okay, what was that starting point?"
    },
    {
      "speakerLabel": "spk_1",
      "start": 362.1,
      "end": 364.2,
      "text": " What is the new state that you want to go to"
    },
    {
      "speakerLabel": "spk_1",
      "start": 364.2,
      "end": 366.1,
      "text": " and make a number of assumptions"
    },
    {
      "speakerLabel": "spk_1",
      "start": 366.1,
      "end": 368.90000000000003,
      "text": " and figure out what is a good plan to go from A to B."
    },
    {
      "speakerLabel": "spk_1",
      "start": 368.9,
      "end": 372.59999999999997,
      "text": " But the problem is that if you did something wrong,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 372.59999999999997,
      "end": 375.2,
      "text": " and we'll talk a little bit more about that in a second,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 375.2,
      "end": 378.59999999999997,
      "text": " what the infrastructure tool thinks it's A"
    },
    {
      "speakerLabel": "spk_1",
      "start": 378.59999999999997,
      "end": 381.5,
      "text": " is not exactly matching the current reality."
    },
    {
      "speakerLabel": "spk_1",
      "start": 381.5,
      "end": 383.2,
      "text": " So it might actually be something else"
    },
    {
      "speakerLabel": "spk_1",
      "start": 383.2,
      "end": 387.09999999999997,
      "text": " and therefore the plan to go from A to B is not necessarily a good plan"
    },
    {
      "speakerLabel": "spk_1",
      "start": 387.09999999999997,
      "end": 389.79999999999995,
      "text": " for what concerns the reality of your stack."
    },
    {
      "speakerLabel": "spk_1",
      "start": 389.79999999999995,
      "end": 393,
      "text": " So maybe we should mention some more practical examples"
    },
    {
      "speakerLabel": "spk_1",
      "start": 393,
      "end": 396.4,
      "text": " of what can actually introduce this kind of situation"
    },
    {
      "speakerLabel": "spk_1",
      "start": 396.4,
      "end": 398.7,
      "text": " that we are calling effective drift."
    },
    {
      "speakerLabel": "spk_0",
      "start": 398.7,
      "end": 401.3,
      "text": " I think the most common case for drift"
    },
    {
      "speakerLabel": "spk_0",
      "start": 401.3,
      "end": 404.3,
      "text": " is just when you're making manual changes."
    },
    {
      "speakerLabel": "spk_0",
      "start": 404.3,
      "end": 406.59999999999997,
      "text": " So someone might manually update a resource"
    },
    {
      "speakerLabel": "spk_0",
      "start": 406.59999999999997,
      "end": 409.2,
      "text": " without updating that CloudFormation template."
    },
    {
      "speakerLabel": "spk_0",
      "start": 409.2,
      "end": 412.59999999999997,
      "text": " That could be like tweaking an EC2 instance setting,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 412.59999999999997,
      "end": 414.09999999999997,
      "text": " changing some security groups"
    },
    {
      "speakerLabel": "spk_0",
      "start": 414.09999999999997,
      "end": 416.59999999999997,
      "text": " while trying to debug a connection issue"
    },
    {
      "speakerLabel": "spk_0",
      "start": 416.59999999999997,
      "end": 420.3,
      "text": " or changing an IAM policy to try and resolve some permissions issues."
    },
    {
      "speakerLabel": "spk_0",
      "start": 420.3,
      "end": 422.5,
      "text": " You can also have things that are a little bit more subtle"
    },
    {
      "speakerLabel": "spk_0",
      "start": 422.5,
      "end": 427.3,
      "text": " like changing the number of desired tasks in a Fargate service."
    },
    {
      "speakerLabel": "spk_0",
      "start": 427.3,
      "end": 430.3,
      "text": " And that's something that is quite common to happen"
    },
    {
      "speakerLabel": "spk_0",
      "start": 430.3,
      "end": 433.6,
      "text": " actually outside your infrastructure's code tooling."
    },
    {
      "speakerLabel": "spk_0",
      "start": 433.6,
      "end": 435.6,
      "text": " So manual changes, probably very common."
    },
    {
      "speakerLabel": "spk_0",
      "start": 435.6,
      "end": 436.90000000000003,
      "text": " Then you've got third-party tools."
    },
    {
      "speakerLabel": "spk_0",
      "start": 436.90000000000003,
      "end": 440.40000000000003,
      "text": " So sometimes external automation tools may modify resources"
    },
    {
      "speakerLabel": "spk_0",
      "start": 440.40000000000003,
      "end": 442.2,
      "text": " without CloudFormation being aware of it."
    },
    {
      "speakerLabel": "spk_0",
      "start": 442.2,
      "end": 444.40000000000003,
      "text": " These can be tools that try to assess compliance"
    },
    {
      "speakerLabel": "spk_0",
      "start": 444.40000000000003,
      "end": 447,
      "text": " and that might apply resources on your behalf"
    },
    {
      "speakerLabel": "spk_0",
      "start": 447,
      "end": 449.1,
      "text": " to apply specific best practices."
    },
    {
      "speakerLabel": "spk_0",
      "start": 449.1,
      "end": 452.8,
      "text": " And it can also be internal, not necessarily third-party tools,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 452.8,
      "end": 454.1,
      "text": " but just external automation."
    },
    {
      "speakerLabel": "spk_0",
      "start": 454.1,
      "end": 456.7,
      "text": " You might have set up specific automation"
    },
    {
      "speakerLabel": "spk_0",
      "start": 456.7,
      "end": 458,
      "text": " that can alter resources."
    },
    {
      "speakerLabel": "spk_0",
      "start": 458,
      "end": 460.5,
      "text": " Like you might have a script that helps saving cost"
    },
    {
      "speakerLabel": "spk_0",
      "start": 460.5,
      "end": 462.9,
      "text": " by turning or scaling down EC2"
    },
    {
      "speakerLabel": "spk_0",
      "start": 462.9,
      "end": 466.7,
      "text": " or turning it on and off just to match your expected load."
    },
    {
      "speakerLabel": "spk_0",
      "start": 466.7,
      "end": 468.3,
      "text": " Or you might just have some internal tooling"
    },
    {
      "speakerLabel": "spk_0",
      "start": 468.3,
      "end": 471.7,
      "text": " that applies security best practices like turning encryption on."
    },
    {
      "speakerLabel": "spk_0",
      "start": 471.7,
      "end": 475.3,
      "text": " Using a mixture of IAC tools as well can cause drift."
    },
    {
      "speakerLabel": "spk_0",
      "start": 475.3,
      "end": 477.7,
      "text": " So if you use a mix of different tools"
    },
    {
      "speakerLabel": "spk_0",
      "start": 477.7,
      "end": 479.5,
      "text": " and stacks managed by different tools"
    },
    {
      "speakerLabel": "spk_0",
      "start": 479.5,
      "end": 481.9,
      "text": " happen to share the same resources, this might cause drift."
    },
    {
      "speakerLabel": "spk_0",
      "start": 481.9,
      "end": 484,
      "text": " This is a dangerous area, I would say."
    },
    {
      "speakerLabel": "spk_0",
      "start": 484,
      "end": 487.6,
      "text": " The shared resources state might look very different to every tool"
    },
    {
      "speakerLabel": "spk_0",
      "start": 487.6,
      "end": 489.6,
      "text": " depending on the order of deployments"
    },
    {
      "speakerLabel": "spk_0",
      "start": 489.6,
      "end": 493,
      "text": " and when it took its perception of state, if you like."
    },
    {
      "speakerLabel": "spk_0",
      "start": 493,
      "end": 494.7,
      "text": " So effectively, each tool won't be able to know"
    },
    {
      "speakerLabel": "spk_0",
      "start": 494.7,
      "end": 497.6,
      "text": " what the changes are applied by the other two."
    },
    {
      "speakerLabel": "spk_0",
      "start": 497.6,
      "end": 500.4,
      "text": " So that's how it can happen, but how do we avoid it?"
    },
    {
      "speakerLabel": "spk_1",
      "start": 500.4,
      "end": 502.8,
      "text": " Yeah, I think at this point, it should be very clear"
    },
    {
      "speakerLabel": "spk_1",
      "start": 502.8,
      "end": 505.7,
      "text": " what can actually introduce drift, what drift is."
    },
    {
      "speakerLabel": "spk_1",
      "start": 505.7,
      "end": 509.7,
      "text": " So in a way, we can start to guess and working backwards"
    },
    {
      "speakerLabel": "spk_1",
      "start": 509.7,
      "end": 513.4,
      "text": " and try to think, okay, how can we avoid it, right?"
    },
    {
      "speakerLabel": "spk_1",
      "start": 513.4,
      "end": 517.3,
      "text": " And one thing is that we should try to avoid manual changes"
    },
    {
      "speakerLabel": "spk_1",
      "start": 517.3,
      "end": 520.9,
      "text": " as much as possible, unless you know what you're doing."
    },
    {
      "speakerLabel": "spk_1",
      "start": 520.9,
      "end": 525.9,
      "text": " Like, I think there are some cases where you might still need to do manual changes"
    },
    {
      "speakerLabel": "spk_1",
      "start": 525.9,
      "end": 528.9,
      "text": " because maybe you are trying to do certain things that"
    },
    {
      "speakerLabel": "spk_1",
      "start": 528.9,
      "end": 531.9,
      "text": " in that particular moment, it's just easier to do it manually."
    },
    {
      "speakerLabel": "spk_1",
      "start": 531.9,
      "end": 536.3,
      "text": " We mentioned, for example, trying to resolve an issue with a security group."
    },
    {
      "speakerLabel": "spk_1",
      "start": 536.3,
      "end": 540.1,
      "text": " It is, I think, totally legit to try to figure out exactly"
    },
    {
      "speakerLabel": "spk_1",
      "start": 540.1,
      "end": 541.6999999999999,
      "text": " what is the correct configuration."
    },
    {
      "speakerLabel": "spk_1",
      "start": 541.7,
      "end": 546,
      "text": " And then, of course, you need to remember to apply that correct configuration"
    },
    {
      "speakerLabel": "spk_1",
      "start": 546,
      "end": 550.3000000000001,
      "text": " to your infrastructure as code to make sure that maybe you had a little bit of a drift"
    },
    {
      "speakerLabel": "spk_1",
      "start": 550.3000000000001,
      "end": 554.8000000000001,
      "text": " for a few minutes, but then that drift is immediately reconciled"
    },
    {
      "speakerLabel": "spk_1",
      "start": 554.8000000000001,
      "end": 559,
      "text": " and your confirmation stack is effectively in line with the reality"
    },
    {
      "speakerLabel": "spk_1",
      "start": 559,
      "end": 561.6,
      "text": " of your stack deployed on AWS."
    },
    {
      "speakerLabel": "spk_1",
      "start": 561.6,
      "end": 565.2,
      "text": " So again, manual changes generally to be avoided."
    },
    {
      "speakerLabel": "spk_1",
      "start": 565.2,
      "end": 569.9000000000001,
      "text": " You can still do it, and in some cases, it can be useful to do manual changes,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 569.9,
      "end": 573.3,
      "text": " but always remember that manual changes will introduce drift"
    },
    {
      "speakerLabel": "spk_1",
      "start": 573.3,
      "end": 576.3,
      "text": " unless you propagate them back into your stack."
    },
    {
      "speakerLabel": "spk_1",
      "start": 576.3,
      "end": 579.1999999999999,
      "text": " Then the other advice is always use ISE."
    },
    {
      "speakerLabel": "spk_1",
      "start": 579.1999999999999,
      "end": 583.5,
      "text": " So try to avoid hybrid mode deployments, we would call them,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 583.5,
      "end": 589.5,
      "text": " which is sometimes you have this situation where different teams have different practices."
    },
    {
      "speakerLabel": "spk_1",
      "start": 589.5,
      "end": 592.3,
      "text": " So you might have teams that still do things manually,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 592.3,
      "end": 594.3,
      "text": " other teams that use infrastructure as code,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 594.3,
      "end": 598.1,
      "text": " and then somehow you end up with this kind of mixed stack"
    },
    {
      "speakerLabel": "spk_1",
      "start": 598.1,
      "end": 600.7,
      "text": " that has some resources that are managed manually,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 600.7,
      "end": 604.9,
      "text": " other resources that are fully managed by ISE."
    },
    {
      "speakerLabel": "spk_1",
      "start": 604.9,
      "end": 607.8000000000001,
      "text": " And yeah, things can get messy really quickly"
    },
    {
      "speakerLabel": "spk_1",
      "start": 607.8000000000001,
      "end": 611.4,
      "text": " and it's going to be very hard then to tell when a drift is going to happen."
    },
    {
      "speakerLabel": "spk_1",
      "start": 611.4,
      "end": 614.4,
      "text": " It's eventually going to happen, but then how it's going to happen"
    },
    {
      "speakerLabel": "spk_1",
      "start": 614.4,
      "end": 618.2,
      "text": " and then what kind of results you can have as a consequence of that."
    },
    {
      "speakerLabel": "spk_1",
      "start": 618.2,
      "end": 622.2,
      "text": " And we also mentioned not to mix different ISE tools."
    },
    {
      "speakerLabel": "spk_1",
      "start": 622.2,
      "end": 624.9,
      "text": " So you can use different ISE tools together."
    },
    {
      "speakerLabel": "spk_1",
      "start": 624.9,
      "end": 627.7,
      "text": " There are ways to do that safely."
    },
    {
      "speakerLabel": "spk_1",
      "start": 627.7,
      "end": 632.8000000000001,
      "text": " I think the risk is when different ISE tools are actually sharing the same resources,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 632.8000000000001,
      "end": 637.8000000000001,
      "text": " but you can have a mix of ISE tools when they manage different stacks."
    },
    {
      "speakerLabel": "spk_1",
      "start": 637.8000000000001,
      "end": 642.8000000000001,
      "text": " And other things are if you're using external automations,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 642.8000000000001,
      "end": 647.3000000000001,
      "text": " ideally you want this automation to either update your templates"
    },
    {
      "speakerLabel": "spk_1",
      "start": 647.3000000000001,
      "end": 648.8000000000001,
      "text": " and not the resource directly,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 648.8000000000001,
      "end": 653.2,
      "text": " or if it's not easy for you to let the automation update the templates,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 653.2,
      "end": 655.2,
      "text": " maybe you can have some kind of reporting"
    },
    {
      "speakerLabel": "spk_1",
      "start": 655.2,
      "end": 659.5,
      "text": " that then you can manually take and apply into your infrastructure as code"
    },
    {
      "speakerLabel": "spk_1",
      "start": 659.5,
      "end": 665.5,
      "text": " rather than letting the automation change resources and then ending up with drift."
    },
    {
      "speakerLabel": "spk_1",
      "start": 665.5,
      "end": 669.5,
      "text": " So it might be of course more complex to set up automation this way,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 669.5,
      "end": 676.4000000000001,
      "text": " but I think you always need to prefer the safety rather than maximum automation"
    },
    {
      "speakerLabel": "spk_1",
      "start": 676.4000000000001,
      "end": 679.1,
      "text": " and then end up with something that can be inconsistent."
    },
    {
      "speakerLabel": "spk_1",
      "start": 679.1,
      "end": 683.5,
      "text": " So now that we know some ways that we can avoid drift,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 683.5,
      "end": 685.2,
      "text": " how can we detect it?"
    },
    {
      "speakerLabel": "spk_1",
      "start": 685.2,
      "end": 688.2,
      "text": " How do we really know if we have drift in one of our stacks?"
    },
    {
      "speakerLabel": "spk_0",
      "start": 688.2,
      "end": 693.2,
      "text": " Yeah, it's very important to have some sort of ability to detect that you've got drift"
    },
    {
      "speakerLabel": "spk_0",
      "start": 693.2,
      "end": 695.8,
      "text": " and then obviously take remediation steps."
    },
    {
      "speakerLabel": "spk_0",
      "start": 695.8,
      "end": 698.7,
      "text": " I mean, you might also have a degree of acceptable drift."
    },
    {
      "speakerLabel": "spk_0",
      "start": 698.7,
      "end": 701.4,
      "text": " I think when you're talking about automation tools,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 701.4,
      "end": 704,
      "text": " you know, updating security configuration or applying tags,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 704,
      "end": 708.6,
      "text": " sometimes organizations just take the view that the infrastructure as code tools"
    },
    {
      "speakerLabel": "spk_0",
      "start": 708.6,
      "end": 713,
      "text": " update the resources and the automation continually aligns them to comply."
    },
    {
      "speakerLabel": "spk_0",
      "start": 713,
      "end": 715.7,
      "text": " And that's acceptable drift, I guess to a degree."
    },
    {
      "speakerLabel": "spk_0",
      "start": 715.7,
      "end": 717.7,
      "text": " But if you have other kinds of drift,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 717.7,
      "end": 721.6,
      "text": " then you might just realize too late because the deployment fails in a weird way,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 721.6,
      "end": 724.7,
      "text": " like tries to modify a resource that doesn't exist anymore."
    },
    {
      "speakerLabel": "spk_0",
      "start": 724.7,
      "end": 729.3,
      "text": " So luckily, CloudFormation for the past few years has a feature to detect drift"
    },
    {
      "speakerLabel": "spk_0",
      "start": 729.3,
      "end": 733.4,
      "text": " and you can use it from the management console by just going to a stack."
    },
    {
      "speakerLabel": "spk_0",
      "start": 733.4,
      "end": 736.2,
      "text": " You click on stack actions and select detect drift."
    },
    {
      "speakerLabel": "spk_0",
      "start": 736.2,
      "end": 739.2,
      "text": " And I think this is supported for most configurations now."
    },
    {
      "speakerLabel": "spk_0",
      "start": 739.2,
      "end": 742.8,
      "text": " When it launched, it didn't support everything, didn't detect everything."
    },
    {
      "speakerLabel": "spk_0",
      "start": 742.8,
      "end": 747.9,
      "text": " It's going to start a background scan and CloudFormation will compare the known state"
    },
    {
      "speakerLabel": "spk_0",
      "start": 747.9,
      "end": 751.1999999999999,
      "text": " with the actual state of all of the resources in the stack."
    },
    {
      "speakerLabel": "spk_0",
      "start": 751.1999999999999,
      "end": 754.5999999999999,
      "text": " And then once it's finished, you can visualize the results of the operation"
    },
    {
      "speakerLabel": "spk_0",
      "start": 754.5999999999999,
      "end": 758.5,
      "text": " by clicking on view drift results under stack actions."
    },
    {
      "speakerLabel": "spk_0",
      "start": 758.5,
      "end": 761.8,
      "text": " So in that page then after a few minutes, you'll see if your stack has drifted"
    },
    {
      "speakerLabel": "spk_0",
      "start": 761.8,
      "end": 765.5999999999999,
      "text": " and if it has, it'll also give you a diff of the current stack state"
    },
    {
      "speakerLabel": "spk_0",
      "start": 765.5999999999999,
      "end": 767.3,
      "text": " and what CloudFormation expected."
    },
    {
      "speakerLabel": "spk_0",
      "start": 767.3,
      "end": 770.6999999999999,
      "text": " Now, luckily, you can automate this process to some degree"
    },
    {
      "speakerLabel": "spk_0",
      "start": 770.7,
      "end": 775,
      "text": " and trigger an alarm if one of your stacks has drifted and that's a good idea."
    },
    {
      "speakerLabel": "spk_0",
      "start": 775,
      "end": 777.6,
      "text": " I think if you're concerned about drift and going to take it seriously,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 777.6,
      "end": 780.6,
      "text": " there is a tutorial by AWS that explains you how to do that"
    },
    {
      "speakerLabel": "spk_0",
      "start": 780.6,
      "end": 782.6,
      "text": " and we'll have a link in the notes below."
    },
    {
      "speakerLabel": "spk_0",
      "start": 782.6,
      "end": 785.2,
      "text": " So we've got some drift, we've seen it, we've detected it."
    },
    {
      "speakerLabel": "spk_0",
      "start": 785.2,
      "end": 786.2,
      "text": " What do we do?"
    },
    {
      "speakerLabel": "spk_1",
      "start": 786.2,
      "end": 788.5,
      "text": " Yeah, I don't think there is a universal solution"
    },
    {
      "speakerLabel": "spk_1",
      "start": 788.5,
      "end": 790.6,
      "text": " and to be fair, it's always a little bit of a pain."
    },
    {
      "speakerLabel": "spk_1",
      "start": 790.6,
      "end": 794.4000000000001,
      "text": " There are situations where maybe you just created that drift"
    },
    {
      "speakerLabel": "spk_1",
      "start": 794.4000000000001,
      "end": 797.2,
      "text": " like the example we mentioned about the security groups"
    },
    {
      "speakerLabel": "spk_1",
      "start": 797.2,
      "end": 800.5,
      "text": " and therefore in that case, it's very easy to reconcile your stack"
    },
    {
      "speakerLabel": "spk_1",
      "start": 800.5,
      "end": 803.7,
      "text": " and fix the drift because you know exactly what did you change"
    },
    {
      "speakerLabel": "spk_1",
      "start": 803.7,
      "end": 807.2,
      "text": " and you can easily reapply the same changes into your infrastructure as code."
    },
    {
      "speakerLabel": "spk_1",
      "start": 807.2,
      "end": 810.5,
      "text": " And in the case of a security group, that's probably going to be a few properties."
    },
    {
      "speakerLabel": "spk_1",
      "start": 810.5,
      "end": 812.6,
      "text": " Maybe you're going to open different ports,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 812.6,
      "end": 816.2,
      "text": " but it's very limited to a specific area of your stack."
    },
    {
      "speakerLabel": "spk_1",
      "start": 816.2,
      "end": 819,
      "text": " But in some cases, it might be much more complex"
    },
    {
      "speakerLabel": "spk_1",
      "start": 819,
      "end": 824.2,
      "text": " and you probably need to be a little bit creative in trying to figure out exactly"
    },
    {
      "speakerLabel": "spk_1",
      "start": 824.2,
      "end": 826.2,
      "text": " first of all, why the drift happened,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 826.2,
      "end": 829.7,
      "text": " what is exactly the desired state versus the current state"
    },
    {
      "speakerLabel": "spk_1",
      "start": 829.7,
      "end": 831.7,
      "text": " and how to reconcile the two."
    },
    {
      "speakerLabel": "spk_1",
      "start": 831.7,
      "end": 838.1,
      "text": " And the general problem is that you might think about a very simple solution."
    },
    {
      "speakerLabel": "spk_1",
      "start": 838.1,
      "end": 841.3000000000001,
      "text": " The simplest solution is probably, okay, I'm just going to destroy the stack"
    },
    {
      "speakerLabel": "spk_1",
      "start": 841.3000000000001,
      "end": 845.7,
      "text": " and recreate it entirely with a well-known, well-defined end state,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 845.7,
      "end": 847,
      "text": " which is something that works."
    },
    {
      "speakerLabel": "spk_1",
      "start": 847,
      "end": 849.7,
      "text": " But of course, if you have an application that is running in production,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 849.7,
      "end": 851.8000000000001,
      "text": " you probably cannot afford to do that"
    },
    {
      "speakerLabel": "spk_1",
      "start": 851.8000000000001,
      "end": 853.8000000000001,
      "text": " because of course, you are going to create downtime."
    },
    {
      "speakerLabel": "spk_1",
      "start": 853.8,
      "end": 858.3,
      "text": " So it gets really tricky when you want to try to reconcile drift"
    },
    {
      "speakerLabel": "spk_1",
      "start": 858.3,
      "end": 860.0999999999999,
      "text": " while not creating downtimes."
    },
    {
      "speakerLabel": "spk_1",
      "start": 860.0999999999999,
      "end": 863.0999999999999,
      "text": " And that's why sometimes you need to be a little bit creative."
    },
    {
      "speakerLabel": "spk_1",
      "start": 863.0999999999999,
      "end": 866,
      "text": " And recently, for instance, we had a use case at work"
    },
    {
      "speakerLabel": "spk_1",
      "start": 866,
      "end": 869.5999999999999,
      "text": " where we had some drift related to a load balancer."
    },
    {
      "speakerLabel": "spk_1",
      "start": 869.5999999999999,
      "end": 872.0999999999999,
      "text": " So we needed to do some changes to this load balancer,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 872.0999999999999,
      "end": 875.9,
      "text": " but doing the changes will recreate the load balancer entirely."
    },
    {
      "speakerLabel": "spk_1",
      "start": 875.9,
      "end": 877.5999999999999,
      "text": " And because in that particular stack,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 877.5999999999999,
      "end": 880.6999999999999,
      "text": " the DNS entries were not managed by that stack,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 880.6999999999999,
      "end": 882.0999999999999,
      "text": " but were managed externally,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 882.1,
      "end": 885.2,
      "text": " doing the changes will basically recreate a new load balancer"
    },
    {
      "speakerLabel": "spk_1",
      "start": 885.2,
      "end": 888.6,
      "text": " with a different IP address or a different DNS record,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 888.6,
      "end": 891,
      "text": " and therefore we will have downtimes."
    },
    {
      "speakerLabel": "spk_1",
      "start": 891,
      "end": 892.9,
      "text": " And to solve that particular use case,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 892.9,
      "end": 896.7,
      "text": " we basically needed to keep the existing load balancer as it was,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 896.7,
      "end": 901.3000000000001,
      "text": " spin up a new load balancer with basically exactly the same targets,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 901.3000000000001,
      "end": 904,
      "text": " then change the DNS in the other stack,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 904,
      "end": 907.2,
      "text": " and effectively we kind of switch load balancers that way."
    },
    {
      "speakerLabel": "spk_1",
      "start": 907.2,
      "end": 911,
      "text": " So we had a moment of time where we had two different load balancers"
    },
    {
      "speakerLabel": "spk_1",
      "start": 911,
      "end": 913.5,
      "text": " that led time to the DNS to propagate correctly,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 913.5,
      "end": 916.4,
      "text": " and then at that point we could delete the old load balancer."
    },
    {
      "speakerLabel": "spk_1",
      "start": 916.4,
      "end": 918.9,
      "text": " So in that sense, this is just an example that shows you"
    },
    {
      "speakerLabel": "spk_1",
      "start": 918.9,
      "end": 920.8,
      "text": " that sometimes you need to think about"
    },
    {
      "speakerLabel": "spk_1",
      "start": 920.8,
      "end": 923,
      "text": " a little bit more involved and complex solutions"
    },
    {
      "speakerLabel": "spk_1",
      "start": 923,
      "end": 927.1,
      "text": " just to make sure you slowly converge to the desired state"
    },
    {
      "speakerLabel": "spk_1",
      "start": 927.1,
      "end": 930.6,
      "text": " by trying to avoid to destroy resources that might be used in production,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 930.6,
      "end": 934.3,
      "text": " and therefore if you just destroy them, you might end up with downtimes."
    },
    {
      "speakerLabel": "spk_1",
      "start": 934.3,
      "end": 938.3,
      "text": " So yeah, I guess in general, what you want to do is try to apply,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 938.3,
      "end": 940.8,
      "text": " to figure out, first of all, what happened,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 940.8,
      "end": 944.4,
      "text": " figure out how do I get to the specific target state,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 944.4,
      "end": 947.4,
      "text": " and then try to create a plan where step by step"
    },
    {
      "speakerLabel": "spk_1",
      "start": 947.4,
      "end": 949.4,
      "text": " you understand what's going to happen,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 949.4,
      "end": 951,
      "text": " what is going to be the new state,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 951,
      "end": 954.5999999999999,
      "text": " and then slowly make sure that that state converges to the desired one."
    },
    {
      "speakerLabel": "spk_1",
      "start": 954.5999999999999,
      "end": 959.6999999999999,
      "text": " Now at that point, you hopefully are going to end up with a new version of your stack"
    },
    {
      "speakerLabel": "spk_1",
      "start": 959.6999999999999,
      "end": 963.3,
      "text": " where your actual state described in the stack"
    },
    {
      "speakerLabel": "spk_1",
      "start": 963.3,
      "end": 966.5,
      "text": " and the state present in AWS matches."
    },
    {
      "speakerLabel": "spk_1",
      "start": 966.5,
      "end": 969.5999999999999,
      "text": " So from that moment on, if you keep doing changes correctly,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 969.6,
      "end": 973.3000000000001,
      "text": " only using infrastructure as code, that situation shouldn't happen again."
    },
    {
      "speakerLabel": "spk_1",
      "start": 973.3000000000001,
      "end": 977.5,
      "text": " So yeah, this is, I guess, one of the approaches."
    },
    {
      "speakerLabel": "spk_1",
      "start": 977.5,
      "end": 979.9,
      "text": " Do you have other ideas, Eoin, that you want to share?"
    },
    {
      "speakerLabel": "spk_0",
      "start": 979.9,
      "end": 983.3000000000001,
      "text": " I would suggest maybe using change sets in CloudFormation"
    },
    {
      "speakerLabel": "spk_0",
      "start": 983.3000000000001,
      "end": 986.1,
      "text": " as a way to help with that, because with change sets,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 986.1,
      "end": 988.3000000000001,
      "text": " it's a bit like a Terraform plan."
    },
    {
      "speakerLabel": "spk_0",
      "start": 988.3000000000001,
      "end": 989.8000000000001,
      "text": " It's not going to apply changes."
    },
    {
      "speakerLabel": "spk_0",
      "start": 989.8000000000001,
      "end": 991.8000000000001,
      "text": " It'll just create a change set for you with the diff,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 991.8000000000001,
      "end": 995.2,
      "text": " and it'll show you what changes are going to happen beforehand."
    },
    {
      "speakerLabel": "spk_0",
      "start": 995.2,
      "end": 998.6,
      "text": " Now you can also enable deletion protection on resources that you want to protect."
    },
    {
      "speakerLabel": "spk_0",
      "start": 998.6,
      "end": 1002.5,
      "text": " Of course, if you can't afford downtime or some data loss,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1002.5,
      "end": 1004.8000000000001,
      "text": " sometimes the simplest solution when you have drift"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1004.8000000000001,
      "end": 1006.7,
      "text": " is just to destroy the stack and recreate it."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1006.7,
      "end": 1009.7,
      "text": " So in the development environment or pre-production environment,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1009.7,
      "end": 1010.8000000000001,
      "text": " that might be the way you go."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1010.8000000000001,
      "end": 1013.8000000000001,
      "text": " Otherwise, you'll have to come up with a plan with multiple incremental steps"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1013.8000000000001,
      "end": 1015.3000000000001,
      "text": " that can help you to minimize damage"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1015.3000000000001,
      "end": 1019.4,
      "text": " as you convert your infrastructure as code state to the actual state of the stack."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1019.4,
      "end": 1021.4,
      "text": " And that can seem like a lot of work,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1021.4,
      "end": 1024.8,
      "text": " but at the same time, if you don't do it very frequently, it is an awful lot of work."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1024.8,
      "end": 1026.4,
      "text": " But if it's something you get used to,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1026.4,
      "end": 1029.9,
      "text": " it's a good practice to just get into the habit of."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1029.9,
      "end": 1034.2,
      "text": " Other times, it might just be safer to bring up an entirely new stack in parallel."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1034.2,
      "end": 1036.3000000000002,
      "text": " Do all the necessary data migration, if any,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1036.3000000000002,
      "end": 1038.5,
      "text": " and then shift the traffic to the new stack"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1038.5,
      "end": 1040.9,
      "text": " and then finally remove the old drifted stack."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1040.9,
      "end": 1044.5,
      "text": " So yeah, I mean, resolving drift might be tedious and costly."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1044.5,
      "end": 1049.4,
      "text": " That's why you want to avoid it as much as possible in the first place."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1049.4,
      "end": 1054.4,
      "text": " Maybe another worthy mention is that if drift includes new resources,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1054.4,
      "end": 1057.9,
      "text": " if you were to consider that other resources might have been added as well,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1057.9,
      "end": 1059.8000000000002,
      "text": " that should have been in that stack."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1059.8000000000002,
      "end": 1061.7,
      "text": " You can also use CloudFormation import."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1061.7,
      "end": 1063.3000000000002,
      "text": " And that's another way to manage drift."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1063.3000000000002,
      "end": 1066.1000000000001,
      "text": " We mentioned this in our way back in episode 11."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1066.1000000000001,
      "end": 1067.9,
      "text": " How do you move away from the management console"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1067.9,
      "end": 1071.3000000000002,
      "text": " and how to get stuff that isn't managed by infrastructure as code into it?"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1071.3000000000002,
      "end": 1072.8000000000002,
      "text": " So that's one dimension as well."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1072.8000000000002,
      "end": 1074.8000000000002,
      "text": " Just on drift detection as well, as you know,"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1074.8000000000002,
      "end": 1077.8000000000002,
      "text": " we should probably add that drift detection itself"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1077.8000000000002,
      "end": 1080.9,
      "text": " doesn't have any cost or charge associated with it."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1080.9,
      "end": 1084.3000000000002,
      "text": " But depending on the resources involved, correcting it might, of course."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1084.3,
      "end": 1088.2,
      "text": " So changing resource types or scaling can trigger charges."
    },
    {
      "speakerLabel": "spk_0",
      "start": 1088.2,
      "end": 1090.2,
      "text": " Of course, factor in the cost of downtime"
    },
    {
      "speakerLabel": "spk_0",
      "start": 1090.2,
      "end": 1094,
      "text": " or potential security risks from unmanaged changes as well."
    },
    {
      "speakerLabel": "spk_1",
      "start": 1094,
      "end": 1094.8,
      "text": " Absolutely."
    },
    {
      "speakerLabel": "spk_1",
      "start": 1094.8,
      "end": 1099.5,
      "text": " I think this covers more or less everything we wanted to share for today."
    },
    {
      "speakerLabel": "spk_1",
      "start": 1099.5,
      "end": 1104.3999999999999,
      "text": " To summarize, CloudFormation drift is an issue that can be very tricky"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1104.3999999999999,
      "end": 1106.3999999999999,
      "text": " and can be unexpected sometimes."
    },
    {
      "speakerLabel": "spk_1",
      "start": 1106.3999999999999,
      "end": 1111.3999999999999,
      "text": " So even if you do an effort to maintain your stacks well"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1111.4,
      "end": 1113.1000000000001,
      "text": " or using infrastructure as code,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1113.1000000000001,
      "end": 1117.9,
      "text": " there are always so many different factors that can sneak in and cause drift."
    },
    {
      "speakerLabel": "spk_1",
      "start": 1117.9,
      "end": 1121.8000000000002,
      "text": " So I think it's just a good practice to try to stay vigilant"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1121.8000000000002,
      "end": 1124.9,
      "text": " and maybe come up with some automation like the one we mentioned"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1124.9,
      "end": 1128.1000000000001,
      "text": " from the tutorial by AWS that we have in the link in the show notes"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1128.1000000000001,
      "end": 1132.5,
      "text": " to try to give you some kind of alarm as soon as possible"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1132.5,
      "end": 1135.9,
      "text": " when drift is detected so that you can action sooner rather than later."
    },
    {
      "speakerLabel": "spk_1",
      "start": 1135.9,
      "end": 1138.5,
      "text": " Because of course, the more drift compounds,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1138.5,
      "end": 1141.4,
      "text": " the more challenging it's going to get to resolve that drift."
    },
    {
      "speakerLabel": "spk_1",
      "start": 1141.4,
      "end": 1143.5,
      "text": " So that's everything we have."
    },
    {
      "speakerLabel": "spk_1",
      "start": 1143.5,
      "end": 1147.6,
      "text": " And we actually are curious to know if you had any interesting story"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1147.6,
      "end": 1150.1,
      "text": " of stack drifting and maybe you had to come up"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1150.1,
      "end": 1152.6,
      "text": " with some very creative resolution strategy."
    },
    {
      "speakerLabel": "spk_1",
      "start": 1152.6,
      "end": 1155.3,
      "text": " If that's the case, please share it with us,"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1155.3,
      "end": 1158.6,
      "text": " either by reach out to us individually on our social channels"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1158.6,
      "end": 1161.6,
      "text": " or maybe by leaving a comment on YouTube"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1161.6,
      "end": 1164.3,
      "text": " or rather in your podcast player of choice."
    },
    {
      "speakerLabel": "spk_1",
      "start": 1164.3,
      "end": 1166.8,
      "text": " So with that, thank you very much for staying with us"
    },
    {
      "speakerLabel": "spk_1",
      "start": 1166.8,
      "end": 1168.5,
      "text": " and we'll see you in the next one."
    }
  ]
}