{
 "speakers": {
  "spk_0": "spk_0",
  "spk_1": "spk_1"
 },
 "segments": [
  {
   "speakerLabel": "spk_0",
   "start": 0,
   "end": 6.640000000000001,
   "text": " Hello, everyone, and welcome to our first live stream of AWS Bites."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6.640000000000001,
   "end": 10.32,
   "text": " My name is Luciano, and today I'm joined by Eoin."
  },
  {
   "speakerLabel": "spk_0",
   "start": 10.32,
   "end": 12.200000000000001,
   "text": " So hello, everyone."
  },
  {
   "speakerLabel": "spk_0",
   "start": 12.200000000000001,
   "end": 13.200000000000001,
   "text": " Hello."
  },
  {
   "speakerLabel": "spk_0",
   "start": 13.200000000000001,
   "end": 20.240000000000002,
   "text": " Yeah, if this is the first time for you hearing or seeing AWS Bites, what AWS Bytes is is"
  },
  {
   "speakerLabel": "spk_0",
   "start": 20.240000000000002,
   "end": 25.54,
   "text": " basically a podcast about AWS where we try to share all the things that we learn and"
  },
  {
   "speakerLabel": "spk_0",
   "start": 25.54,
   "end": 27.84,
   "text": " discover about AWS."
  },
  {
   "speakerLabel": "spk_0",
   "start": 27.84,
   "end": 31.66,
   "text": " And so far we've been doing it in the form of a regular podcast."
  },
  {
   "speakerLabel": "spk_0",
   "start": 31.66,
   "end": 34.28,
   "text": " We have a website, awsbytes.com."
  },
  {
   "speakerLabel": "spk_0",
   "start": 34.28,
   "end": 36.5,
   "text": " You can go there and watch all the previous episodes."
  },
  {
   "speakerLabel": "spk_0",
   "start": 36.5,
   "end": 40.08,
   "text": " And in every episode, we basically try to answer different kinds of questions about"
  },
  {
   "speakerLabel": "spk_0",
   "start": 40.08,
   "end": 41.08,
   "text": " AWS."
  },
  {
   "speakerLabel": "spk_0",
   "start": 41.08,
   "end": 45.6,
   "text": " For instance, we've been talking about all the things that you need to know when doing"
  },
  {
   "speakerLabel": "spk_0",
   "start": 45.6,
   "end": 52.86,
   "text": " JavaScript with serverless on AWS, or we compare Terraform and Cloud formations."
  },
  {
   "speakerLabel": "spk_0",
   "start": 52.86,
   "end": 54.72,
   "text": " We have a bunch of different topics."
  },
  {
   "speakerLabel": "spk_0",
   "start": 54.72,
   "end": 58.76,
   "text": " And by any means, feel free to let us know which one did you like the most, which ones"
  },
  {
   "speakerLabel": "spk_0",
   "start": 58.76,
   "end": 61.92,
   "text": " would you like to see in the future, and things like that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 61.92,
   "end": 64.3,
   "text": " But for today, we want to try something a little bit different."
  },
  {
   "speakerLabel": "spk_0",
   "start": 64.3,
   "end": 69.62,
   "text": " We actually want to try to do a little bit of live coding and actually show what could"
  },
  {
   "speakerLabel": "spk_0",
   "start": 69.62,
   "end": 74.24,
   "text": " be the experience of building a product on AWS."
  },
  {
   "speakerLabel": "spk_0",
   "start": 74.24,
   "end": 80.9,
   "text": " And the product that we have in mind for today is something that looks like a clone of something"
  },
  {
   "speakerLabel": "spk_0",
   "start": 80.9,
   "end": 85.98,
   "text": " like Dropbox Transfer or maybe WeTransfer, where basically the idea is that you need"
  },
  {
   "speakerLabel": "spk_0",
   "start": 85.98,
   "end": 88.80000000000001,
   "text": " to share a file with somebody else."
  },
  {
   "speakerLabel": "spk_0",
   "start": 88.80000000000001,
   "end": 93.02000000000001,
   "text": " Let's find the easiest possible way to do that, or the fastest maybe possible way to"
  },
  {
   "speakerLabel": "spk_0",
   "start": 93.02000000000001,
   "end": 99.24000000000001,
   "text": " do that, which is basically let's upload it somewhere and then have a URL that it's somehow"
  },
  {
   "speakerLabel": "spk_0",
   "start": 99.24000000000001,
   "end": 103.60000000000001,
   "text": " secret and we can take that URL, share it with the person we want to share the file"
  },
  {
   "speakerLabel": "spk_0",
   "start": 103.60000000000001,
   "end": 109.02000000000001,
   "text": " with, and they can use the same URL to download the file that we just uploaded."
  },
  {
   "speakerLabel": "spk_0",
   "start": 109.02,
   "end": 115.19999999999999,
   "text": " So the idea is that basically we are going to build a service like that using AWS services."
  },
  {
   "speakerLabel": "spk_0",
   "start": 115.19999999999999,
   "end": 118.67999999999999,
   "text": " So probably we're going to be using things like S3 to store the files."
  },
  {
   "speakerLabel": "spk_0",
   "start": 118.67999999999999,
   "end": 124.84,
   "text": " We're probably going to be using signed URLs to be able to upload and download things."
  },
  {
   "speakerLabel": "spk_0",
   "start": 124.84,
   "end": 130.32,
   "text": " And we might be using API Gateway because probably we want to turn that into an API"
  },
  {
   "speakerLabel": "spk_0",
   "start": 130.32,
   "end": 133.88,
   "text": " that then we can use from maybe a CLI, maybe a front end."
  },
  {
   "speakerLabel": "spk_0",
   "start": 133.88,
   "end": 139.22,
   "text": " So we have some kind of rough ideas, but it's very important for you to contribute to the"
  },
  {
   "speakerLabel": "spk_0",
   "start": 139.22,
   "end": 144.57999999999998,
   "text": " conversation and suggest maybe different things that we could be doing."
  },
  {
   "speakerLabel": "spk_0",
   "start": 144.57999999999998,
   "end": 149.6,
   "text": " So for today, our goal is to, we're going to be streaming for about one hour, I think,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 149.6,
   "end": 154.96,
   "text": " and our goal is to try to get as far as we possibly can to just to build the first MVP,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 154.96,
   "end": 160.38,
   "text": " where what we expect to do is later to have one Lambda that allows us to upload to S3"
  },
  {
   "speakerLabel": "spk_0",
   "start": 160.38,
   "end": 165.22,
   "text": " and give us back a URL that can be used to download the file."
  },
  {
   "speakerLabel": "spk_0",
   "start": 165.22,
   "end": 171.2,
   "text": " So yeah, anything else you want to add, Eoin?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 171.2,
   "end": 175.64,
   "text": " No, it's really good to be able to get started on this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 175.64,
   "end": 177.35999999999999,
   "text": " And yeah, let's do this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 177.35999999999999,
   "end": 181.32,
   "text": " Let's see how we get on, how far we get today, and then we can start talking about maybe"
  },
  {
   "speakerLabel": "spk_1",
   "start": 181.32,
   "end": 183,
   "text": " where we can take it next."
  },
  {
   "speakerLabel": "spk_1",
   "start": 183,
   "end": 184,
   "text": " Absolutely."
  },
  {
   "speakerLabel": "spk_0",
   "start": 184,
   "end": 186.48,
   "text": " Yeah, that makes sense."
  },
  {
   "speakerLabel": "spk_0",
   "start": 186.48,
   "end": 191.48,
   "text": " So I'm going to start by sharing my screen."
  },
  {
   "speakerLabel": "spk_0",
   "start": 191.48,
   "end": 194.82,
   "text": " Actually first of all, I'm going to mention that we already set up a repository, which"
  },
  {
   "speakerLabel": "spk_0",
   "start": 194.82,
   "end": 204.5,
   "text": " is the one we are going to be using today, and I'm going to be posting it on YouTube."
  },
  {
   "speakerLabel": "spk_0",
   "start": 204.5,
   "end": 214.35999999999999,
   "text": " But if you are following from Twitter or LinkedIn, you can find it at awsbytes slash weshare.click,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 214.36,
   "end": 217.44000000000003,
   "text": " which is the name we selected for this project."
  },
  {
   "speakerLabel": "spk_0",
   "start": 217.44000000000003,
   "end": 225.96,
   "text": " I'm actually going to see if I can show it on screen."
  },
  {
   "speakerLabel": "spk_0",
   "start": 225.96,
   "end": 229.32000000000002,
   "text": " So let me share my screen here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 229.32000000000002,
   "end": 233.32000000000002,
   "text": " Okay, this is the repository."
  },
  {
   "speakerLabel": "spk_0",
   "start": 233.32000000000002,
   "end": 236.4,
   "text": " So this is the URL awsbytes weshare.click."
  },
  {
   "speakerLabel": "spk_0",
   "start": 236.4,
   "end": 238.84,
   "text": " Right now it's pretty much an empty repository."
  },
  {
   "speakerLabel": "spk_0",
   "start": 238.84,
   "end": 242.96,
   "text": " We only have a little bit of readme and an architecture diagram that I'm going to be"
  },
  {
   "speakerLabel": "spk_0",
   "start": 242.96,
   "end": 244.92000000000002,
   "text": " trying to describe."
  },
  {
   "speakerLabel": "spk_0",
   "start": 244.92000000000002,
   "end": 246.24,
   "text": " Cool."
  },
  {
   "speakerLabel": "spk_1",
   "start": 246.24,
   "end": 251.56,
   "text": " Actually, let me show it here, which is a little bit bigger."
  },
  {
   "speakerLabel": "spk_0",
   "start": 251.56,
   "end": 255.60000000000002,
   "text": " So basically the idea is that, as we said, we want to have a quick way for Alice and"
  },
  {
   "speakerLabel": "spk_0",
   "start": 255.60000000000002,
   "end": 260,
   "text": " Bob to share one particular file through the internet."
  },
  {
   "speakerLabel": "spk_0",
   "start": 260,
   "end": 268.64,
   "text": " So the idea is that we can give Alice basically a web server where she can upload the file"
  },
  {
   "speakerLabel": "spk_0",
   "start": 268.64,
   "end": 274.82,
   "text": " and then she will get back a URL that once shared with Bob allows Bob to download that"
  },
  {
   "speakerLabel": "spk_0",
   "start": 274.82,
   "end": 275.82,
   "text": " same file."
  },
  {
   "speakerLabel": "spk_0",
   "start": 275.82,
   "end": 280.18,
   "text": " Now, if we zoom in a little bit more on how we are thinking to implement all of that right"
  },
  {
   "speakerLabel": "spk_0",
   "start": 280.18,
   "end": 286.64,
   "text": " now, at least for version one, is that we have an API gateway that gives Alice a particular"
  },
  {
   "speakerLabel": "spk_0",
   "start": 286.64,
   "end": 288.24,
   "text": " API endpoint."
  },
  {
   "speakerLabel": "spk_0",
   "start": 288.24,
   "end": 295.03999999999996,
   "text": " On this API endpoint, we can do a post and this post basically, what it's going to do"
  },
  {
   "speakerLabel": "spk_0",
   "start": 295.04,
   "end": 301.76000000000005,
   "text": " is going to trigger a Lambda and this Lambda is going to effectively create a pre-signed"
  },
  {
   "speakerLabel": "spk_0",
   "start": 301.76000000000005,
   "end": 306.98,
   "text": " URL on S3 that is going to allow Alice to upload the file itself."
  },
  {
   "speakerLabel": "spk_0",
   "start": 306.98,
   "end": 314.88,
   "text": " So the first step is that basically with this request, Alice gets an S3 upload and then"
  },
  {
   "speakerLabel": "spk_0",
   "start": 314.88,
   "end": 320.88,
   "text": " she can use that S3 upload pre-signed URL to actually put the file into the bucket."
  },
  {
   "speakerLabel": "spk_0",
   "start": 320.88,
   "end": 324.96000000000004,
   "text": " But at the same time with the upload URL, we also generate a download URL that is going"
  },
  {
   "speakerLabel": "spk_0",
   "start": 324.96,
   "end": 328.4,
   "text": " to be ready to be shared as soon as the upload is completed."
  },
  {
   "speakerLabel": "spk_0",
   "start": 328.4,
   "end": 333.68,
   "text": " So the first step is actually giving back two things, the upload URL and the download"
  },
  {
   "speakerLabel": "spk_0",
   "start": 333.68,
   "end": 334.68,
   "text": " URL."
  },
  {
   "speakerLabel": "spk_0",
   "start": 334.68,
   "end": 339.64,
   "text": " So at that point, Alice can upload the file and then just share the download URL with"
  },
  {
   "speakerLabel": "spk_0",
   "start": 339.64,
   "end": 342.4,
   "text": " Bob."
  },
  {
   "speakerLabel": "spk_0",
   "start": 342.4,
   "end": 345.82,
   "text": " I think there might be different ways to implement that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 345.82,
   "end": 349.17999999999995,
   "text": " This is just one way that we came up with and this is the way we think we are going"
  },
  {
   "speakerLabel": "spk_0",
   "start": 349.17999999999995,
   "end": 350.17999999999995,
   "text": " to go for today."
  },
  {
   "speakerLabel": "spk_0",
   "start": 350.18,
   "end": 356.08,
   "text": " So if you have other ideas, definitely let us know and we are open to discuss alternatives"
  },
  {
   "speakerLabel": "spk_0",
   "start": 356.08,
   "end": 359.08,
   "text": " and maybe pros and cons of different alternatives."
  },
  {
   "speakerLabel": "spk_0",
   "start": 359.08,
   "end": 363.12,
   "text": " Yeah, the URLs will not be pretty."
  },
  {
   "speakerLabel": "spk_1",
   "start": 363.12,
   "end": 365.72,
   "text": " Maybe we should pre-warn people, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 365.72,
   "end": 370.22,
   "text": " These URLs will not be very user-friendly, but don't worry, future episodes will take"
  },
  {
   "speakerLabel": "spk_1",
   "start": 370.22,
   "end": 372.24,
   "text": " care of that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 372.24,
   "end": 374.4,
   "text": " Yeah, absolutely."
  },
  {
   "speakerLabel": "spk_0",
   "start": 374.4,
   "end": 378.68,
   "text": " I see we have a comment here in the chat by Abu."
  },
  {
   "speakerLabel": "spk_0",
   "start": 378.68,
   "end": 379.88,
   "text": " Welcome to the stream."
  },
  {
   "speakerLabel": "spk_0",
   "start": 379.88,
   "end": 384,
   "text": " I was just discussing this idea with my colleague as a side project and now I'm seeing this."
  },
  {
   "speakerLabel": "spk_0",
   "start": 384,
   "end": 389.28,
   "text": " Sorry, we are going to spoil the side project, but I mean, if you had different ways of..."
  },
  {
   "speakerLabel": "spk_1",
   "start": 389.28,
   "end": 392.8,
   "text": ""
  },
  {
   "speakerLabel": "spk_0",
   "start": 392.8,
   "end": 394.8,
   "text": " You were thinking about different ways to implement this by any means, chime in and we can chat about that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 394.8,
   "end": 397.68,
   "text": " Yeah, also different features for sure."
  },
  {
   "speakerLabel": "spk_1",
   "start": 397.68,
   "end": 398.68,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 398.68,
   "end": 402.48,
   "text": " I mean, I can imagine like we're going to build this and eventually we have the name"
  },
  {
   "speakerLabel": "spk_1",
   "start": 402.48,
   "end": 403.6,
   "text": " we share.click."
  },
  {
   "speakerLabel": "spk_1",
   "start": 403.6,
   "end": 407.14,
   "text": " So this is the domain name we're going to use for this deployment, but I can imagine"
  },
  {
   "speakerLabel": "spk_1",
   "start": 407.14,
   "end": 412.44,
   "text": " other people would maybe take this and use it as a way to store files for themselves,"
  },
  {
   "speakerLabel": "spk_1",
   "start": 412.44,
   "end": 419.71999999999997,
   "text": " to share files between different devices and have it as their own personal Dropbox using"
  },
  {
   "speakerLabel": "spk_1",
   "start": 419.71999999999997,
   "end": 422.24,
   "text": " their own AWS infrastructure, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 422.24,
   "end": 427.03999999999996,
   "text": " And avoid having to go to Google or Dropbox for their file storage."
  },
  {
   "speakerLabel": "spk_1",
   "start": 427.03999999999996,
   "end": 434.32,
   "text": " So yeah, it's probably an opportunity here for us to all have our own forks and customized"
  },
  {
   "speakerLabel": "spk_1",
   "start": 434.32,
   "end": 436.68,
   "text": " deployments of this application."
  },
  {
   "speakerLabel": "spk_0",
   "start": 436.68,
   "end": 439.92,
   "text": " And I see that there is another comment on YouTube by Italo."
  },
  {
   "speakerLabel": "spk_0",
   "start": 439.92,
   "end": 444.84000000000003,
   "text": " Sorry, I cannot put this one on screen, but it's basically asking, should we try to rebuild"
  },
  {
   "speakerLabel": "spk_0",
   "start": 444.84000000000003,
   "end": 447.44,
   "text": " this thing and then update you on the progress?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 447.44,
   "end": 448.44,
   "text": " Absolutely yes."
  },
  {
   "speakerLabel": "spk_0",
   "start": 448.44,
   "end": 456.28000000000003,
   "text": " Feel free to redo it, copy paste our code, try different things because again, in AWS,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 456.28000000000003,
   "end": 461.16,
   "text": " there are millions of ways to build anything and you can use different services."
  },
  {
   "speakerLabel": "spk_0",
   "start": 461.16,
   "end": 465.96000000000004,
   "text": " So it will be interesting to also see what other people will think about how to solve"
  },
  {
   "speakerLabel": "spk_0",
   "start": 465.96,
   "end": 468.23999999999995,
   "text": " this particular problem."
  },
  {
   "speakerLabel": "spk_0",
   "start": 468.23999999999995,
   "end": 469.96,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 469.96,
   "end": 476.52,
   "text": " So let's maybe start to look at the code and this is a very kind of vanilla repository"
  },
  {
   "speakerLabel": "spk_0",
   "start": 476.52,
   "end": 478.32,
   "text": " that is literally nothing."
  },
  {
   "speakerLabel": "spk_0",
   "start": 478.32,
   "end": 484.08,
   "text": " So maybe we can start by doing a little bit of just creating the kind of the structure"
  },
  {
   "speakerLabel": "spk_0",
   "start": 484.08,
   "end": 485.56,
   "text": " for the project."
  },
  {
   "speakerLabel": "spk_0",
   "start": 485.56,
   "end": 491.96,
   "text": " So we are going to be using Node.js as a kind of runtime of choice or JavaScript."
  },
  {
   "speakerLabel": "spk_0",
   "start": 491.96,
   "end": 498.88,
   "text": " So let's start by doing animate of the project."
  },
  {
   "speakerLabel": "spk_0",
   "start": 498.88,
   "end": 507.41999999999996,
   "text": " So I just run npm init dash y, which is basically just doing like a default package JSON."
  },
  {
   "speakerLabel": "spk_0",
   "start": 507.41999999999996,
   "end": 509.58,
   "text": " And we can see the result here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 509.58,
   "end": 513.92,
   "text": " It's actually taking some stuff from the repository, which is pretty cool."
  },
  {
   "speakerLabel": "spk_0",
   "start": 513.92,
   "end": 517.12,
   "text": " But other than that, not that special."
  },
  {
   "speakerLabel": "spk_0",
   "start": 517.12,
   "end": 523.58,
   "text": " One thing that we want to do is we want to start to organize this as a mono repo because"
  },
  {
   "speakerLabel": "spk_0",
   "start": 523.58,
   "end": 530.46,
   "text": " we eventually want to create an API, the one we just described, but also some ways to interact"
  },
  {
   "speakerLabel": "spk_0",
   "start": 530.46,
   "end": 536.08,
   "text": " with this API, probably a CLI application and maybe also front end."
  },
  {
   "speakerLabel": "spk_0",
   "start": 536.08,
   "end": 540.36,
   "text": " So it might be interesting to put all the same things in the same repository just for"
  },
  {
   "speakerLabel": "spk_0",
   "start": 540.36,
   "end": 546.74,
   "text": " convenience and actually recent versions of npm make that very easy."
  },
  {
   "speakerLabel": "spk_0",
   "start": 546.74,
   "end": 552.04,
   "text": " Because we can just create a new folder and call it backend for instance."
  },
  {
   "speakerLabel": "spk_0",
   "start": 552.04,
   "end": 558.04,
   "text": " And then we can just say that that's a new workspace."
  },
  {
   "speakerLabel": "spk_0",
   "start": 558.04,
   "end": 565.78,
   "text": " And actually this is an array, if I remember correctly, and we just need to say backend"
  },
  {
   "speakerLabel": "spk_0",
   "start": 565.78,
   "end": 570.2,
   "text": " is one item."
  },
  {
   "speakerLabel": "spk_0",
   "start": 570.2,
   "end": 578.24,
   "text": " Now at this point we can go into backend and do another npm init y and this is how we are"
  },
  {
   "speakerLabel": "spk_0",
   "start": 578.24,
   "end": 583.12,
   "text": " creating sub projects inside our mono repo."
  },
  {
   "speakerLabel": "spk_0",
   "start": 583.12,
   "end": 586.36,
   "text": " But also we want to configure a bunch of other things."
  },
  {
   "speakerLabel": "spk_0",
   "start": 586.36,
   "end": 588.4000000000001,
   "text": " For instance, we want to add a license."
  },
  {
   "speakerLabel": "spk_0",
   "start": 588.4000000000001,
   "end": 591.4000000000001,
   "text": " We want to add a gitignore file."
  },
  {
   "speakerLabel": "spk_0",
   "start": 591.4000000000001,
   "end": 593.8000000000001,
   "text": " And there are some tools that I really like."
  },
  {
   "speakerLabel": "spk_0",
   "start": 593.8000000000001,
   "end": 598.6,
   "text": " For instance, I think there is one called gitignore."
  },
  {
   "speakerLabel": "spk_0",
   "start": 598.6,
   "end": 608.0400000000001,
   "text": " Gitignore, which we can say, I think node.js and it should give us a default node.js gitignore."
  },
  {
   "speakerLabel": "spk_0",
   "start": 608.0400000000001,
   "end": 610.76,
   "text": " Let's see if my memory is good."
  },
  {
   "speakerLabel": "spk_0",
   "start": 610.76,
   "end": 612.08,
   "text": " It is not."
  },
  {
   "speakerLabel": "spk_0",
   "start": 612.08,
   "end": 614.4,
   "text": " It gave us an empty one."
  },
  {
   "speakerLabel": "spk_0",
   "start": 614.4,
   "end": 615.4,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 615.4,
   "end": 619.8000000000001,
   "text": " So let's see if we just say gitignore if allows us to select."
  },
  {
   "speakerLabel": "spk_0",
   "start": 619.8000000000001,
   "end": 620.8000000000001,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 620.8000000000001,
   "end": 621.8000000000001,
   "text": " Gitignore types."
  },
  {
   "speakerLabel": "spk_0",
   "start": 621.8000000000001,
   "end": 625.24,
   "text": " Okay, you're going to have to do slash types."
  },
  {
   "speakerLabel": "spk_0",
   "start": 625.24,
   "end": 626.24,
   "text": " And what do we have?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 626.24,
   "end": 627.24,
   "text": " Do we have node?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 627.24,
   "end": 631.44,
   "text": " Node with just one word."
  },
  {
   "speakerLabel": "spk_1",
   "start": 631.44,
   "end": 634.8,
   "text": " Okay, fair enough."
  },
  {
   "speakerLabel": "spk_1",
   "start": 634.8,
   "end": 635.98,
   "text": " Cool."
  },
  {
   "speakerLabel": "spk_0",
   "start": 635.98,
   "end": 642.52,
   "text": " Now we've got something that looks a little bit better with a bunch of default stuff."
  },
  {
   "speakerLabel": "spk_0",
   "start": 642.52,
   "end": 643.52,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 643.52,
   "end": 650,
   "text": " And another thing we can do is npm, I think it's called license and we can select one"
  },
  {
   "speakerLabel": "spk_0",
   "start": 650,
   "end": 651,
   "text": " license."
  },
  {
   "speakerLabel": "spk_0",
   "start": 651,
   "end": 658.16,
   "text": " Or do we want MIT or something else?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 658.16,
   "end": 659.48,
   "text": " Sounds good to me."
  },
  {
   "speakerLabel": "spk_1",
   "start": 659.48,
   "end": 662.48,
   "text": " Okay, let's keep it super free."
  },
  {
   "speakerLabel": "spk_0",
   "start": 662.48,
   "end": 664,
   "text": " I don't have that yet."
  },
  {
   "speakerLabel": "spk_1",
   "start": 664,
   "end": 666,
   "text": " I think that's good."
  },
  {
   "speakerLabel": "spk_0",
   "start": 666,
   "end": 667,
   "text": " And now we have a license."
  },
  {
   "speakerLabel": "spk_0",
   "start": 667,
   "end": 668,
   "text": " I don't know about other tools."
  },
  {
   "speakerLabel": "spk_1",
   "start": 668,
   "end": 669,
   "text": " I like it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 669,
   "end": 670,
   "text": " Cool."
  },
  {
   "speakerLabel": "spk_0",
   "start": 670,
   "end": 676.16,
   "text": " So the next thing that we might want to do is ESLint, I guess."
  },
  {
   "speakerLabel": "spk_0",
   "start": 676.16,
   "end": 678.44,
   "text": " Oh, yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 678.44,
   "end": 680.84,
   "text": " So we're going to write all this stuff in JavaScript."
  },
  {
   "speakerLabel": "spk_1",
   "start": 680.84,
   "end": 684.5600000000001,
   "text": " That's the plan, right Luciano?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 684.5600000000001,
   "end": 685.5600000000001,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 685.5600000000001,
   "end": 686.5600000000001,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 686.5600000000001,
   "end": 690.08,
   "text": " It's okay to proceed."
  },
  {
   "speakerLabel": "spk_0",
   "start": 690.08,
   "end": 695,
   "text": " Now our mileage might vary because they keep changing this command."
  },
  {
   "speakerLabel": "spk_0",
   "start": 695,
   "end": 697.0400000000001,
   "text": " It's really updated very often."
  },
  {
   "speakerLabel": "spk_0",
   "start": 697.0400000000001,
   "end": 703.48,
   "text": " But it's kind of a guided procedure to pick kind of a default or a starting configuration"
  },
  {
   "speakerLabel": "spk_0",
   "start": 703.48,
   "end": 704.48,
   "text": " for ESLint."
  },
  {
   "speakerLabel": "spk_0",
   "start": 704.48,
   "end": 708.2800000000001,
   "text": " And it's very convenient because of course we don't need to remember by heart all the"
  },
  {
   "speakerLabel": "spk_0",
   "start": 708.28,
   "end": 711.92,
   "text": " different options or presets and things like that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 711.92,
   "end": 715.9599999999999,
   "text": " So we want to check syntax, find problems and enforce code style."
  },
  {
   "speakerLabel": "spk_0",
   "start": 715.9599999999999,
   "end": 719.24,
   "text": " We want to use JavaScript modules or CommonJS."
  },
  {
   "speakerLabel": "spk_0",
   "start": 719.24,
   "end": 721.88,
   "text": " I don't remember if we decided on that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 721.88,
   "end": 722.88,
   "text": " We're using..."
  },
  {
   "speakerLabel": "spk_1",
   "start": 722.88,
   "end": 728.88,
   "text": " Yeah, I think when we're trying to prepare for this, we were using ESM modules."
  },
  {
   "speakerLabel": "spk_1",
   "start": 728.88,
   "end": 729.88,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 729.88,
   "end": 730.88,
   "text": " So should be..."
  },
  {
   "speakerLabel": "spk_0",
   "start": 730.88,
   "end": 732.28,
   "text": " Let's give it a go."
  },
  {
   "speakerLabel": "spk_1",
   "start": 732.28,
   "end": 733.28,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 733.28,
   "end": 737.78,
   "text": " Let's try to be very brave and go with ESM."
  },
  {
   "speakerLabel": "spk_1",
   "start": 737.78,
   "end": 743.6,
   "text": " There are some interesting corner cases and edge cases you encounter with them, but maybe"
  },
  {
   "speakerLabel": "spk_1",
   "start": 743.6,
   "end": 746.36,
   "text": " that'll be part of the fun."
  },
  {
   "speakerLabel": "spk_0",
   "start": 746.36,
   "end": 752.4,
   "text": " We have also a question by Mauro on YouTube saying, isn't PMPM usually used for Monorepo?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 752.4,
   "end": 754.36,
   "text": " Honestly, I don't know."
  },
  {
   "speakerLabel": "spk_0",
   "start": 754.36,
   "end": 760.76,
   "text": " I know that PMPM is just a faster version of MPM because it does things more in parallel,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 760.76,
   "end": 762.26,
   "text": " but I never use it."
  },
  {
   "speakerLabel": "spk_0",
   "start": 762.26,
   "end": 764.4399999999999,
   "text": " So don't know."
  },
  {
   "speakerLabel": "spk_0",
   "start": 764.44,
   "end": 769.5200000000001,
   "text": " Feel free to try it and let us know if you find any meaningful difference in terms of"
  },
  {
   "speakerLabel": "spk_0",
   "start": 769.5200000000001,
   "end": 772,
   "text": " how to manage the Monorepos as well."
  },
  {
   "speakerLabel": "spk_0",
   "start": 772,
   "end": 773,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 773,
   "end": 774,
   "text": " So..."
  },
  {
   "speakerLabel": "spk_0",
   "start": 774,
   "end": 779.36,
   "text": " I'm still trying to figure out how MPM workspaces works, especially for service projects."
  },
  {
   "speakerLabel": "spk_1",
   "start": 779.36,
   "end": 783,
   "text": " And maybe this is something we can deal with when we start adding third party dependencies"
  },
  {
   "speakerLabel": "spk_1",
   "start": 783,
   "end": 787.2,
   "text": " into different services in the repo and figure out how to package them."
  },
  {
   "speakerLabel": "spk_1",
   "start": 787.2,
   "end": 788.2,
   "text": " Yeah, exactly."
  },
  {
   "speakerLabel": "spk_0",
   "start": 788.2,
   "end": 791.12,
   "text": " I also use it for very simple cases."
  },
  {
   "speakerLabel": "spk_0",
   "start": 791.12,
   "end": 796.12,
   "text": " So there might be edge cases that we haven't discovered yet, but the gist of it should"
  },
  {
   "speakerLabel": "spk_0",
   "start": 796.12,
   "end": 801.24,
   "text": " be that if you're an MPM installer at the top level of the project, it should go inside"
  },
  {
   "speakerLabel": "spk_0",
   "start": 801.24,
   "end": 804.84,
   "text": " every workspace and install all the necessary dependencies."
  },
  {
   "speakerLabel": "spk_0",
   "start": 804.84,
   "end": 809.52,
   "text": " So it's convenient that way that you can just do MPM installer at the top level."
  },
  {
   "speakerLabel": "spk_0",
   "start": 809.52,
   "end": 815.16,
   "text": " And then it should also give you a way to import from packages in the same Monorepo."
  },
  {
   "speakerLabel": "spk_0",
   "start": 815.16,
   "end": 819.84,
   "text": " So for instance, we could have a utils package and we could be reusing that utils package"
  },
  {
   "speakerLabel": "spk_0",
   "start": 819.84,
   "end": 824.72,
   "text": " in frontend, CLI, backend, and things like that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 824.72,
   "end": 830.32,
   "text": " So it gives you a way to do this kind of cross import and your code is automatically linked."
  },
  {
   "speakerLabel": "spk_0",
   "start": 830.32,
   "end": 834.64,
   "text": " So if you do changes, you don't need to publish those changes at independent libraries to"
  },
  {
   "speakerLabel": "spk_0",
   "start": 834.64,
   "end": 838.08,
   "text": " actually use the changes in the rest of the code."
  },
  {
   "speakerLabel": "spk_0",
   "start": 838.08,
   "end": 843,
   "text": " And then you have other advantages, like you can run a command in all workspaces."
  },
  {
   "speakerLabel": "spk_0",
   "start": 843,
   "end": 848.96,
   "text": " For instance, if we do tests, you could be running MPM tests in all workspaces and stuff"
  },
  {
   "speakerLabel": "spk_0",
   "start": 848.96,
   "end": 849.96,
   "text": " like that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 849.96,
   "end": 851.52,
   "text": " So it's very, very simple implementation."
  },
  {
   "speakerLabel": "spk_0",
   "start": 851.52,
   "end": 857,
   "text": " I think for instance, if you are used to using learner, learner has a lot more features,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 857,
   "end": 862.2800000000001,
   "text": " but at the same time, I don't think we need anything fancy right now."
  },
  {
   "speakerLabel": "spk_0",
   "start": 862.2800000000001,
   "end": 863.84,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 863.84,
   "end": 865.9200000000001,
   "text": " Do we want to use TypeScript or not?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 865.9200000000001,
   "end": 868.1600000000001,
   "text": " I'd say probably no."
  },
  {
   "speakerLabel": "spk_0",
   "start": 868.1600000000001,
   "end": 875.48,
   "text": " So I'm going to go with no, but we might revisit that decision at some point later."
  },
  {
   "speakerLabel": "spk_0",
   "start": 875.48,
   "end": 880.08,
   "text": " And do we want to run our code for now just not VS."
  },
  {
   "speakerLabel": "spk_0",
   "start": 880.08,
   "end": 881.08,
   "text": " Popular style guide."
  },
  {
   "speakerLabel": "spk_0",
   "start": 881.08,
   "end": 887.36,
   "text": " Now, do we want semicolons or not?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 887.36,
   "end": 891.8000000000001,
   "text": " I'll go with, I just defer to the popular opinion here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 891.8000000000001,
   "end": 893.8000000000001,
   "text": " So I'm easy."
  },
  {
   "speakerLabel": "spk_1",
   "start": 893.8000000000001,
   "end": 898.84,
   "text": " I always adapt because otherwise it ends up in a big bike sharing discussion."
  },
  {
   "speakerLabel": "spk_1",
   "start": 898.84,
   "end": 899.84,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 899.84,
   "end": 901.48,
   "text": " Let's see if anyone."
  },
  {
   "speakerLabel": "spk_0",
   "start": 901.48,
   "end": 902.6800000000001,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 902.6800000000001,
   "end": 905.24,
   "text": " Is it possible to zoom VS code a little bit?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 905.24,
   "end": 906.8,
   "text": " It should be possible."
  },
  {
   "speakerLabel": "spk_0",
   "start": 906.8,
   "end": 910.32,
   "text": " Let me know if this is better."
  },
  {
   "speakerLabel": "spk_0",
   "start": 910.32,
   "end": 911.32,
   "text": " So okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 911.32,
   "end": 914.94,
   "text": " I'm going to go with standard just because it's not really a standard, but I like to"
  },
  {
   "speakerLabel": "spk_0",
   "start": 914.94,
   "end": 916.92,
   "text": " present it is a standard."
  },
  {
   "speakerLabel": "spk_0",
   "start": 916.92,
   "end": 917.92,
   "text": " Sounds good."
  },
  {
   "speakerLabel": "spk_1",
   "start": 917.92,
   "end": 921.6800000000001,
   "text": " Configuration in JavaScript and now yes."
  },
  {
   "speakerLabel": "spk_0",
   "start": 921.6800000000001,
   "end": 922.6800000000001,
   "text": " MPM."
  },
  {
   "speakerLabel": "spk_0",
   "start": 922.6800000000001,
   "end": 923.6800000000001,
   "text": " Oh, nice."
  },
  {
   "speakerLabel": "spk_0",
   "start": 923.6800000000001,
   "end": 924.6800000000001,
   "text": " Now you can pick."
  },
  {
   "speakerLabel": "spk_0",
   "start": 924.6800000000001,
   "end": 925.6800000000001,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 925.6800000000001,
   "end": 926.6800000000001,
   "text": " Interesting."
  },
  {
   "speakerLabel": "spk_0",
   "start": 926.6800000000001,
   "end": 930.84,
   "text": " This is a new option I haven't seen before, but now you can pick your favorite package"
  },
  {
   "speakerLabel": "spk_0",
   "start": 930.84,
   "end": 931.84,
   "text": " manager."
  },
  {
   "speakerLabel": "spk_0",
   "start": 931.84,
   "end": 933.26,
   "text": " We are using MPM."
  },
  {
   "speakerLabel": "spk_0",
   "start": 933.26,
   "end": 935.52,
   "text": " So let's stick with it."
  },
  {
   "speakerLabel": "spk_0",
   "start": 935.52,
   "end": 936.76,
   "text": " Perfect."
  },
  {
   "speakerLabel": "spk_0",
   "start": 936.76,
   "end": 945.52,
   "text": " And this should have created a default ESLint configuration for us."
  },
  {
   "speakerLabel": "spk_0",
   "start": 945.52,
   "end": 950.08,
   "text": " Now another thing that we should have been doing is type modules."
  },
  {
   "speakerLabel": "spk_0",
   "start": 950.08,
   "end": 951.92,
   "text": " Good one."
  },
  {
   "speakerLabel": "spk_0",
   "start": 951.92,
   "end": 952.92,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 952.92,
   "end": 962.88,
   "text": " Because this one allows us to use ESM everywhere without having to call the files CJS or MJS."
  },
  {
   "speakerLabel": "spk_0",
   "start": 962.88,
   "end": 970.32,
   "text": " So every JS file will automatically default to ECMAScript modules, which means that we'll"
  },
  {
   "speakerLabel": "spk_0",
   "start": 970.32,
   "end": 972.76,
   "text": " need to rename this one CJS."
  },
  {
   "speakerLabel": "spk_0",
   "start": 972.76,
   "end": 979,
   "text": " Cause this is like a special case where it needs to use module.export."
  },
  {
   "speakerLabel": "spk_0",
   "start": 979,
   "end": 980.72,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 980.72,
   "end": 989.12,
   "text": " So do we want to do anything else in terms of bootstrap in the project?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 989.12,
   "end": 990.12,
   "text": " Let's see."
  },
  {
   "speakerLabel": "spk_1",
   "start": 990.12,
   "end": 991.92,
   "text": " I think from a JavaScript point of view, that's okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 991.92,
   "end": 997.76,
   "text": " Next we're onto the more AWS and serverless specific."
  },
  {
   "speakerLabel": "spk_0",
   "start": 997.76,
   "end": 1000.9599999999999,
   "text": " So I'm going to do a commit with what we have so far."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1000.9599999999999,
   "end": 1001.9599999999999,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1001.9599999999999,
   "end": 1003.24,
   "text": " That sounds good."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1003.24,
   "end": 1013.12,
   "text": " So we have created a new ESLint, gitignore, license, backend, package log and packages."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1013.12,
   "end": 1018.7199999999999,
   "text": " Perfect."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1018.72,
   "end": 1022.64,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1022.64,
   "end": 1026.84,
   "text": " Now you should be able to see these changes in the repository."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1026.84,
   "end": 1028.92,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1028.92,
   "end": 1033.84,
   "text": " So I suppose the next step is based on what we saw here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1033.84,
   "end": 1039.72,
   "text": " We need to have a way to create all this infrastructure and to start to write the code for our Lambda."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1039.72,
   "end": 1045.9,
   "text": " And this is also another topic where there are lots of different options, but I suppose"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1045.9,
   "end": 1050.68,
   "text": " one of the most famous ones is the serverless framework."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1050.68,
   "end": 1054.1200000000001,
   "text": " So let's actually show it here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1054.1200000000001,
   "end": 1059.0600000000002,
   "text": " Serverless framework, serverless.com."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1059.0600000000002,
   "end": 1064.94,
   "text": " So this is basically a way to, it's a framework that you can install and use it in your project,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1064.94,
   "end": 1070.8400000000001,
   "text": " but allows you to define all the infrastructure in a YAML file, and then allows you to deploy"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1070.8400000000001,
   "end": 1073.0800000000002,
   "text": " that infrastructure together with your code."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1073.08,
   "end": 1077.52,
   "text": " And every time you do changes, behind the scenes, it's actually using cloud formation,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1077.52,
   "end": 1083.36,
   "text": " so you can actually deploy changes incrementally and you don't have to worry too much about"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1083.36,
   "end": 1085.76,
   "text": " how do I replicate these changes in different environments."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1085.76,
   "end": 1089.9199999999998,
   "text": " You just do deploy and it's just gonna make sure that your infrastructure converges to"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1089.9199999999998,
   "end": 1095.8,
   "text": " the final state that you currently have in your code base."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1095.8,
   "end": 1101,
   "text": " I don't know if I'm describing that well enough, but yeah, we're going to see it in action."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1101,
   "end": 1106.8,
   "text": " YAML will tell a thousand words when we get going with our serverless.yaml."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1106.8,
   "end": 1108.4,
   "text": " All will become clear."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1108.4,
   "end": 1109.4,
   "text": " Certainly."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1109.4,
   "end": 1112.36,
   "text": " If I remember correctly."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1112.36,
   "end": 1119.56,
   "text": " Oh yeah, we also have DRAM, no semicolons please."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1119.56,
   "end": 1122.08,
   "text": " So I'm glad we picked that option."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1122.08,
   "end": 1125.16,
   "text": " That is the bullet there."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1125.16,
   "end": 1129.98,
   "text": " Okay, so we can bootstrap our serverless project with the generator."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1129.98,
   "end": 1131.44,
   "text": " That's our first step, is that it?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1131.44,
   "end": 1133.92,
   "text": " Yeah, remind me the command because I'm not sure I remember."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1133.92,
   "end": 1136,
   "text": " I think there is an NPX-SLS."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1136,
   "end": 1143.48,
   "text": " It seems to be, yeah, NPX-SLS or NPX serverless, and then the command is create."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1143.48,
   "end": 1147.44,
   "text": " And then we want to do, we want to pick a template."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1147.44,
   "end": 1154.88,
   "text": " So it's, yeah, dash dash template, or I think you can also use single dash T and AWS dash"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1154.88,
   "end": 1155.88,
   "text": " Node.js."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1155.88,
   "end": 1158.1200000000001,
   "text": " Like this, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1158.12,
   "end": 1160.9599999999998,
   "text": " Yeah, and you're within the root."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1160.9599999999998,
   "end": 1161.9599999999998,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1161.9599999999998,
   "end": 1162.9599999999998,
   "text": " Oh yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1162.9599999999998,
   "end": 1165.76,
   "text": " Actually you want to be in the backend directory, I think for this."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1165.76,
   "end": 1167.4799999999998,
   "text": " So let's copy all of this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1167.4799999999998,
   "end": 1171.8,
   "text": " Although you can pass a directory, but I don't know what the path is off the top of my head."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1171.8,
   "end": 1175.4399999999998,
   "text": " Let's do the same thing."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1175.4399999999998,
   "end": 1177.04,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1177.04,
   "end": 1178.1599999999999,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1178.1599999999999,
   "end": 1183.2399999999998,
   "text": " Now you've got a serverless.yaml that is much bigger than you need."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1183.2399999999998,
   "end": 1185.56,
   "text": " So you can start trimming."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1185.56,
   "end": 1188.24,
   "text": " Let's look what we have here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1188.24,
   "end": 1189.24,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1189.24,
   "end": 1194.2,
   "text": " We get a bunch of comments that we're going to remove just to keep things minimal."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1194.2,
   "end": 1197.1599999999999,
   "text": " So the service is being called backend."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1197.1599999999999,
   "end": 1199.28,
   "text": " It's just taking the name of the folder."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1199.28,
   "end": 1201.72,
   "text": " We could rename that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1201.72,
   "end": 1205.12,
   "text": " Probably let's call it WeShare."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1205.12,
   "end": 1218.2399999999998,
   "text": " Click, or WeShare or WC, WC sounds a bit funny."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1218.2399999999998,
   "end": 1223.04,
   "text": " Then this is basically saying that we use the version of serverless framework, number"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1223.04,
   "end": 1224.04,
   "text": " three, version three."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1224.04,
   "end": 1229.08,
   "text": " There are different versions and the yaml that you write can change a little bit depending"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1229.08,
   "end": 1230.82,
   "text": " on which version to use."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1230.82,
   "end": 1232.7399999999998,
   "text": " So we want to use the latest."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1232.74,
   "end": 1235.92,
   "text": " Now here is using by default node 12."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1235.92,
   "end": 1239.68,
   "text": " We want to use node 16."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1239.68,
   "end": 1245.56,
   "text": " Do we need to specify the region here or is it going to infer it by what we have?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1245.56,
   "end": 1250.1200000000001,
   "text": " Oh, we lost Eoin."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1250.1200000000001,
   "end": 1254.84,
   "text": " I think I'm going to specify the region here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1254.84,
   "end": 1257.1200000000001,
   "text": " We lost Eoin for a second."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1257.1200000000001,
   "end": 1259.1200000000001,
   "text": " Eoin is back."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1259.1200000000001,
   "end": 1261.16,
   "text": " I'm back."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1261.16,
   "end": 1265.22,
   "text": " I back buttoned on the browser."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1265.22,
   "end": 1266.8000000000002,
   "text": " You ejected yourself."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1266.8000000000002,
   "end": 1272.24,
   "text": " Do you remember if this one is mandatory or not?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1272.24,
   "end": 1273.24,
   "text": " That's a good question."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1273.24,
   "end": 1279.16,
   "text": " I always specify it because I want to be explicit."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1279.16,
   "end": 1281.1200000000001,
   "text": " I'm guessing it is, but I don't know."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1281.1200000000001,
   "end": 1283.8400000000001,
   "text": " Maybe somebody knows the answer to that and they can tell us."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1283.8400000000001,
   "end": 1289.48,
   "text": " I think it's maybe a good default because if different people are contributing to this"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1289.48,
   "end": 1295.52,
   "text": " project and they might have different default regions, probably this is going to be making"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1295.52,
   "end": 1299.88,
   "text": " sure that everyone uses the same region at the end of the day, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1299.88,
   "end": 1300.88,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1300.88,
   "end": 1304.88,
   "text": " And you might make this configurable, but I think it's good to be clear in that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1304.88,
   "end": 1305.88,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1305.88,
   "end": 1308.72,
   "text": " Now here we have an example about how to add permissions."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1308.72,
   "end": 1315.32,
   "text": " I'm going to ignore all of this because we are going to be using probably a plugin that"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1315.32,
   "end": 1317.92,
   "text": " allows us to do this in a slightly different way."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1317.92,
   "end": 1321.16,
   "text": " Yeah, let's get rid of that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1321.16,
   "end": 1326.2,
   "text": " So actually I'm going to delete all of this."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1326.2,
   "end": 1331.24,
   "text": " Then we can also define environment variables, which we don't need right now."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1331.24,
   "end": 1337.5600000000002,
   "text": " And we can define which files needs to be included or excluded."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1337.5600000000002,
   "end": 1339.8400000000001,
   "text": " I don't think we need to do any of that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1339.8400000000001,
   "end": 1340.8400000000001,
   "text": " Right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1340.8400000000001,
   "end": 1341.8400000000001,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1341.8400000000001,
   "end": 1343.8400000000001,
   "text": " We don't need that right now."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1343.84,
   "end": 1350.08,
   "text": " If we really want to trim things down later, we can, but generally it's not needed."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1350.08,
   "end": 1352.36,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1352.36,
   "end": 1356.36,
   "text": " So now this is the interesting part."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1356.36,
   "end": 1357.36,
   "text": " This is very generic."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1357.36,
   "end": 1359.1599999999999,
   "text": " Like what's the name of the service?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1359.1599999999999,
   "end": 1360.58,
   "text": " What's the framework?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1360.58,
   "end": 1361.58,
   "text": " What is the provider?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1361.58,
   "end": 1365.9199999999998,
   "text": " This is actually interesting because serverless framework can work not just with AWS, but"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1365.9199999999998,
   "end": 1371.1999999999998,
   "text": " also with other providers like Azure or Google cloud, I believe."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1371.2,
   "end": 1376.5800000000002,
   "text": " So here we are basically configuring more kind of generic project level settings."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1376.5800000000002,
   "end": 1379.42,
   "text": " We want to say, we want to use AWS as a provider."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1379.42,
   "end": 1385.32,
   "text": " We want to specifically use Node.js for everything that is like compute, like Lambda functions"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1385.32,
   "end": 1388.0800000000002,
   "text": " and the region is this one."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1388.0800000000002,
   "end": 1391,
   "text": " And this is where we start to specify Lambda functions."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1391,
   "end": 1399.52,
   "text": " And by default, there is like an L-law function and we can see that this also created an handler.js."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1399.52,
   "end": 1404.56,
   "text": " So this is basically saying we want to have a function called a law where the code lives"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1404.56,
   "end": 1408,
   "text": " inside handler, which is handler.js."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1408,
   "end": 1415.48,
   "text": " So this is, we need to change this because by default is using common JS, but you can"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1415.48,
   "end": 1420.98,
   "text": " have kind of a starting point for your Lambda function."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1420.98,
   "end": 1422.4,
   "text": " And I think that's all."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1422.4,
   "end": 1425.36,
   "text": " Then here we have a bunch of other examples."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1425.36,
   "end": 1430.4399999999998,
   "text": " We have outputs and other resources."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1430.4399999999998,
   "end": 1437.36,
   "text": " Do we want to create, do we want to start from the function or do you think it's best"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1437.36,
   "end": 1442.32,
   "text": " to do something else before?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1442.32,
   "end": 1448.1399999999999,
   "text": " How about starting with the bucket since this is the center of our architecture?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1448.1399999999999,
   "end": 1449.1399999999999,
   "text": " That's a good point."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1449.1399999999999,
   "end": 1450.1399999999999,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1450.1399999999999,
   "end": 1451.1399999999999,
   "text": " So let's do that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1451.14,
   "end": 1455.5200000000002,
   "text": " Maybe we can even deploy the bucket and then start writing the function."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1455.5200000000002,
   "end": 1457.16,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1457.16,
   "end": 1462.96,
   "text": " We can probably leave the L-law function there and deploy just to show how a function is"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1462.96,
   "end": 1463.96,
   "text": " created."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1463.96,
   "end": 1467.8400000000001,
   "text": " So resources is basically a more generic thing, which is actually behind the scenes is going"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1467.8400000000001,
   "end": 1469.42,
   "text": " to use CloudFormation."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1469.42,
   "end": 1476.48,
   "text": " So here we actually going to be using mostly CloudFormation syntax while functions is kind"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1476.48,
   "end": 1479.88,
   "text": " of a higher level idea."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1479.88,
   "end": 1483.6000000000001,
   "text": " It kind of makes it a little bit easier to create CloudFormation resources."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1483.6000000000001,
   "end": 1485.3000000000002,
   "text": " It's way less verbose."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1485.3000000000002,
   "end": 1488.0200000000002,
   "text": " It's going to take a bunch of defaults for you."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1488.0200000000002,
   "end": 1491.0200000000002,
   "text": " But I think the first time you see this, it might be a little bit confusing because at"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1491.0200000000002,
   "end": 1496.5400000000002,
   "text": " the end of the day, they are both creating a bunch of CloudFormation resources."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1496.5400000000002,
   "end": 1502.64,
   "text": " So you could be doing everything even without writing this and just writing pure CloudFormation"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1502.64,
   "end": 1503.64,
   "text": " here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1503.64,
   "end": 1508.0800000000002,
   "text": " But of course, at that point you are kind of losing the benefits of using serverless"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1508.0800000000002,
   "end": 1509.2,
   "text": " framework."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1509.2,
   "end": 1515.92,
   "text": " So we are going to be using functions for everything that regards AWS Lambda functions."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1515.92,
   "end": 1518.8,
   "text": " And this is going to make our life much easier to do that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1518.8,
   "end": 1524.3600000000001,
   "text": " But then for things like buckets, we are going to be using resources because I'm not aware"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1524.3600000000001,
   "end": 1527.32,
   "text": " if there is an easier way to do that in serverless framework."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1527.32,
   "end": 1528.32,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1528.32,
   "end": 1533.8400000000001,
   "text": " I mean, when you create a bucket, you have one resource that creates a bucket."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1533.8400000000001,
   "end": 1538.32,
   "text": " When you create a function with the serverless framework, you have a function which might"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1538.32,
   "end": 1542.28,
   "text": " have a configured version as well."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1542.28,
   "end": 1546.06,
   "text": " And then if you have an event trigger, you might have a lot of API gateway resources"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1546.06,
   "end": 1547.06,
   "text": " as well."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1547.06,
   "end": 1553.26,
   "text": " So sometimes like five lines of YAML in serverless framework will actually generate 200 lines"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1553.26,
   "end": 1557.6799999999998,
   "text": " of CloudFormation with 15 or 20 different resources."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1557.6799999999998,
   "end": 1559.82,
   "text": " And maybe we can do that later on."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1559.82,
   "end": 1566.52,
   "text": " You can run the serverless package command and we can see the generated output of CloudFormation."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1566.52,
   "end": 1569.32,
   "text": " We can appreciate that we don't have to write it."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1569.32,
   "end": 1570.32,
   "text": " That's a good idea."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1570.32,
   "end": 1571.44,
   "text": " Let's do the bucket first."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1571.44,
   "end": 1577.1,
   "text": " So the idea is that this is the syntax where we can start to specify resources."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1577.1,
   "end": 1581.76,
   "text": " So you can see that YAML is very nested."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1581.76,
   "end": 1586.92,
   "text": " And for every year, it's basically an array of different resources."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1586.92,
   "end": 1592.8799999999999,
   "text": " And it's actually a key value pair where every item has a name."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1592.88,
   "end": 1597.8000000000002,
   "text": " For instance, here we want to give it a name, I don't know, file bucket."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1597.8000000000002,
   "end": 1600.6000000000001,
   "text": " And then here we specify all the properties."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1600.6000000000001,
   "end": 1603.96,
   "text": " And the properties are generally a type."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1603.96,
   "end": 1608.2800000000002,
   "text": " And in this case, the type is, if I remember correctly, something like this."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1608.2800000000002,
   "end": 1611.5400000000002,
   "text": " Yeah, auto complete is helping me."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1611.5400000000002,
   "end": 1614.2,
   "text": " And then you generally have properties."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1614.2,
   "end": 1617.96,
   "text": " And properties, they will be different depending on the type that you are using."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1617.96,
   "end": 1622.3400000000001,
   "text": " In this case, they are properties that make sense in the context of an S3 bucket."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1622.34,
   "end": 1625.52,
   "text": " So definitely we're going to have something like bucket name."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1625.52,
   "end": 1632.52,
   "text": " And here, this is interesting because we can call it some random name for now."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1632.52,
   "end": 1634.56,
   "text": " But in reality, we really want to make it random."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1634.56,
   "end": 1638.72,
   "text": " So we will see how to do that in a second."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1638.72,
   "end": 1643.6399999999999,
   "text": " And then there are some kind of best practices that we can use."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1643.6399999999999,
   "end": 1649.6,
   "text": " For instance, generally when you do a bucket, you want to make sure that it is encrypted."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1649.6,
   "end": 1656.8,
   "text": " So what we can do is do something like bucket encryption."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1656.8,
   "end": 1657.8,
   "text": " Specify..."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1657.8,
   "end": 1658.8,
   "text": " Oh, I like that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1658.8,
   "end": 1661.1999999999998,
   "text": " The auto compute is doing all of this for me."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1661.1999999999998,
   "end": 1666.08,
   "text": " But we can say something like server side encryption by default."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1666.08,
   "end": 1668.28,
   "text": " Yeah, that's what I wanted to do."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1668.28,
   "end": 1671.8799999999999,
   "text": " And here, AES2056."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1671.8799999999999,
   "end": 1674.6,
   "text": " Now if you search online, you are going to find the stuff."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1674.6,
   "end": 1677.6599999999999,
   "text": " This is something that we looked up before."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1677.66,
   "end": 1680.76,
   "text": " You don't need to remember by art all these things."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1680.76,
   "end": 1685.6000000000001,
   "text": " But the idea is basically every file that is going to be in this bucket, it's automatically"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1685.6000000000001,
   "end": 1687.48,
   "text": " encrypted server side."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1687.48,
   "end": 1691.2,
   "text": " And it's going to be using this particular algorithm."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1691.2,
   "end": 1696.16,
   "text": " So it's not using KMS keys, which is the other option."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1696.16,
   "end": 1699.26,
   "text": " So AWS is kind of managing all the keys for you."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1699.26,
   "end": 1701.5600000000002,
   "text": " You don't need to worry too much about keys."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1701.5600000000002,
   "end": 1707.3600000000001,
   "text": " If you want more control, you can use your own keys through KMS."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1707.36,
   "end": 1711.1999999999998,
   "text": " And another thing is that we want to limit public access."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1711.1999999999998,
   "end": 1714.4399999999998,
   "text": " So we can do this one."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1714.4399999999998,
   "end": 1718.9199999999998,
   "text": " And then there are a bunch of properties that I'm actually checking in another tab."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1718.9199999999998,
   "end": 1722.8,
   "text": " So I'm not going to pretend I remember them by art."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1722.8,
   "end": 1728.4799999999998,
   "text": " But basically we want to block public ACL, which means if somebody is trying to make"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1728.4799999999998,
   "end": 1734.08,
   "text": " this bucket public by mistake or whatever reason, this configuration is going to prevent"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1734.08,
   "end": 1735.08,
   "text": " that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1735.08,
   "end": 1736.08,
   "text": " Right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1736.08,
   "end": 1737.08,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1737.08,
   "end": 1738.08,
   "text": " I remember."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1738.08,
   "end": 1739.96,
   "text": " I always copy paste this too."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1739.96,
   "end": 1742.1999999999998,
   "text": " There are four properties, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1742.1999999999998,
   "end": 1744.32,
   "text": " And then this is very similar."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1744.32,
   "end": 1745.76,
   "text": " Ignore public ACL."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1745.76,
   "end": 1746.76,
   "text": " True."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1746.76,
   "end": 1755.96,
   "text": " Like this is trying to prevent all the possible ways that this bucket could be made public."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1755.96,
   "end": 1758.72,
   "text": " Do we need anything else?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1758.72,
   "end": 1761.3999999999999,
   "text": " So I think these are the best."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1761.3999999999999,
   "end": 1762.8799999999999,
   "text": " These are the good security practices."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1762.88,
   "end": 1767.2,
   "text": " You know, we've got a config rules that warn us when we create buckets that don't have"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1767.2,
   "end": 1771.6000000000001,
   "text": " encryption turned on and that are public, that can be made public."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1771.6000000000001,
   "end": 1775.5200000000002,
   "text": " The other thing that I have recently started adding into all bucket declarations is to"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1775.5200000000002,
   "end": 1780.5600000000002,
   "text": " turn on event bridge notifications, which is a relatively new feature."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1780.5600000000002,
   "end": 1786.66,
   "text": " But it makes sense because that means you can start reacting to objects being added"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1786.66,
   "end": 1789.6000000000001,
   "text": " or removed from the bucket using event bridge."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1789.6,
   "end": 1795.24,
   "text": " So you don't have to use some of the older methods like CloudTrail or S3 notifications,"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1795.24,
   "end": 1797.28,
   "text": " which were a lot more limited."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1797.28,
   "end": 1801.9199999999998,
   "text": " So it's definitely a good idea, I think, to add in event bridge notification."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1801.9199999999998,
   "end": 1807.28,
   "text": " So if you create a bucket in the AWS console, there's a checkbox for this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1807.28,
   "end": 1812.8799999999999,
   "text": " In CloudFormation, it's under the notification configuration property."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1812.8799999999999,
   "end": 1814.8799999999999,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1814.88,
   "end": 1820.2800000000002,
   "text": " And I think we have an example for that if we just want to add it there."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1820.2800000000002,
   "end": 1821.2800000000002,
   "text": " Yep."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1821.2800000000002,
   "end": 1823.5600000000002,
   "text": " I'm just going to copy paste."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1823.5600000000002,
   "end": 1825.1200000000001,
   "text": " Should be something like this."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1825.1200000000001,
   "end": 1830.5200000000002,
   "text": " For some reason, Visual Studio got better like this property, but I think it's connect."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1830.5200000000002,
   "end": 1833.24,
   "text": " Because it's new, maybe."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1833.24,
   "end": 1834.24,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1834.24,
   "end": 1837.0800000000002,
   "text": " I've seen that Andrea has a questionnaire."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1837.0800000000002,
   "end": 1838.8000000000002,
   "text": " So he's asking the only..."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1838.8000000000002,
   "end": 1840.3400000000001,
   "text": " It's more of a comment, I guess."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1840.3400000000001,
   "end": 1844.16,
   "text": " The only issue I found by putting S3 buckets in the serverless configuration is that when"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1844.16,
   "end": 1849.0600000000002,
   "text": " I needed to remove the stack for any reason, I redeployed all the objects and the bucket"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1849.0600000000002,
   "end": 1850.0600000000002,
   "text": " were deleted."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1850.0600000000002,
   "end": 1853.46,
   "text": " This is a very good point."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1853.46,
   "end": 1857.8000000000002,
   "text": " And I think that there are ways to limit that behavior."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1857.8000000000002,
   "end": 1861.8200000000002,
   "text": " For instance, there is definitely a way to make sure that the bucket is not deleted."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1861.8200000000002,
   "end": 1864.52,
   "text": " I think it's called deletion policy."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1864.52,
   "end": 1865.52,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1865.52,
   "end": 1868.76,
   "text": " This is a CloudFormation property that you can put on lots of different resources like"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1868.76,
   "end": 1872.3600000000001,
   "text": " DynamoDB tables as well."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1872.36,
   "end": 1875.6599999999999,
   "text": " It's not within the bucket policy itself, but it's actually at the higher level."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1875.6599999999999,
   "end": 1878.9599999999998,
   "text": " So it's a sibling of properties itself."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1878.9599999999998,
   "end": 1880.9599999999998,
   "text": " So we'll need to put it here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1880.9599999999998,
   "end": 1881.9599999999998,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1881.9599999999998,
   "end": 1884.28,
   "text": " Still doesn't like it, but..."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1884.28,
   "end": 1885.84,
   "text": " Doesn't like it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1885.84,
   "end": 1886.84,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1886.84,
   "end": 1889.4399999999998,
   "text": " I trust you that this is correct."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1889.4399999999998,
   "end": 1890.4399999999998,
   "text": " Trust but verify."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1890.4399999999998,
   "end": 1891.4399999999998,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1891.4399999999998,
   "end": 1894.4799999999998,
   "text": " We'll verify what gets generated later."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1894.4799999999998,
   "end": 1900.82,
   "text": " So one issue on that is CloudFormation won't delete objects from your bucket."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1900.82,
   "end": 1905.8,
   "text": " So if people have seen that in the past, it might be because you're using some tooling"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1905.8,
   "end": 1910.3999999999999,
   "text": " that is deleting objects for you."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1910.3999999999999,
   "end": 1912.76,
   "text": " It shouldn't delete your bucket with objects."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1912.76,
   "end": 1919.32,
   "text": " But what this does is it just makes sure that even if the bucket is empty, it won't be deleted"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1919.32,
   "end": 1922.24,
   "text": " when we delete the stack."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1922.24,
   "end": 1923.24,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1923.24,
   "end": 1924.24,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1924.24,
   "end": 1928.86,
   "text": " So at this point, what we can do is we can see what gets generated, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1928.86,
   "end": 1934.6399999999999,
   "text": " So we can do SLS package, if I remember correctly, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1934.6399999999999,
   "end": 1936.56,
   "text": " Which is basically..."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1936.56,
   "end": 1940.24,
   "text": " It's not deploying, it's just bundling up everything."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1940.24,
   "end": 1946.52,
   "text": " And then we can see what would eventually get deployed if we proceed with that package."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1946.52,
   "end": 1950.3,
   "text": " So it's kind of a preview in what's going to be produced for us."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1950.3,
   "end": 1953.4199999999998,
   "text": " And we can see that there is a new folder here called.serverless."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1953.42,
   "end": 1959.28,
   "text": " So if we go in there, we have a bunch of CloudFormations and this serverless state JSON."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1959.28,
   "end": 1965.88,
   "text": " Now I think the one that is most interesting is the first one, CreateStack."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1965.88,
   "end": 1970.64,
   "text": " The CreateStack is the one that creates the bucket that serverless framework is going"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1970.64,
   "end": 1973.04,
   "text": " to use to deploy its own assets."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1973.04,
   "end": 1978.28,
   "text": " So all of your stuff is going to be in the update stack, because it does this kind of"
  },
  {
   "speakerLabel": "spk_1",
   "start": 1978.28,
   "end": 1981.88,
   "text": " two phase update on the first deployment."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1981.88,
   "end": 1987.44,
   "text": " And this is because serverless will need to upload certain assets to be able to proceed"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1987.44,
   "end": 1988.44,
   "text": " with the deploy."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1988.44,
   "end": 1990.44,
   "text": " So this is kind of a bootstrapping thing."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1990.44,
   "end": 1991.44,
   "text": " It's a bootstrap."
  },
  {
   "speakerLabel": "spk_1",
   "start": 1991.44,
   "end": 1992.44,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1992.44,
   "end": 1993.44,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1993.44,
   "end": 1996.8600000000001,
   "text": " So this is the one we are actually interested in, which looks almost identical because we"
  },
  {
   "speakerLabel": "spk_0",
   "start": 1996.8600000000001,
   "end": 1999.5600000000002,
   "text": " have..."
  },
  {
   "speakerLabel": "spk_0",
   "start": 1999.5600000000002,
   "end": 2001.44,
   "text": " Actually this one is the same, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2001.44,
   "end": 2004.16,
   "text": " It's literally serverless deployment bucket."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2004.16,
   "end": 2011.1200000000001,
   "text": " It should have the same bucket because it has to make sure that it keeps that bucket."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2011.12,
   "end": 2012.12,
   "text": " And now..."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2012.12,
   "end": 2016.52,
   "text": " Then that's also their bucket, but it's just the policy, the bucket policy."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2016.52,
   "end": 2018.1599999999999,
   "text": " This is our file bucket."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2018.1599999999999,
   "end": 2019.1599999999999,
   "text": " Yep."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2019.1599999999999,
   "end": 2020.1599999999999,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2020.1599999999999,
   "end": 2023,
   "text": " It is actually adding this deletion policy, retained."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2023,
   "end": 2025.8799999999999,
   "text": " Type, is that one properties?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2025.8799999999999,
   "end": 2029.56,
   "text": " Now this, some random name is something that we definitely need to change."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2029.56,
   "end": 2035.32,
   "text": " And we'll talk about that in a second, but everything else seems to make sense."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2035.32,
   "end": 2036.32,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2036.32,
   "end": 2037.32,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2037.32,
   "end": 2041.48,
   "text": " And when we do this, when we have a function that will look a little..."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2041.48,
   "end": 2046,
   "text": " When we have a more complex function, it will look a lot more interesting."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2046,
   "end": 2049.7999999999997,
   "text": " Now why do we need to change this some random name?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2049.7999999999997,
   "end": 2055.7799999999997,
   "text": " Because an interesting thing about S3 buckets is that they have to have a unique name across"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2055.7799999999997,
   "end": 2058.22,
   "text": " every account and every region."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2058.22,
   "end": 2063.92,
   "text": " So if we try to use some random name, maybe we get lucky, meaning that nobody else ever"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2063.92,
   "end": 2065.62,
   "text": " used this one."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2065.62,
   "end": 2071.3599999999997,
   "text": " But if somebody just tries to deploy the same stack as it is, they will bump into a conflict"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2071.3599999999997,
   "end": 2073.7599999999998,
   "text": " with whoever deployed first."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2073.7599999999998,
   "end": 2079.7599999999998,
   "text": " So it's better to actually have a way to generate a random string straight away."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2079.7599999999998,
   "end": 2085.7,
   "text": " Now this is not something that you can do easily with just a CloudFormation itself,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2085.7,
   "end": 2089.3599999999997,
   "text": " but because we are using serverless framework, serverless framework actually gives us ways"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2089.36,
   "end": 2097.04,
   "text": " to interpolate code, let's say, or code generated strings into whatever is going to be the result"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2097.04,
   "end": 2098.04,
   "text": " in CloudFormation."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2098.04,
   "end": 2100.7200000000003,
   "text": " So it's kind of a template language at the same time."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2100.7200000000003,
   "end": 2108.28,
   "text": " It's not just giving us an easier way to create some resources, but it also gives us more"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2108.28,
   "end": 2113.28,
   "text": " abilities in terms of how do we structure the infrastructure as code."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2113.28,
   "end": 2114.8,
   "text": " How do we write infrastructure as code?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2114.8,
   "end": 2121.6000000000004,
   "text": " We have more functionality in terms of string interpolation and things like that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2121.6000000000004,
   "end": 2127.92,
   "text": " So if I remember correctly, it is possible to create a JavaScript file that actually"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2127.92,
   "end": 2133.1200000000003,
   "text": " executes some logic and then the result of that logic, it can be a string and then we"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2133.1200000000003,
   "end": 2138.44,
   "text": " can use that string in our template, in our serverless.yaml, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2138.44,
   "end": 2144.92,
   "text": ""
  },
  {
   "speakerLabel": "spk_1",
   "start": 2144.92,
   "end": 2149.36,
   "text": " Yeah, there's a specific function signature and I'm going to link into the documentation in serverless.com, serverless framework documentation that tells you how to do this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2149.36,
   "end": 2152.66,
   "text": " So you can check that too."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2152.66,
   "end": 2162.48,
   "text": " So we can call this file, I don't know, unique target name.js."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2162.48,
   "end": 2164.06,
   "text": " Actually it needs to be common.js."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2164.06,
   "end": 2174.4,
   "text": " So we need to do cjs and then basically what we do here, module.exports equal, it can be"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2174.4,
   "end": 2180.2,
   "text": " an async function."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2180.2,
   "end": 2190.2799999999997,
   "text": " And basically whatever we return is going to be a variable that we can use in our own."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2190.28,
   "end": 2194.28,
   "text": " By the way, I'm using Copilot."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2194.28,
   "end": 2198.52,
   "text": " Copilot is trying to suggest us something which is not really what we want to do."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2198.52,
   "end": 2200.28,
   "text": " No, this looks like a Lambda handler."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2200.28,
   "end": 2202.4,
   "text": " You're writing a Lambda function."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2202.4,
   "end": 2204.7200000000003,
   "text": " But the idea is that we might be doing something like this."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2204.7200000000003,
   "end": 2212.2000000000003,
   "text": " We might be doing, I don't know, bucket name and something random."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2212.2000000000003,
   "end": 2216.8,
   "text": " Then we should be able to reference this bucket name."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2216.8,
   "end": 2221.84,
   "text": " And before we implement all of that, let's try to wire things in and see if it's actually"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2221.84,
   "end": 2229.5600000000004,
   "text": " giving us something random in the final, in the final CloudFormation template."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2229.5600000000004,
   "end": 2238.48,
   "text": " So here what we want to do is basically we can use, I think it's like this syntax, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2238.48,
   "end": 2240.52,
   "text": " We need quotes?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2240.52,
   "end": 2242.6800000000003,
   "text": " You don't need quotes for this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2242.6800000000003,
   "end": 2243.6800000000003,
   "text": " You just need to..."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2243.68,
   "end": 2246.96,
   "text": " And it's like file or something like that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2246.96,
   "end": 2249.9199999999996,
   "text": " Let's see if I remember."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2249.9199999999996,
   "end": 2252.9199999999996,
   "text": " It's file, yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2252.9199999999996,
   "end": 2256.7999999999997,
   "text": " And then there's no colon actually at this point."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2256.7999999999997,
   "end": 2258.7999999999997,
   "text": " So it's file and then parentheses."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2258.7999999999997,
   "end": 2259.7999999999997,
   "text": " Right."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2259.7999999999997,
   "end": 2260.7999999999997,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2260.7999999999997,
   "end": 2261.7999999999997,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2261.7999999999997,
   "end": 2262.7999999999997,
   "text": " I can check."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2262.7999999999997,
   "end": 2263.7999999999997,
   "text": " I'm verifying all of this in the background."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2263.7999999999997,
   "end": 2264.7999999999997,
   "text": " So don't worry."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2264.7999999999997,
   "end": 2265.7999999999997,
   "text": " It's not all off the top of my head."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2265.7999999999997,
   "end": 2267.94,
   "text": " And then the path."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2267.94,
   "end": 2275.34,
   "text": " We call it unique bucket name.cjs."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2275.34,
   "end": 2276.96,
   "text": " If I can type."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2276.96,
   "end": 2279.7200000000003,
   "text": " And then at that point it gives you back an object."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2279.7200000000003,
   "end": 2283.18,
   "text": " Let's say like it kind of runs that file and gives you back an object."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2283.18,
   "end": 2288.7200000000003,
   "text": " So we can just reference bucket name, which is one of the properties that we export from"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2288.7200000000003,
   "end": 2289.7200000000003,
   "text": " that file."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2289.7200000000003,
   "end": 2290.7200000000003,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2290.7200000000003,
   "end": 2291.7200000000003,
   "text": " That's it."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2291.7200000000003,
   "end": 2296.96,
   "text": " Now you just need to check the spelling of unique there to match the file name."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2296.96,
   "end": 2303.6,
   "text": " Now if we repackage all of that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2303.6,
   "end": 2304.9,
   "text": " It was very fast."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2304.9,
   "end": 2308.82,
   "text": " So if we check here, now it is something random."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2308.82,
   "end": 2315.8,
   "text": " So just to show that I'm not lying, if we change this to something random too, and we"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2315.8,
   "end": 2321.44,
   "text": " run this again, it should give us something different now."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2321.44,
   "end": 2322.78,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2322.78,
   "end": 2324.64,
   "text": " Something random too."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2324.64,
   "end": 2325.92,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2325.92,
   "end": 2331.6,
   "text": " So now the trick is that we need to generate something random that is consistently random,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2331.6,
   "end": 2332.6,
   "text": " right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2332.6,
   "end": 2333.6,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2333.6,
   "end": 2334.6,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2334.6,
   "end": 2338.7000000000003,
   "text": " So a lot of times what you would do here is you don't necessarily have to do this JavaScript"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2338.7000000000003,
   "end": 2339.96,
   "text": " module approach."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2339.96,
   "end": 2345.6,
   "text": " You can just put like an interpolated string using CloudFormation substitutions or serverless"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2345.6,
   "end": 2350.86,
   "text": " variables where you just add in your account ID and the region as a suffix onto your bucket"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2350.86,
   "end": 2352.16,
   "text": " name."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2352.16,
   "end": 2356.64,
   "text": " But for our application, since the URLs we generate will include the bucket name, we"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2356.64,
   "end": 2362.16,
   "text": " want to be a little bit more protective of our account name maybe and the name of our"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2362.16,
   "end": 2366.48,
   "text": " bucket or the account name."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2366.48,
   "end": 2370.8399999999997,
   "text": " Just make it a little bit more obtuse, I suppose."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2370.8399999999997,
   "end": 2375.7999999999997,
   "text": " So we just want to generate something from these variables rather than exposing our account"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2375.7999999999997,
   "end": 2379.44,
   "text": " ID in the bucket itself."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2379.44,
   "end": 2385.44,
   "text": " So I'm going to copy paste a solution that we developed before, but basically the idea"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2385.44,
   "end": 2393.32,
   "text": " is that we could hash some information that we get for the current account region and"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2393.32,
   "end": 2399.62,
   "text": " use that as a unique key because at that point we are guaranteed that if you try to deploy"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2399.62,
   "end": 2403.36,
   "text": " the same thing in a different account or a different region, you will get a different"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2403.36,
   "end": 2404.36,
   "text": " bucket."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2404.36,
   "end": 2408.04,
   "text": " But as long as you use the same account in the same region, you always get the same bucket"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2408.04,
   "end": 2409.8,
   "text": " name consistently."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2409.8,
   "end": 2414.24,
   "text": " So you don't end up with a different bucket at every deployment, which is basically what"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2414.24,
   "end": 2416.04,
   "text": " we are trying to avoid."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2416.04,
   "end": 2420.72,
   "text": " On one side, we want something pseudo random, on the other side it needs to be consistently"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2420.72,
   "end": 2426.38,
   "text": " the same value for the same account and region."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2426.38,
   "end": 2431.64,
   "text": " So we can use the create hash function from Node.js."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2431.64,
   "end": 2438.12,
   "text": " And then an interesting thing is that you could get some information here by the serverless"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2438.12,
   "end": 2439.12,
   "text": " framework."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2439.12,
   "end": 2445.2,
   "text": " So serverless framework is going to run this code by passing certain things into it."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2445.2,
   "end": 2451.3199999999997,
   "text": " And this result variable is a function that allows you to actually retrieve information"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2451.3199999999997,
   "end": 2453.58,
   "text": " from the current context."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2453.58,
   "end": 2459.2,
   "text": " So for instance, we can get the current account like this."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2459.2,
   "end": 2461.04,
   "text": " Then we could get the region."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2461.04,
   "end": 2463.2799999999997,
   "text": " Yeah, this is exactly what I wanted to do."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2463.2799999999997,
   "end": 2464.72,
   "text": " Thank you, Copilot."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2464.72,
   "end": 2467.8,
   "text": " And then we can get the stage."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2467.8,
   "end": 2471.2,
   "text": " AWS stage."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2471.2,
   "end": 2473.16,
   "text": " Actually region is slightly different."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2473.16,
   "end": 2479.8,
   "text": " I think we want provider.region."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2479.8,
   "end": 2480.8,
   "text": " Stage should be..."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2480.8,
   "end": 2487.52,
   "text": " No, I think you could do self provider.region or AWS colon region is a new variable in serverless"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2487.52,
   "end": 2489.96,
   "text": " version 3 that you can use directly."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2489.96,
   "end": 2490.96,
   "text": " Interesting."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2490.96,
   "end": 2491.96,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2491.96,
   "end": 2495.96,
   "text": " Should we try region then?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2495.96,
   "end": 2499.8,
   "text": " Yeah, that's good to go."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2499.8,
   "end": 2504.48,
   "text": " Andrea has another useful comment actually about this particular topic."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2504.48,
   "end": 2507.48,
   "text": " SLS print to display all the..."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2507.48,
   "end": 2509.4,
   "text": " Oh, that's a good one."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2509.4,
   "end": 2510.4,
   "text": " Let's see."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2510.4,
   "end": 2514.08,
   "text": " Yeah, we can try that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2514.08,
   "end": 2515.92,
   "text": " I don't like something."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2515.92,
   "end": 2516.92,
   "text": " Stage."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2516.92,
   "end": 2519.08,
   "text": " Yeah, we have AWS colon stage."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2519.08,
   "end": 2525.6,
   "text": " That should be SLS colon stage because that's a serverless specific."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2525.6,
   "end": 2527.64,
   "text": " Right."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2527.64,
   "end": 2529.84,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2529.84,
   "end": 2534.12,
   "text": " Now it's actually printing all our..."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2534.12,
   "end": 2537.7599999999998,
   "text": " Like a preview of our transformation without having to package."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2537.7599999999998,
   "end": 2538.7599999999998,
   "text": " Yeah, that's a good point."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2538.7599999999998,
   "end": 2539.7599999999998,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2539.7599999999998,
   "end": 2540.7599999999998,
   "text": " Thank you."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2540.7599999999998,
   "end": 2541.7599999999998,
   "text": " It resolves all the variables."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2541.7599999999998,
   "end": 2545,
   "text": " It's not CloudFormation strictly because it still has the high level of functions and"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2545,
   "end": 2546,
   "text": " stuff."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2546,
   "end": 2547,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2547,
   "end": 2552.68,
   "text": " So at this point we still are returning something random too, but we have information that we"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2552.68,
   "end": 2554.24,
   "text": " can hash."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2554.24,
   "end": 2564.28,
   "text": " So basically what we can do is say const input equal and we can do a string like we share"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2564.28,
   "end": 2572.76,
   "text": " and then account hash region dash stage."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2572.76,
   "end": 2575.6,
   "text": " Thank you, Co-Pilot."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2575.6,
   "end": 2587.8399999999997,
   "text": " And at this point, the bucket name we want to generate is basically..."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2587.8399999999997,
   "end": 2588.8399999999997,
   "text": " Let's see."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2588.8399999999997,
   "end": 2591.7799999999997,
   "text": " What we can do is we still want to retain a prefix, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2591.7799999999997,
   "end": 2601.44,
   "text": " So let's say we share hash plus create hash MD5 update input."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2601.44,
   "end": 2604.48,
   "text": " Yeah, that's exactly what I want."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2604.48,
   "end": 2605.48,
   "text": " Nice."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2605.48,
   "end": 2612.04,
   "text": " So this is basically saying take all the string, hash it using MD5, and then prepend this we"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2612.04,
   "end": 2615.26,
   "text": " share dash, whatever is the hash."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2615.26,
   "end": 2619.3,
   "text": " Now at this point, we can just read out this bucket name."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2619.3,
   "end": 2624.06,
   "text": " And if we do this again, we should get something slightly different."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2624.06,
   "end": 2627.16,
   "text": " We share something something."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2627.16,
   "end": 2635.04,
   "text": " And because these values are not going to change, we should get the same bucket again."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2635.04,
   "end": 2637.7599999999998,
   "text": " Makes sense?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2637.7599999999998,
   "end": 2639,
   "text": " Cool."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2639,
   "end": 2643.16,
   "text": " Should we try to deploy all of this?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2643.16,
   "end": 2644.16,
   "text": " This makes sense."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2644.16,
   "end": 2646.16,
   "text": " Yeah, let's deploy."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2646.16,
   "end": 2647.16,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2647.16,
   "end": 2649.24,
   "text": " We have some credentials set up."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2649.24,
   "end": 2651.12,
   "text": " Do I have credentials?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2651.12,
   "end": 2656.08,
   "text": " I think I did have credentials in another terminal."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2656.08,
   "end": 2657.08,
   "text": " Let's see."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2657.08,
   "end": 2658.96,
   "text": " Here I don't think I have credentials."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2658.96,
   "end": 2661.4,
   "text": " Here I have my own credentials."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2661.4,
   "end": 2666.7200000000003,
   "text": " So how do we do this?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2666.7200000000003,
   "end": 2670.6800000000003,
   "text": " I think I can deploy from here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2670.6800000000003,
   "end": 2675.56,
   "text": " I can, we can do SLS deploy, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2675.56,
   "end": 2682,
   "text": " That's actually let me make sure we have the right credentials."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2682,
   "end": 2683,
   "text": " I do."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2683,
   "end": 2684.84,
   "text": " That looks good to me."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2684.84,
   "end": 2687.56,
   "text": " And now we can do just SLS deploy should be enough, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2687.56,
   "end": 2689.64,
   "text": " We don't need any other option."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2689.64,
   "end": 2694.72,
   "text": " Yep, that looks good."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2694.72,
   "end": 2696.72,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2696.72,
   "end": 2701.8799999999997,
   "text": " This is creating the CloudFormation stack."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2701.8799999999997,
   "end": 2707,
   "text": ""
  },
  {
   "speakerLabel": "spk_1",
   "start": 2707,
   "end": 2708.92,
   "text": " So this should just create our bucket and that default boilerplate Lambda function we have."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2708.92,
   "end": 2719.44,
   "text": " So if we go into the AWS console, we should see that these resources are being created."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2719.44,
   "end": 2727.12,
   "text": " Meanwhile we have a question from Juan Lopez from YouTube saying the need for uniqueness"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2727.12,
   "end": 2732.28,
   "text": " across bucket name in S3 is something that I had to deal with in the past."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2732.28,
   "end": 2737.32,
   "text": " I will not have expected that S3 bucket names needs to be unique across S3 and not only"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2737.32,
   "end": 2740.96,
   "text": " your account or region as well, I guess."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2740.96,
   "end": 2746.04,
   "text": " And I think the main reason for that is that because S3 is like one of the oldest services."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2746.04,
   "end": 2753,
   "text": " So probably some of the thinking that happens now when AWS create a new service didn't happen"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2753,
   "end": 2754.84,
   "text": " at the time."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2754.84,
   "end": 2759.86,
   "text": " And the other thing is that S3 creates domain names."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2759.86,
   "end": 2764.08,
   "text": " So in that sense, the name of a bucket is kind of one-to-one to the domain name that"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2764.08,
   "end": 2765.58,
   "text": " gets created."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2765.58,
   "end": 2769.64,
   "text": " And also some of the rules for creating a bucket name are pretty much the same rules"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2769.64,
   "end": 2771.92,
   "text": " for a domain name, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2771.92,
   "end": 2778.32,
   "text": " So I think that was the idea at the time and probably AWS now is stuck with that decision."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2778.32,
   "end": 2780.08,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2780.08,
   "end": 2781.44,
   "text": " So everything was deployed."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2781.44,
   "end": 2790.6,
   "text": " I should be able to go into the account and show you that we have the bucket deployed."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2790.6,
   "end": 2793.12,
   "text": " Let me bring up another window."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2793.12,
   "end": 2794.12,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2794.12,
   "end": 2798.2400000000002,
   "text": " I have it here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2798.24,
   "end": 2803.56,
   "text": " Let me make this a little bit bigger."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2803.56,
   "end": 2807.7999999999997,
   "text": " So I am filtering because in this account we have so many more buckets, but you can"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2807.7999999999997,
   "end": 2810.3999999999996,
   "text": " see the two buckets were created."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2810.3999999999996,
   "end": 2816.9599999999996,
   "text": " This is the bucket created by serverless framework for dealing with the deployments."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2816.9599999999996,
   "end": 2821.2,
   "text": " This is the one that we just created from our resource."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2821.2,
   "end": 2823.56,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2823.56,
   "end": 2830.88,
   "text": " So maybe what I can do now is commit all these changes and that's it to you, Eoin, for writing"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2830.88,
   "end": 2832.88,
   "text": " some Lambda code."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2832.88,
   "end": 2834.2,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2834.2,
   "end": 2838.72,
   "text": " Actually, status, git add."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2838.72,
   "end": 2843.2799999999997,
   "text": " Should I add the handler for now?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2843.2799999999997,
   "end": 2845.2799999999997,
   "text": " Yeah, we will change it."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2845.2799999999997,
   "end": 2849.56,
   "text": " Either way is good."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2849.56,
   "end": 2850.56,
   "text": " Serverless."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2850.56,
   "end": 2851.56,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2851.56,
   "end": 2870.2,
   "text": " So whenever you are ready, feel free to share your screen."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2870.2,
   "end": 2875.64,
   "text": " We also have Gil in the chat who is sending us a chicken, a log gill."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2875.64,
   "end": 2883.52,
   "text": " We also like chickens."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2883.52,
   "end": 2885.24,
   "text": " Do you need to stop sharing the channel?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 2885.24,
   "end": 2887.24,
   "text": " Yes, I need to switch."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2887.24,
   "end": 2888.24,
   "text": " Excellent."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2888.24,
   "end": 2893.16,
   "text": " Let me pull down these latest changes."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2893.16,
   "end": 2896.68,
   "text": " By the way, Andrea is asking if the episode will be available later."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2896.68,
   "end": 2898.96,
   "text": " We will definitely post it on YouTube."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2898.96,
   "end": 2903.72,
   "text": " We are also considering to add it as an audio only podcast."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2903.72,
   "end": 2907.7999999999997,
   "text": " I don't know if it makes sense, but we will probably try that anyway."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2907.7999999999997,
   "end": 2911.2799999999997,
   "text": " So yeah, definitely we will make it available later in different ways."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2911.2799999999997,
   "end": 2914.7999999999997,
   "text": " Hopefully, we will see you next time, Andrea."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2914.7999999999997,
   "end": 2916.9199999999996,
   "text": " Thank you for all the questions and comments."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2916.9199999999996,
   "end": 2918.48,
   "text": " Great tips."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2918.48,
   "end": 2919.7599999999998,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2919.7599999999998,
   "end": 2923.4399999999996,
   "text": " So we're about to set about creating a function."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2923.4399999999996,
   "end": 2930.2,
   "text": " So if we go back to the architecture, maybe it's worth a quick look at that, actually."
  },
  {
   "speakerLabel": "spk_0",
   "start": 2930.2,
   "end": 2933.68,
   "text": ""
  },
  {
   "speakerLabel": "spk_1",
   "start": 2933.68,
   "end": 2939.96,
   "text": " We mentioned that we're going to create a function here that will create this kind of share that allows you to get a look at an upload URL and a download URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2939.96,
   "end": 2944,
   "text": " So we're kind of in a restful sense, we're going to create a share object, but we don't"
  },
  {
   "speakerLabel": "spk_1",
   "start": 2944,
   "end": 2945.56,
   "text": " create anything in a database."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2945.56,
   "end": 2950.9399999999996,
   "text": " We're just going to talk to S3 here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2950.9399999999996,
   "end": 2951.9399999999996,
   "text": " So let's have a look at that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2951.9399999999996,
   "end": 2956.8799999999997,
   "text": " In serverless.yaml, we've got the existing function boilerplate."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2956.88,
   "end": 2962.34,
   "text": " So let's try and take this and make something more of it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2962.34,
   "end": 2964.6,
   "text": " So let's say we're going to give our function a name."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2964.6,
   "end": 2970.6400000000003,
   "text": " Now, this is just a name that the serverless framework uses to identify our function."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2970.6400000000003,
   "end": 2979.04,
   "text": " So let's just call it create share because we're going to create a share resource."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2979.04,
   "end": 2983.7200000000003,
   "text": " And we want this to be triggered by an API endpoint."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2983.7200000000003,
   "end": 2986.44,
   "text": " So we're going to create an API endpoint."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2986.44,
   "end": 2992.16,
   "text": " So our handler in our Lambda function code is going to be responding to this event."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2992.16,
   "end": 2995.66,
   "text": " So let's call this handle."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2995.66,
   "end": 2997.96,
   "text": " Let's just call it handle event."
  },
  {
   "speakerLabel": "spk_1",
   "start": 2997.96,
   "end": 3001.6,
   "text": " We might rename our handler to be a little bit more explicit."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3001.6,
   "end": 3004.04,
   "text": " Let's call it share handler."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3004.04,
   "end": 3009.82,
   "text": " And beyond that, we need to start wiring in the HTTP interfaces."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3009.82,
   "end": 3012.08,
   "text": " So we've got a couple of ways of doing this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3012.08,
   "end": 3019.56,
   "text": " And within API gateway, we've got the API gateway rest API, which is the kind of traditional"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3019.56,
   "end": 3020.96,
   "text": " way of doing it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3020.96,
   "end": 3025.6,
   "text": " And now you have the kind of simpler and more cost effective way of doing it, which is the"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3025.6,
   "end": 3027.56,
   "text": " HTTP API method."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3027.56,
   "end": 3035.24,
   "text": " I know these things aren't particularly well named, but HTTP API is pretty simple."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3035.24,
   "end": 3036.8199999999997,
   "text": " So let's go with that one."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3036.8199999999997,
   "end": 3041.88,
   "text": " So we're saying that this function is going to be triggered by a number of events because"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3041.88,
   "end": 3043.92,
   "text": " this is an array here we're creating."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3043.92,
   "end": 3046.56,
   "text": " So this function can be triggered by more than one."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3046.56,
   "end": 3050.9,
   "text": " We're just going to restrict it to HTTP API events."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3050.9,
   "end": 3053.56,
   "text": " So for that, we just need to give it the method."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3053.56,
   "end": 3060.56,
   "text": " And since we're creating this share resource, then this will be a HTTP post and we can give"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3060.56,
   "end": 3063.7200000000003,
   "text": " it a path."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3063.7200000000003,
   "end": 3068.6800000000003,
   "text": " Maybe one thing that is worth clarifying for people that never used Lambda before is that"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3068.68,
   "end": 3074.52,
   "text": " Lambda is not like something that is always running, but it's just a function that is"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3074.52,
   "end": 3078.44,
   "text": " automatically triggered by AWS when a specific event happens."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3078.44,
   "end": 3084.64,
   "text": " So what we are doing here is basically telling AWS the event that we want to use to trigger"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3084.64,
   "end": 3092.2,
   "text": " our Lambda is an HTTP event in particular, like a post request to a particular path."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3092.2,
   "end": 3093.2,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3093.2,
   "end": 3094.2,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3094.2,
   "end": 3096.54,
   "text": " This is definitely worth stating."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3096.54,
   "end": 3104.36,
   "text": " We can give this a path and what we can do here is just give it the root path and why"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3104.36,
   "end": 3110.84,
   "text": " we do this at the root rather than creating like a specific path, like a share resource"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3110.84,
   "end": 3118,
   "text": " here, it will become more apparent when we look at introducing domain names and API later"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3118,
   "end": 3123.54,
   "text": " APIs later, because we can create all of the functions and APIs relating to this type of"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3123.54,
   "end": 3127.12,
   "text": " resource all within this serverless project."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3127.12,
   "end": 3133.52,
   "text": " And then we can map it to a domain name with a path so we can actually apply the path later."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3133.52,
   "end": 3136.96,
   "text": " And this makes it much easier to do that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3136.96,
   "end": 3140.88,
   "text": " So that's our handler code."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3140.88,
   "end": 3146,
   "text": " This is a handler module we're going to have to write and this is the event and that's"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3146,
   "end": 3147,
   "text": " it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3147,
   "end": 3152.56,
   "text": " We will need to add some permissions, but maybe we can come back to that because that's"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3152.56,
   "end": 3160.96,
   "text": " maybe a little bit clearer just to write the handler code that will do the code that responds"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3160.96,
   "end": 3161.96,
   "text": " to the event."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3161.96,
   "end": 3166.08,
   "text": " So let's start creating that handler now."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3166.08,
   "end": 3170.04,
   "text": " So since we renamed it, handler.js is not going to work anymore."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3170.04,
   "end": 3172.7599999999998,
   "text": " So let's just rename this to share handler."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3172.7599999999998,
   "end": 3180.7999999999997,
   "text": " I must remember to use Node.js syntax rather than Python."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3180.7999999999997,
   "end": 3181.7999999999997,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3181.8,
   "end": 3186.48,
   "text": " So let's just rename this one."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3186.48,
   "end": 3191.04,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3191.04,
   "end": 3195.7200000000003,
   "text": " So we've got all sorts of hours here, like semicolons and common JS modules."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3195.7200000000003,
   "end": 3200.8,
   "text": " So let's just make this and go from scratch."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3200.8,
   "end": 3205.04,
   "text": " So the syntax of our handler is we're going to create a function."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3205.04,
   "end": 3215.08,
   "text": " This will be an async function with the syntax for a Lambda function, which is that it takes"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3215.08,
   "end": 3217.52,
   "text": " an event and it also takes context."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3217.52,
   "end": 3222.34,
   "text": " We will probably not use context in fact, so we can admit it completely, but let's just"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3222.34,
   "end": 3225.8,
   "text": " leave it in there for clarity maybe for now."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3225.8,
   "end": 3231.12,
   "text": " And within this handler, we're going to do everything we need to create the get URL and"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3231.12,
   "end": 3234.9,
   "text": " the upload URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3234.9,
   "end": 3238.04,
   "text": " So maybe we can just think about the syntax of this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3238.04,
   "end": 3240.56,
   "text": " This is an arrow function."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3240.56,
   "end": 3245.7200000000003,
   "text": " This is an arrow function, so I'll need an arrow."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3245.7200000000003,
   "end": 3247.2200000000003,
   "text": " So we've got a few steps, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3247.2200000000003,
   "end": 3252.64,
   "text": " So what are the things we need to do in order to interact with S3 and generate an upload"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3252.64,
   "end": 3254.84,
   "text": " URL and a retrieval URL?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3254.84,
   "end": 3261.08,
   "text": " So we're using the concept of S3 presigned URLs, which are really useful feature."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3261.08,
   "end": 3267.2599999999998,
   "text": " And the beauty of that is that it allows us to offload all of the scalability for retrieving"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3267.2599999999998,
   "end": 3272.22,
   "text": " and uploading large files to S3 completely."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3272.22,
   "end": 3277.56,
   "text": " So none of that file data ever has to actually go through any of the systems that we're building"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3277.56,
   "end": 3278.56,
   "text": " here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3278.56,
   "end": 3284.2799999999997,
   "text": " And that's really the goal because S3 is way better at handling the throughput and scalability"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3284.2799999999997,
   "end": 3287.7599999999998,
   "text": " that would be required if the system was to scale."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3287.76,
   "end": 3294.32,
   "text": ""
  },
  {
   "speakerLabel": "spk_0",
   "start": 3294.32,
   "end": 3299.92,
   "text": " Yeah, I guess another advantage to that is that signed URLs allow us to define certain like boundaries for which the file can be uploaded or downloaded."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3299.92,
   "end": 3303.48,
   "text": " Now I think for the first version, we're not going to worry too much, but in the future,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3303.48,
   "end": 3308.82,
   "text": " we might use that for instance, to limit the time that the file is going to be available,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3308.82,
   "end": 3313.88,
   "text": " just as an example, but you can put other like boundaries and they are just built in."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3313.88,
   "end": 3315.88,
   "text": " You just need to configure specific properties."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3315.88,
   "end": 3319.04,
   "text": " You don't need to implement additional codes for that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3319.04,
   "end": 3320.32,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3320.32,
   "end": 3325.28,
   "text": " So just referring back to the diagram, then we're creating this function here and we've"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3325.28,
   "end": 3329.92,
   "text": " already declared everything we need to do for the API gateway endpoint."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3329.92,
   "end": 3331.84,
   "text": " We've declared the post."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3331.84,
   "end": 3336.08,
   "text": " We're just using the root path at the moment."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3336.08,
   "end": 3338.7200000000003,
   "text": " And the next thing we need to do is then create presigned URLs."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3338.7200000000003,
   "end": 3343.88,
   "text": " So maybe let's just pseudocode this out or comment about the steps we need to do."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3343.88,
   "end": 3348.6,
   "text": " So when we think about it, if we want people to be able to upload an object, we need to"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3348.6,
   "end": 3351.98,
   "text": " have some sort of identifier for this file or object."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3351.98,
   "end": 3360.96,
   "text": " So we should probably first create a key or a file or a file name."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3360.96,
   "end": 3370.7200000000003,
   "text": " Then we'd want to create an upload URL and then we create the download URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3370.72,
   "end": 3376.2,
   "text": " And finally we'll return something like an object, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3376.2,
   "end": 3385.6,
   "text": " So this is an API gateway Lambda proxy, which means that API gateway is proxying to the"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3385.6,
   "end": 3387.6,
   "text": " Lambda service internally within AWS."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3387.6,
   "end": 3392.04,
   "text": " So there's a specific contract that you'll have to obey here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3392.04,
   "end": 3397.64,
   "text": " That means when you return your response, it should have HTTP status code."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3397.64,
   "end": 3402.24,
   "text": " And if you want to return a body, it should also have a body and you can also return HTTP"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3402.24,
   "end": 3404.4,
   "text": " response headers."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3404.4,
   "end": 3411.44,
   "text": " So in the status code, I guess what we want is a 201, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3411.44,
   "end": 3416.56,
   "text": " Because we're creating something and that would indicate we've successfully created"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3416.56,
   "end": 3419.8799999999997,
   "text": " something and then we're going to create a body."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3419.88,
   "end": 3431,
   "text": " So this will be something with a download URL and upload URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3431,
   "end": 3432.6800000000003,
   "text": " So let's go through this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3432.6800000000003,
   "end": 3439.38,
   "text": " So we need to start using the AWS SDK because we're going to interact with S3."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3439.38,
   "end": 3442.2200000000003,
   "text": " So let's set about that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3442.2200000000003,
   "end": 3447.54,
   "text": " In order to get this to work, we'll need to install a few modules."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3447.54,
   "end": 3451.2,
   "text": " So Luciano, is it a good time to talk about the AWS SDK v3?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3451.2,
   "end": 3458.12,
   "text": ""
  },
  {
   "speakerLabel": "spk_0",
   "start": 3458.12,
   "end": 3462.64,
   "text": " I think we covered it on the podcast actually a couple of months back, but it works quite a different way to the one we're used to, the AWS SDK version two."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3462.64,
   "end": 3467.12,
   "text": " Yeah, I think it's interesting to show how it works."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3467.12,
   "end": 3468.12,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3468.12,
   "end": 3470.12,
   "text": " Okay, good."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3470.12,
   "end": 3479.7999999999997,
   "text": " So these are the two modules that we researched and know we need to use in order to interact"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3479.7999999999997,
   "end": 3480.7999999999997,
   "text": " with S3."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3480.7999999999997,
   "end": 3488.24,
   "text": " So you have the, everything is a separate module, the AWS SDK v3, that allows you to"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3488.24,
   "end": 3491.92,
   "text": " have very small bundles of modules when you deploy."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3491.92,
   "end": 3494.72,
   "text": " So we actually have two that we can use here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3494.72,
   "end": 3499.44,
   "text": " We have the S3 one and we have the S3 request presigner one, which is a separate module"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3499.44,
   "end": 3502.52,
   "text": " just for doing presigning."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3502.52,
   "end": 3507.56,
   "text": " And I'm installing those as dev dependencies actually."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3507.56,
   "end": 3508.56,
   "text": " Is that a good idea Luciano?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3508.56,
   "end": 3512.56,
   "text": " Or should we be installing these as top level dependencies?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3512.56,
   "end": 3518.8,
   "text": ""
  },
  {
   "speakerLabel": "spk_0",
   "start": 3518.8,
   "end": 3522,
   "text": " I would probably consider this top level dependencies because they need to be available when we run our code in production, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3522,
   "end": 3527.8,
   "text": " It's not just something we use for building or for testing."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3527.8,
   "end": 3534.1600000000003,
   "text": " And Lambda does provide the AWS SDK in the runtime, but if you want to be sure that you're"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3534.1600000000003,
   "end": 3539.2400000000002,
   "text": " pinning to a specific version that you've tested with, this is a good practice."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3539.2400000000002,
   "end": 3540.92,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3540.92,
   "end": 3549.36,
   "text": " So now that we've got that, let's set about importing these and getting to use our S3"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3549.36,
   "end": 3550.36,
   "text": " client."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3550.36,
   "end": 3551.36,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3551.36,
   "end": 3555.6000000000004,
   "text": " So there's, the first thing we need to do is get our S3 client."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3555.6,
   "end": 3559.24,
   "text": " So the syntax for that is S3 client."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3559.24,
   "end": 3564.6,
   "text": " There's a couple of ways you can use the AWS SDK version three, one of which is very similar"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3564.6,
   "end": 3569.44,
   "text": " to SDK version two."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3569.44,
   "end": 3575.12,
   "text": " But the new kind of idiomatic way to do it with the version three client is with the"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3575.12,
   "end": 3576.68,
   "text": " command pattern."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3576.68,
   "end": 3583.56,
   "text": " So if you want to be able to create, get an object from S3 or put an object, then you're"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3583.56,
   "end": 3590.18,
   "text": " basically sending a command to get object command or put object command to the S3 service."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3590.18,
   "end": 3599.2799999999997,
   "text": " So let's import the classes we need to do that from the S3 client module."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3599.2799999999997,
   "end": 3605.22,
   "text": " And even though we're not doing the upload or the download in this handler, we're generating"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3605.22,
   "end": 3610.52,
   "text": " a presigned URL, but the presigned URL needs to know what is the command that this URL"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3610.52,
   "end": 3613.34,
   "text": " will ultimately fulfill."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3613.34,
   "end": 3617.2400000000002,
   "text": " So that's the pattern we're following here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3617.2400000000002,
   "end": 3618.6800000000003,
   "text": " So let's just have a quick look."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3618.6800000000003,
   "end": 3625.26,
   "text": " Maybe we'll do the download URL first."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3625.26,
   "end": 3632.2000000000003,
   "text": " So maybe what we can do is just have a look at the syntax of the get object command."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3632.2000000000003,
   "end": 3641.1800000000003,
   "text": " So let's say we create this command, get object command."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3641.18,
   "end": 3646.1,
   "text": " So we're creating a new instance of this get object command that needs the properties that"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3646.1,
   "end": 3649.6,
   "text": " get object command accepts, which is going to be a bucket."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3649.6,
   "end": 3651.8999999999996,
   "text": " So we need to figure out what our bucket name is."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3651.8999999999996,
   "end": 3656.9199999999996,
   "text": " I'm going to suggest that we take that from an environment variable, and then we're going"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3656.9199999999996,
   "end": 3658.7599999999998,
   "text": " to need a key."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3658.7599999999998,
   "end": 3662.3799999999997,
   "text": " So the key is the path to this file."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3662.3799999999997,
   "end": 3664.8199999999997,
   "text": " So we're missing a couple of things here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3664.8199999999997,
   "end": 3666.8199999999997,
   "text": " We've got red lines all over the place."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3666.82,
   "end": 3671.94,
   "text": " So what we need to do is make sure we import the environment variable so we can take that"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3671.94,
   "end": 3680.1000000000004,
   "text": " from process.env."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3680.1000000000004,
   "end": 3682.06,
   "text": " And the key is something we can generate."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3682.06,
   "end": 3684.54,
   "text": " So let's figure out how we would generate that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3684.54,
   "end": 3693.34,
   "text": " I think it makes sense to use like a UUID, like you have version 4 UUID for that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3693.34,
   "end": 3696.5,
   "text": " And there's a new, you don't need to install a third party dependency for that anymore"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3696.5,
   "end": 3698.06,
   "text": " in Node.js, do you?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3698.06,
   "end": 3703.12,
   "text": " Yeah, I think since node 14 or 16, I'm not sure."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3703.12,
   "end": 3707.42,
   "text": " But yeah, you have now built in functionality in the crypto module."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3707.42,
   "end": 3708.42,
   "text": " Excellent."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3708.42,
   "end": 3713.26,
   "text": " Can I ask you a question, Luciano, because I don't know the answer to this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3713.26,
   "end": 3716.26,
   "text": " I saw that I had two autocomplete options here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3716.26,
   "end": 3720.14,
   "text": " One was crypto and one was node crypto."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3720.14,
   "end": 3724.08,
   "text": " And I've seen people use both, but I'm not sure what the difference is."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3724.08,
   "end": 3725.08,
   "text": " To be honest."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3725.08,
   "end": 3726.08,
   "text": " Can you clarify?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3726.08,
   "end": 3731.86,
   "text": " Yeah, node column crypto is the recommended way, I would say right now, because the idea"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3731.86,
   "end": 3740.42,
   "text": " is that the module resolution algorithm, the way that it does to resolve a package is by"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3740.42,
   "end": 3743.7799999999997,
   "text": " giving precedence to whatever you have in your node modules."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3743.7799999999997,
   "end": 3749.1,
   "text": " So for instance, if you install a third party module called crypto, then you end up importing"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3749.1,
   "end": 3751.3199999999997,
   "text": " something that is not the node core crypto."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3751.32,
   "end": 3756.38,
   "text": " So by doing node column crypto, you are kind of explicitly saying, I want to use the node"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3756.38,
   "end": 3757.38,
   "text": " JS one."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3757.38,
   "end": 3763.5,
   "text": " Like in reality, this is not a very common problem, but because it has been a problem"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3763.5,
   "end": 3768.9,
   "text": " and it will be very hard to debug otherwise, I think this is why we have now this new best"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3768.9,
   "end": 3773.6600000000003,
   "text": " practice where every day you are importing a node core module, it's better to prefix"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3773.6600000000003,
   "end": 3775.1400000000003,
   "text": " it with node column."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3775.1400000000003,
   "end": 3776.1400000000003,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3776.1400000000003,
   "end": 3778.06,
   "text": " Yeah, that makes sense."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3778.06,
   "end": 3783.98,
   "text": " I guess there could be a vulnerability if you have a spelling mistake in here, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3783.98,
   "end": 3784.98,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3784.98,
   "end": 3790.82,
   "text": ""
  },
  {
   "speakerLabel": "spk_1",
   "start": 3790.82,
   "end": 3791.82,
   "text": " Because then somebody could have published some sort of supply chain attack thing to NPM."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3791.82,
   "end": 3792.82,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3792.82,
   "end": 3796.38,
   "text": " That's really good to know."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3796.38,
   "end": 3797.38,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3797.38,
   "end": 3802.14,
   "text": " If you end up packaging a folder called crypto inside your node modules, whatever you have"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3802.14,
   "end": 3804.18,
   "text": " there is going to take precedence."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3804.18,
   "end": 3805.18,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3805.18,
   "end": 3806.18,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3806.18,
   "end": 3807.18,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3807.18,
   "end": 3815.54,
   "text": " So let's, let's generate a UUID and from that we can create a key."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3815.54,
   "end": 3822.58,
   "text": " Now we could just make the key to be the ID, but if we think about lots of uploads of hundreds,"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3822.58,
   "end": 3827.7799999999997,
   "text": " thousands, millions of files over time into the same bucket, it might not be a great user"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3827.7799999999997,
   "end": 3833.4199999999996,
   "text": " experience when you open the S3 console and you see everything in one prefix, because"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3833.42,
   "end": 3838.94,
   "text": " that's three, even though forward slashes in S3 don't really mean anything, there's"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3838.94,
   "end": 3840.78,
   "text": " no such thing as paths."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3840.78,
   "end": 3846.34,
   "text": " They're more of a, just a user friendly way of browsing through files."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3846.34,
   "end": 3851.94,
   "text": " The S3 console will use slashes as a, in the same way as you would see in a traditional"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3851.94,
   "end": 3853.78,
   "text": " file browser."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3853.78,
   "end": 3855.38,
   "text": " So maybe it's a good idea."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3855.38,
   "end": 3860.38,
   "text": " It's also, you know, there are cases if you have extremely high throughput on your bucket"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3860.38,
   "end": 3866.1400000000003,
   "text": " that S3 will try to automatically partition the bucket based on prefixes."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3866.1400000000003,
   "end": 3872.54,
   "text": " So it is good to make sure that the start of your keys have kind of an even distribution"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3872.54,
   "end": 3881.02,
   "text": " and that helps S3 to automatically partition the bucket for you so that you can get a throughput"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3881.02,
   "end": 3883.6600000000003,
   "text": " allocation per partition."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3883.6600000000003,
   "end": 3889.78,
   "text": " So let's put everything into a shares prefix, but we'll use like the first two characters"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3889.78,
   "end": 3903.78,
   "text": " of our UUID to just give us some sort of sorting or categorization."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3903.78,
   "end": 3910.1000000000004,
   "text": " Remember this used to be very, very common when doing similar things with like network"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3910.1000000000004,
   "end": 3911.3,
   "text": " drives."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3911.3,
   "end": 3915.86,
   "text": " I think at the time there was also some, maybe depending on the file system, some performance"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3915.86,
   "end": 3918.5,
   "text": " benefit to that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3918.5,
   "end": 3922.06,
   "text": ""
  },
  {
   "speakerLabel": "spk_0",
   "start": 3922.06,
   "end": 3927.24,
   "text": " But yeah, I think as a user, as you described the user experience, it makes a lot of sense to do the same thing here as well, because I mean, if we, if we ever need to debug something"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3927.24,
   "end": 3932.86,
   "text": " where we know the UUID and we want to go in the S3 console to see the file, we know we"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3932.86,
   "end": 3937.62,
   "text": " need to click twice to see that file rather than scrolling across potentially millions"
  },
  {
   "speakerLabel": "spk_0",
   "start": 3937.62,
   "end": 3939.22,
   "text": " of items."
  },
  {
   "speakerLabel": "spk_0",
   "start": 3939.22,
   "end": 3940.46,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3940.46,
   "end": 3941.82,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3941.82,
   "end": 3943.14,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3943.14,
   "end": 3950.7799999999997,
   "text": " So we've got a key that allows us to create the get command."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3950.7799999999997,
   "end": 3954.46,
   "text": " And from that get command, we can create a URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3954.46,
   "end": 3960.7,
   "text": " So this will allow us to create a retrieval URL for our users to use."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3960.7,
   "end": 3966.1,
   "text": " So what we can do for that is the, we're going to start using the presigned URL module that"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3966.1,
   "end": 3969.42,
   "text": " we already added into our node modules."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3969.42,
   "end": 3970.42,
   "text": " There is a separate."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3970.42,
   "end": 3977.2200000000003,
   "text": " So it's a separate module, we need to import that separately."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3977.2200000000003,
   "end": 3982.98,
   "text": " So this is the AWS SDK S3 request presigner and the function we're going to use is called"
  },
  {
   "speakerLabel": "spk_1",
   "start": 3982.98,
   "end": 3987.82,
   "text": " get signed URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3987.82,
   "end": 3990.34,
   "text": " These are asynchronous functions."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3990.34,
   "end": 3992.02,
   "text": " They're going to return a promise."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3992.02,
   "end": 3999.84,
   "text": " So we're a way to get signed URL and we need to pass in the command that we created."
  },
  {
   "speakerLabel": "spk_1",
   "start": 3999.84,
   "end": 4005.58,
   "text": " So the function, you can see the function signature here is we need an S3 client and"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4005.58,
   "end": 4007.26,
   "text": " we need a command."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4007.26,
   "end": 4015.02,
   "text": " So let's pass in S3 client, our get command and our properties."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4015.02,
   "end": 4021.6400000000003,
   "text": " So the properties that are kind of important here are the expiry."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4021.6400000000003,
   "end": 4025.94,
   "text": " So how long is this temporary presigned URL going to last for?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4025.94,
   "end": 4029.44,
   "text": " You want to make sure that it's long enough that people get to upload their content by"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4029.44,
   "end": 4035.82,
   "text": " the time you send it to them, but not so long that maybe somebody could grab it and intervene."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4035.82,
   "end": 4044.58,
   "text": " So maybe we'll just create a constant at the top of our file that gives us some sort of"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4044.58,
   "end": 4047.06,
   "text": " default expiration."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4047.06,
   "end": 4055.26,
   "text": " And I think maybe 24 hours seems like a good value to start with."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4055.26,
   "end": 4057.68,
   "text": " The value is in seconds."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4057.68,
   "end": 4064.98,
   "text": " So that will allow us to have URLs that last for a day."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4064.98,
   "end": 4065.98,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4065.98,
   "end": 4067.8799999999997,
   "text": " So we don't have an S3 client."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4067.8799999999997,
   "end": 4069.1,
   "text": " We can create one."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4069.1,
   "end": 4071.7599999999998,
   "text": " And that's fairly straightforward."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4071.7599999999998,
   "end": 4078.7799999999997,
   "text": " We can just do that outside the handler because it can be reused for multiple Lambda function"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4078.7799999999997,
   "end": 4081.8799999999997,
   "text": " invocations."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4081.88,
   "end": 4088.56,
   "text": " So all of the code that's outside the handler is going to get evaluated when the function"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4088.56,
   "end": 4089.94,
   "text": " is loaded for the first time."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4089.94,
   "end": 4095.84,
   "text": " So in cold start phase of your Lambda, everything within the handler is going to be evaluated"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4095.84,
   "end": 4097.74,
   "text": " every time an event comes in."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4097.74,
   "end": 4100.64,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4100.64,
   "end": 4106.12,
   "text": " So now we've got a retrieval URL and the process for an upload URL is going to be very similar."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4106.12,
   "end": 4113.08,
   "text": " So much so that I'm just going to copy paste and change everything from get to put."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4113.08,
   "end": 4119.78,
   "text": " So we'll need a put command, which will use the same bucket and key because we have to"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4119.78,
   "end": 4124.4,
   "text": " put it to that key before we get it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4124.4,
   "end": 4130.04,
   "text": " And let's change the name of this to upload URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4130.04,
   "end": 4133.08,
   "text": " And that will use the put command."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4133.08,
   "end": 4134.5599999999995,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4134.56,
   "end": 4137.700000000001,
   "text": " So I think now we have everything we need to give our users."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4137.700000000001,
   "end": 4142.080000000001,
   "text": " I think it's also interesting that you can specify two different expiries for the upload"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4142.080000000001,
   "end": 4143.4400000000005,
   "text": " and download."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4143.4400000000005,
   "end": 4148.52,
   "text": " Maybe you would want in real life the upload window to be very small while the download"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4148.52,
   "end": 4150.76,
   "text": " can be even a week, I suppose."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4150.76,
   "end": 4151.76,
   "text": " Right."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4151.76,
   "end": 4152.76,
   "text": " That's a good idea."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4152.76,
   "end": 4153.76,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4153.76,
   "end": 4159.240000000001,
   "text": " But for now it makes sense to keep it the same because we can optimize it later."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4159.240000000001,
   "end": 4160.240000000001,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4160.24,
   "end": 4164.88,
   "text": " Now, since this is our MVP and we don't have a command line interface, we don't have a"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4164.88,
   "end": 4170.719999999999,
   "text": " web interface, we're giving our poor users two really ugly URLs."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4170.719999999999,
   "end": 4173.44,
   "text": " It probably makes sense that we don't return any JSON here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4173.44,
   "end": 4178.44,
   "text": " We can just return some instructions and the two URLs that they can use."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4178.44,
   "end": 4184.48,
   "text": " So we know that they could use something like curl as a command line interface to upload"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4184.48,
   "end": 4186.36,
   "text": " and download their files."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4186.36,
   "end": 4191.08,
   "text": " So maybe we can just give those instructions in the output."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4191.08,
   "end": 4198.799999999999,
   "text": " So the upload would be curl and with curl, we can do minus X put, because this is a put"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4198.799999999999,
   "end": 4200.94,
   "text": " command to upload."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4200.94,
   "end": 4207.2,
   "text": " So we need to specify the put method, put HTTP method, and then they can specify the"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4207.2,
   "end": 4214.5599999999995,
   "text": " file name and the upload URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4214.56,
   "end": 4218.42,
   "text": " So that's the upload instruction for the user."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4218.42,
   "end": 4226.320000000001,
   "text": " And we can say download with curl download URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4226.320000000001,
   "end": 4228.6,
   "text": " I didn't call it download URL, did I?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4228.6,
   "end": 4231.6,
   "text": " Called it retrieval URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4231.6,
   "end": 4232.88,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4232.88,
   "end": 4236.240000000001,
   "text": " Good catch."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4236.240000000001,
   "end": 4237.8,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4237.8,
   "end": 4245.88,
   "text": " So I think we have a function so we can export that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4245.88,
   "end": 4250.88,
   "text": " Yeah, we need to export."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4250.88,
   "end": 4251.88,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4251.88,
   "end": 4256.88,
   "text": " Actually the..."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4256.88,
   "end": 4259.84,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4259.84,
   "end": 4274.08,
   "text": " I generally prefer to just say export function at the top and not even use the arrow function."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4274.08,
   "end": 4280.360000000001,
   "text": " I think the, yeah, I'm thinking ahead to one of the ideas we have to improve this, which"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4280.360000000001,
   "end": 4281.360000000001,
   "text": " is to use MIDI."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4281.360000000001,
   "end": 4285.28,
   "text": " And in that case, we'll do it in two separate steps."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4285.28,
   "end": 4291.759999999999,
   "text": " But okay, this is good and there's a couple of things we added here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4291.759999999999,
   "end": 4295.42,
   "text": " So we added some interactions with S3, which means we're going to need permissions."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4295.42,
   "end": 4298.04,
   "text": " We also added an environment variable usage."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4298.04,
   "end": 4301.5599999999995,
   "text": " So before this is going to work, we need to go back to our serverless.yaml and do some"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4301.5599999999995,
   "end": 4302.5599999999995,
   "text": " changes."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4302.5599999999995,
   "end": 4307.84,
   "text": " Also, before we forget, I think we also need to specify type modules inside the package"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4307.84,
   "end": 4311.28,
   "text": " JSON of the backend."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4311.28,
   "end": 4314.4,
   "text": " Because I think this is what AWS will see."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4314.4,
   "end": 4318.08,
   "text": " AWS is not going to see the top one we have created."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4318.08,
   "end": 4319.08,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4319.08,
   "end": 4320.08,
   "text": " Good call."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4320.08,
   "end": 4322.4,
   "text": " So it looks like that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4322.4,
   "end": 4323.4,
   "text": " Is that correct?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4323.4,
   "end": 4326,
   "text": " I think so, yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4326,
   "end": 4327,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4327,
   "end": 4328,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4328,
   "end": 4329.599999999999,
   "text": " So let's add some environment variables."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4329.599999999999,
   "end": 4332.24,
   "text": " So we've got..."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4332.24,
   "end": 4336,
   "text": " We could do this per function, but I think since everything is going to be centered around"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4336,
   "end": 4338.24,
   "text": " this bucket, we can do this globally."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4338.24,
   "end": 4341.16,
   "text": " So it will be applied to all functions."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4341.16,
   "end": 4344.38,
   "text": " And we want to say that every function will receive an environment variable called bucket"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4344.38,
   "end": 4345.88,
   "text": " name."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4345.88,
   "end": 4351.96,
   "text": " So in order to pick up that bucket name, it has to use the variable that Luciano created"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4351.96,
   "end": 4354.78,
   "text": " with that clever unique bucket name."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4354.78,
   "end": 4361.639999999999,
   "text": " But we can also use the CloudFormation syntax to retrieve the name of the bucket."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4361.639999999999,
   "end": 4367.72,
   "text": " So the shorthand for that looks like this ref file bucket."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4367.72,
   "end": 4376.240000000001,
   "text": " And if you look in the CloudFormation documentation for AWS S3 bucket, it will tell you that every"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4376.240000000001,
   "end": 4379.8,
   "text": " CloudFormation resource outputs a reference."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4379.8,
   "end": 4383.820000000001,
   "text": " And for buckets, that reference is the bucket name."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4383.820000000001,
   "end": 4385.84,
   "text": " It's not consistent across all the different resources."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4385.84,
   "end": 4388.52,
   "text": " Sometimes it's an ARN or something else."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4388.52,
   "end": 4391.96,
   "text": " For buckets, we know this is a way to get the bucket name."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4391.96,
   "end": 4394.08,
   "text": " So that should work nicely."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4394.08,
   "end": 4399.4,
   "text": " I think for buckets, it kind of makes sense because it's guaranteed to be unique anyway."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4399.4,
   "end": 4402.44,
   "text": " Like an ARN is always unique."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4402.44,
   "end": 4404.04,
   "text": " Bucket name is always unique as well."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4404.04,
   "end": 4409.16,
   "text": " Again, it's not consistent, but if you think about uniqueness, it makes sense."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4409.16,
   "end": 4410.16,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4410.16,
   "end": 4411.16,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4411.16,
   "end": 4417.64,
   "text": " Now, when we are adding in IAM permissions, the way I like to do it is using the IAM roles"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4417.64,
   "end": 4420.5199999999995,
   "text": " per function serverless plugin."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4420.52,
   "end": 4426.72,
   "text": " So let's add in this plugin into our configuration here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4426.72,
   "end": 4434.14,
   "text": " So the way to do that, there is a serverless native way to do that, but I'd like to just"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4434.14,
   "end": 4436.02,
   "text": " do it explicitly with NPM."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4436.02,
   "end": 4441.320000000001,
   "text": " So we'll do NPM install, and this is a development dependency."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4441.320000000001,
   "end": 4444.88,
   "text": " And the name of the plugin is serverless IAM roles per function."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4444.88,
   "end": 4448.68,
   "text": " And this allows you to kind of honor the principle of least privilege by having a separate set"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4448.68,
   "end": 4455.280000000001,
   "text": " of IAM policy statements for every single function."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4455.280000000001,
   "end": 4462.320000000001,
   "text": " So at the top of our serverless.yaml, then we need to declare our plugins array, and"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4462.320000000001,
   "end": 4465.92,
   "text": " we just add in the module we've installed."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4465.92,
   "end": 4471.56,
   "text": " So this is a plugin that's going to get hooked into the lifecycle when we run serverless"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4471.56,
   "end": 4473.88,
   "text": " package or serverless deploy."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4473.88,
   "end": 4483.04,
   "text": " And it will pick up the IAM policy statements for each individual function."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4483.04,
   "end": 4484.88,
   "text": " So let's start writing this then."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4484.88,
   "end": 4491.02,
   "text": " So the syntax is to declare IAM role statements inside the function instead of at the provider"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4491.02,
   "end": 4492.28,
   "text": " level."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4492.28,
   "end": 4497.1,
   "text": " And then we need to start creating some statements for an IAM role for this function."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4497.1,
   "end": 4502.56,
   "text": " So this is the set of, this is the policy that the function will run with."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4502.56,
   "end": 4508.360000000001,
   "text": " So every time an event comes in the API, the execution of that Lambda function or the code"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4508.360000000001,
   "end": 4513.76,
   "text": " within it will be run within this role."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4513.76,
   "end": 4519.200000000001,
   "text": " So we want to allow, we need to allow the permissions that we're giving the signed URLs"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4519.200000000001,
   "end": 4522.88,
   "text": " because we're using the get object command, the put object command, we need permissions"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4522.88,
   "end": 4525.580000000001,
   "text": " to do those things."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4525.58,
   "end": 4537.36,
   "text": " So the actions we want are S3 get object and S3 put object."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4537.36,
   "end": 4551.32,
   "text": " And we'll try to be as specific as we possibly can be for this MVP."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4551.32,
   "end": 4559.12,
   "text": " So what we can do here is we essentially want for the resource identifier should be the"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4559.12,
   "end": 4562.679999999999,
   "text": " ARN of the bucket with the prefix attached to it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4562.679999999999,
   "end": 4567,
   "text": " So it's going to be something like ARN, AWS, S3."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4567,
   "end": 4573.2,
   "text": " You don't need to specify the account or the region because those things are, you know,"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4573.2,
   "end": 4576.08,
   "text": " as Luciano said, it's globally unique."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4576.08,
   "end": 4578.24,
   "text": " Then we'll need here the bucket name."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4578.24,
   "end": 4583.08,
   "text": " So that's a placeholder for now, and then the path, which is shares."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4583.08,
   "end": 4587,
   "text": " We set everything with the go and shares after that it's pretty much random."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4587,
   "end": 4594.32,
   "text": " So we need a wildcard and we can also make use of another CloudFormation intrinsic function"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4594.32,
   "end": 4597.92,
   "text": " with the short term syntax sub."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4597.92,
   "end": 4605.16,
   "text": " And this is basically saying to CloudFormation substitute variables inside that with some"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4605.16,
   "end": 4607.8,
   "text": " resolved value."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4607.8,
   "end": 4616.52,
   "text": " So instead of bucket name, we can just put in file bucket and CloudFormation is going"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4616.52,
   "end": 4620.64,
   "text": " to take the reference of that file bucket, which is the bucket name and pop it in here"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4620.64,
   "end": 4621.64,
   "text": " in its place."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4621.64,
   "end": 4623.64,
   "text": " So that should be enough."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4623.64,
   "end": 4624.64,
   "text": " Yep."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4624.64,
   "end": 4628.92,
   "text": " One thing that is worth mentioning, I don't know if we made that very clear."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4628.92,
   "end": 4633.4800000000005,
   "text": " And again, this is more for people that are trying to do AWS for the first time that in"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4633.48,
   "end": 4639.7,
   "text": " AWS, everything is by default, it's like blacklisted, like you cannot do anything."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4639.7,
   "end": 4644.86,
   "text": " So if we were not adding this policy, what will happen at runtime is that our Lambda"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4644.86,
   "end": 4649.98,
   "text": " will fail as soon as it's going to try to do a get object or a put object operation,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4649.98,
   "end": 4652.379999999999,
   "text": " because it doesn't have permission to do that."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4652.379999999999,
   "end": 4656.24,
   "text": " Now that we added this policy, what's going to happen is that the Lambda is going to run"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4656.24,
   "end": 4663.5599999999995,
   "text": " in a context where we authorized the action of get object and put object only in those"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4663.5599999999995,
   "end": 4667.92,
   "text": " specific resources that match this particular expression here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4667.92,
   "end": 4672.599999999999,
   "text": " So everything inside our bucket, the start switch shares, and then whatever the file"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4672.599999999999,
   "end": 4673.599999999999,
   "text": " name."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4673.599999999999,
   "end": 4674.599999999999,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4674.599999999999,
   "end": 4679.08,
   "text": " Yeah, that's a really good point."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4679.08,
   "end": 4687.12,
   "text": " And the other action we'll need is, well, we don't need it actually."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4687.12,
   "end": 4693.76,
   "text": " I was just thinking you could also add a list bucket permission."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4693.76,
   "end": 4698.6,
   "text": " Whether we do it or not, it doesn't really make a massive difference for this application,"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4698.6,
   "end": 4702.8,
   "text": " but you could also allow users to list the bucket."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4702.8,
   "end": 4709,
   "text": " Why would you need a Lambda function that only gets or puts permissions to list bucket?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4709,
   "end": 4714.08,
   "text": " Well, the advantage of that, and we just use the ARN directly like this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4714.08,
   "end": 4717.84,
   "text": " The advantage of that is it means that if you try to get an object that doesn't exist,"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4717.84,
   "end": 4721.08,
   "text": " it will give you a 404 instead of a 403 error."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4721.08,
   "end": 4728.94,
   "text": " So it'll give you a not found response instead of a permissions error."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4728.94,
   "end": 4732.44,
   "text": " Because if you don't have permissions to list bucket, then it's not going to tell you whether"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4732.44,
   "end": 4738.22,
   "text": " the object can't be retrieved because it doesn't exist or because you don't have permissions"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4738.22,
   "end": 4740.400000000001,
   "text": " to read it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4740.400000000001,
   "end": 4745.280000000001,
   "text": " And I think that's everything we need."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4745.280000000001,
   "end": 4747.12,
   "text": " Luciano, have I missed anything?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4747.12,
   "end": 4749.92,
   "text": " Are we ready to give this a run and try and deploy it?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4749.92,
   "end": 4753.320000000001,
   "text": " I think we can try deploying it and see if it works."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4753.320000000001,
   "end": 4754.320000000001,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4754.320000000001,
   "end": 4755.320000000001,
   "text": " Exciting times."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4755.320000000001,
   "end": 4756.54,
   "text": " So let's do this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4756.54,
   "end": 4761.52,
   "text": " So I'm going to run serverless deploy within the backend folder."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4761.52,
   "end": 4765.88,
   "text": " Maybe I'll give it just some trepidation here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4765.88,
   "end": 4770.08,
   "text": " I'm just going to try package."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4770.08,
   "end": 4774.28,
   "text": " We already have a validation error because it says I put in the word event."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4774.28,
   "end": 4779,
   "text": " I think what I need there is events, plural."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4779,
   "end": 4784.28,
   "text": " It's good that we get this kind of validation from serverless."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4784.28,
   "end": 4787.08,
   "text": " This would have been tricky to debug otherwise."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4787.08,
   "end": 4788.08,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4788.08,
   "end": 4789.74,
   "text": " And it's pretty new."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4789.74,
   "end": 4791.36,
   "text": " It's only around the last year, I think."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4791.36,
   "end": 4794.4400000000005,
   "text": " So this validation has been there, but it's really good."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4794.4400000000005,
   "end": 4795.4400000000005,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4795.44,
   "end": 4796.44,
   "text": " So that's all the information that has been packaged."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4796.44,
   "end": 4800.96,
   "text": " Let's have a quick look at our generated CloudFormation."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4800.96,
   "end": 4802.28,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4802.28,
   "end": 4808.44,
   "text": " So now we can see that serverless framework is starting to really take over and do a lot"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4808.44,
   "end": 4813.2,
   "text": " of work here, like creating a CloudFormation log group, or sorry, a CloudWatch logs group"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4813.2,
   "end": 4814.96,
   "text": " log group for us."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4814.96,
   "end": 4815.96,
   "text": " It's creating our role."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4815.96,
   "end": 4817.599999999999,
   "text": " So let's have a look at that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4817.599999999999,
   "end": 4822.24,
   "text": " The role can then be assumed by Lambda, which is important."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4822.24,
   "end": 4831.24,
   "text": " It has permissions to create logs."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4831.24,
   "end": 4836.28,
   "text": " One thing that I would like to mention there is that this is where we see the advantage"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4836.28,
   "end": 4841,
   "text": " of serverless framework, because if we were doing the same thing with something like,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4841,
   "end": 4846.5599999999995,
   "text": " I don't know, Terraform or CloudFormation directly, you don't get anything for free."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4846.5599999999995,
   "end": 4851.24,
   "text": " Like you really need to know, okay, to create a Lambda, I need to create a role."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4851.24,
   "end": 4855.44,
   "text": " Then I need to create a log group, which are things that you always do all the time because"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4855.44,
   "end": 4858.28,
   "text": " they are required for the Lambda to run."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4858.28,
   "end": 4862.679999999999,
   "text": " So with serverless framework, we are actually getting all this stuff being created for us"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4862.679999999999,
   "end": 4869.04,
   "text": " for free using best practices, rather than having to copy paste all the stuff every time."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4869.04,
   "end": 4870.04,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4870.04,
   "end": 4874.04,
   "text": " That's a really good point."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4874.04,
   "end": 4875.04,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4875.04,
   "end": 4881.099999999999,
   "text": " While we're on this topic, actually, one of the points that Juan has mentioned on the"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4881.1,
   "end": 4886.360000000001,
   "text": " YouTube chat is what is the best way to test locally?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4886.360000000001,
   "end": 4892.320000000001,
   "text": " And it's probably almost something that could be an episode in its own right."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4892.320000000001,
   "end": 4895.4800000000005,
   "text": " You can definitely test these."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4895.4800000000005,
   "end": 4900,
   "text": " I think you need maybe to cover this topic very briefly."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4900,
   "end": 4904.240000000001,
   "text": " You can test using, you need to write unit tests anyway to test your handlers and to"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4904.240000000001,
   "end": 4906.160000000001,
   "text": " test the code within those handlers."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4906.16,
   "end": 4911.48,
   "text": " We've done it in a fairly simple way because we've got a very simple function today."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4911.48,
   "end": 4917.86,
   "text": " But you can also use now with AWS STK version 3, you can also use their mocks."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4917.86,
   "end": 4925.16,
   "text": " You can, because we're using serverless framework, you can use local simulation of the API gateway"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4925.16,
   "end": 4930.8,
   "text": " and Lambda in order to test things a little bit more end to end before you deploy."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4930.8,
   "end": 4937.400000000001,
   "text": " But once you've tested your code, unit tested your code, you want to get it into AWS and"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4937.400000000001,
   "end": 4940.74,
   "text": " test on AWS as quickly as possible and then start doing things like integration tests"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4940.74,
   "end": 4944.3,
   "text": " and end to end tests for a real world application."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4944.3,
   "end": 4948.6,
   "text": " Because the local simulations can be very useful from time to time, but there's always"
  },
  {
   "speakerLabel": "spk_1",
   "start": 4948.6,
   "end": 4953.88,
   "text": " a point at which there are limitations you can't overcome."
  },
  {
   "speakerLabel": "spk_1",
   "start": 4953.88,
   "end": 4954.88,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4954.88,
   "end": 4960.72,
   "text": " For instance, here you start to bump into this kind of philosophical questions."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4960.72,
   "end": 4966.08,
   "text": " Okay, if I run things locally, should I test against the real S3 or should I simulate S3"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4966.08,
   "end": 4967.56,
   "text": " as well locally?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4967.56,
   "end": 4973.2,
   "text": " And there are ways to simulate S3 locally, but as Eoin said, the degree of fidelity might"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4973.2,
   "end": 4976.54,
   "text": " vary depending on what kind of features we are going to use."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4976.54,
   "end": 4981.12,
   "text": " So for simple use cases, maybe everything works as expected."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4981.12,
   "end": 4985.360000000001,
   "text": " For as soon as you start to use more advanced features, you might start to bump into discrepancies"
  },
  {
   "speakerLabel": "spk_0",
   "start": 4985.360000000001,
   "end": 4990.52,
   "text": " and you might have this kind of false sense of security because everything works locally."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4990.52,
   "end": 4994,
   "text": " Then you test it remotely and you bump into issues."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4994,
   "end": 4997.160000000001,
   "text": " Another thing that is also very interesting is permissions."
  },
  {
   "speakerLabel": "spk_0",
   "start": 4997.160000000001,
   "end": 5002.52,
   "text": " When you test things locally, you end up using the permissions that you have as a user most"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5002.52,
   "end": 5004.740000000001,
   "text": " of the time, depending on which tool do you use."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5004.740000000001,
   "end": 5009.6,
   "text": " But most of the time, all the tools, they will use your own local credentials."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5009.6,
   "end": 5013.080000000001,
   "text": " And generally you have very broad credentials as an admin, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5013.080000000001,
   "end": 5017.280000000001,
   "text": " Because when you are deploying, you need a large set of credentials."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5017.28,
   "end": 5021.44,
   "text": " So you simulate your code with this large set of credentials and you don't realize that"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5021.44,
   "end": 5024.5,
   "text": " you haven't specified your policies correctly."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5024.5,
   "end": 5028.32,
   "text": " So yeah, that's another use case that I've seen a lot of people test it locally, everything"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5028.32,
   "end": 5032.9,
   "text": " works, then deploy, run it for the first time and they have a permission error and they"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5032.9,
   "end": 5035.28,
   "text": " have to revisit their own permissions."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5035.28,
   "end": 5039.719999999999,
   "text": " So I think it's still a very open debate whether you should try everything you can to test"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5039.719999999999,
   "end": 5045.08,
   "text": " locally or whether you should go as fast as possible to a real AWS environment and test"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5045.08,
   "end": 5046.719999999999,
   "text": " it there."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5046.72,
   "end": 5051.96,
   "text": " Usually there is some kind of middle ground that gives you benefits, but yeah, for this"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5051.96,
   "end": 5056.04,
   "text": " simple use case, I think it's just easier to try to deploy remotely and see if it works"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5056.04,
   "end": 5057.04,
   "text": " that way."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5057.04,
   "end": 5058.04,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5058.04,
   "end": 5059.04,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5059.04,
   "end": 5066.320000000001,
   "text": " Feel free to disagree with our opinion if you know better ways of testing this locally."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5066.320000000001,
   "end": 5068.400000000001,
   "text": " Yeah, of course."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5068.400000000001,
   "end": 5074.72,
   "text": " Yeah, so we can see in the clip generator information then we've got the API gateway"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5074.72,
   "end": 5084.92,
   "text": " resources, including the integration routes."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5084.92,
   "end": 5087.740000000001,
   "text": " And then we can see actually the specific policy that's been generated."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5087.740000000001,
   "end": 5093.54,
   "text": " So this is the one that's been generated by the IAM roles per function plugin and it's"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5093.54,
   "end": 5098,
   "text": " got our, as well as permission to create logs, it's got the get object and put object on"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5098,
   "end": 5099.6,
   "text": " this bucket."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5099.6,
   "end": 5103.84,
   "text": " So I think let's go ahead and try and deploy this because we need to, and I have some time"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5103.84,
   "end": 5112.56,
   "text": " in case we've made any further typos or mistakes in the code."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5112.56,
   "end": 5113.56,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5113.56,
   "end": 5115.88,
   "text": " So this is deploying to CloudFormation now."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5115.88,
   "end": 5121.32,
   "text": " Let's have a flick into the CloudFormation console where we can see the stack."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5121.32,
   "end": 5125.78,
   "text": " This is from the time Luciano created it previously."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5125.78,
   "end": 5131.76,
   "text": " We should see that it's doing an update."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5131.76,
   "end": 5135.68,
   "text": " I don't see it update yet."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5135.68,
   "end": 5139.4400000000005,
   "text": " It says creating CloudFormation stack, which is slightly concerning."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5139.4400000000005,
   "end": 5142.16,
   "text": " I would have expected it to."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5142.16,
   "end": 5144.76,
   "text": " Hopefully you are not deploying to another account."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5144.76,
   "end": 5145.96,
   "text": " Let's see."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5145.96,
   "end": 5149,
   "text": " It could be."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5149,
   "end": 5159.84,
   "text": " I don't think so, but let me check here because I think I have a, yeah, this is the right"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5159.84,
   "end": 5163.400000000001,
   "text": " account here, so maybe what I can do."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5163.400000000001,
   "end": 5167.04,
   "text": " I have, yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5167.04,
   "end": 5176.88,
   "text": " I'm just going to pause this other one here and check if that was the same account."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5176.88,
   "end": 5182.24,
   "text": " Yeah, it's the same account."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5182.24,
   "end": 5186.72,
   "text": " Maybe a different region, but that shouldn't be the case because we are to call it in our"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5186.72,
   "end": 5187.72,
   "text": " serverless frame."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5187.72,
   "end": 5190.280000000001,
   "text": " It shouldn't be the case."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5190.280000000001,
   "end": 5191.76,
   "text": " So the account is the same."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5191.76,
   "end": 5192.76,
   "text": " What did we change?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5192.76,
   "end": 5196.76,
   "text": " Did I change the name of the stack or something inadvertently?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5196.76,
   "end": 5204.64,
   "text": " But I don't see any other stack being deployed here either."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5204.64,
   "end": 5207.04,
   "text": " Are we using the same account?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5207.04,
   "end": 5210.240000000001,
   "text": " Good question."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5210.240000000001,
   "end": 5214.56,
   "text": " Let me check."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5214.56,
   "end": 5217.84,
   "text": " We are, because this is definitely from your deployment, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5217.84,
   "end": 5218.84,
   "text": " Yes."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5218.84,
   "end": 5219.84,
   "text": " This is the right time."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5219.84,
   "end": 5231.6,
   "text": " Let me give it a full browser refresh for good luck."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5231.6,
   "end": 5235.4400000000005,
   "text": " This is where we show the joys of debugging on AWS."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5235.4400000000005,
   "end": 5236.4400000000005,
   "text": " Wow."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5236.4400000000005,
   "end": 5241.360000000001,
   "text": " Well, it has deployed somewhere."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5241.36,
   "end": 5246.4,
   "text": " Okay, so let me check this identity again."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5246.4,
   "end": 5247.5599999999995,
   "text": " I mean, it makes sense."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5247.5599999999995,
   "end": 5252.4,
   "text": " This is the right account."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5252.4,
   "end": 5257.32,
   "text": " Yeah, this looks good."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5257.32,
   "end": 5260.759999999999,
   "text": " So the question is, what's the region?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5260.759999999999,
   "end": 5264.48,
   "text": " I'm actually using credentials that have region variables here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5264.48,
   "end": 5269.54,
   "text": " We've got AWS region, we've got AWS default region, just for good measure."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5269.54,
   "end": 5274.74,
   "text": " And we have the region defined in the serverless stack."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5274.74,
   "end": 5279.26,
   "text": " So that's EU West one, and I haven't changed its WeShare backend."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5279.26,
   "end": 5291.56,
   "text": " So the deployments deployed stack name should indeed be WeShare backend dev."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5291.56,
   "end": 5293.9,
   "text": " This is really interesting."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5293.9,
   "end": 5295.68,
   "text": " I'm going to give it one more go, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5295.68,
   "end": 5304.16,
   "text": " So what I'm going to do is I'm going to create a new terminal, a new session in my terminal,"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5304.16,
   "end": 5309.08,
   "text": " and I'm going to set up some new credentials."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5309.08,
   "end": 5324.6,
   "text": " So I'll stop screen sharing for the risk of inadvertently leaking any credentials."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5324.6,
   "end": 5329.92,
   "text": " I can already see what the problem is here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5329.92,
   "end": 5331.320000000001,
   "text": " When I'm looking at my credentials."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5331.320000000001,
   "end": 5335.84,
   "text": " Do you want to try and guess what it is?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5335.84,
   "end": 5338.360000000001,
   "text": " Maybe someone can guess what it is."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5338.360000000001,
   "end": 5341.18,
   "text": " Did we deploy to the wrong account?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5341.18,
   "end": 5344.64,
   "text": " I deployed to the wrong account just now."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5344.64,
   "end": 5349.92,
   "text": " So we're using AWS SSO, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5349.92,
   "end": 5358.08,
   "text": " So we use SSO to get credentials for our accounts and serverless framework doesn't support SSO"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5358.08,
   "end": 5360.4,
   "text": " credentials yet properly."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5360.4,
   "end": 5362.62,
   "text": " There is an issue on it in their GitHub."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5362.62,
   "end": 5366.96,
   "text": " And unfortunately the latest response I saw on that issue is that we're not going to fix"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5366.96,
   "end": 5369.14,
   "text": " it anytime soon."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5369.14,
   "end": 5373.4400000000005,
   "text": " But one of the work rounds you have to do then is use some kind of tool that takes your"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5373.4400000000005,
   "end": 5379.68,
   "text": " SSO credentials and converts them into like credentials on your file system or environment"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5379.68,
   "end": 5381.16,
   "text": " variables."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5381.16,
   "end": 5389.68,
   "text": " And I'm using the approach that uses environment variables."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5389.68,
   "end": 5396.88,
   "text": " And I can actually show you what that is."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5396.88,
   "end": 5401.240000000001,
   "text": " So I think this will work a lot better."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5401.240000000001,
   "end": 5408.88,
   "text": " I'm just going to share my screen again, because I think we're past the point of worrying about"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5408.88,
   "end": 5415,
   "text": " leaking credentials."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5415,
   "end": 5416.68,
   "text": " So this is the command I use."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5416.68,
   "end": 5421.2,
   "text": " So Ben Kehoe from iRobot wrote a couple of really useful utilities around SSO."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5421.2,
   "end": 5423.52,
   "text": " One of them is AWS export credentials."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5423.52,
   "end": 5431.12,
   "text": " And then I can specify my SSO profile and it will convert this into a set of environment"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5431.12,
   "end": 5432.9400000000005,
   "text": " variables that I can use."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5432.94,
   "end": 5439.799999999999,
   "text": " So when I call it get caller identity, when I did that previously, it was using my SSO"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5439.799999999999,
   "end": 5441.28,
   "text": " credentials."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5441.28,
   "end": 5445.08,
   "text": " But I also had an AWS profile environment variable set."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5445.08,
   "end": 5447.919999999999,
   "text": " So I actually had environment variables for two different profiles set up."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5447.919999999999,
   "end": 5450.4,
   "text": " I don't know how I managed that in this account."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5450.4,
   "end": 5453.339999999999,
   "text": " They were both my accounts."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5453.339999999999,
   "end": 5458.919999999999,
   "text": " But I think what serverless framework did was it picked up AWS profile and used that"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5458.92,
   "end": 5463.72,
   "text": " instead of the other variables."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5463.72,
   "end": 5465.6,
   "text": " Let's go back to our deployment."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5465.6,
   "end": 5470.4400000000005,
   "text": " By the way, if you're curious about these topics, we have an entire episode dedicated"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5470.4400000000005,
   "end": 5471.52,
   "text": " to credentials."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5471.52,
   "end": 5476.6,
   "text": " And I'm going to post the link here in the YouTube chat."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5476.6,
   "end": 5485.12,
   "text": " Now we can see your stack is being updated, Isilano."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5485.12,
   "end": 5490.24,
   "text": " So we can actually see the events occur, so it's creating the HTTP API resources."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5490.24,
   "end": 5501.84,
   "text": " It's creating the log group and it'll be creating the function as well."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5501.84,
   "end": 5505.28,
   "text": " So at the end of this, we'll be able to take a file, upload it to S3."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5505.28,
   "end": 5508.48,
   "text": " I'll be able to share it with you, Luciano, or anyone else."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5508.48,
   "end": 5510.24,
   "text": " And they'll be able to download it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5510.24,
   "end": 5513.78,
   "text": " That could be, you know, already this is an MVP."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5513.78,
   "end": 5517.139999999999,
   "text": " You've got ugly URLs, but already this is useful."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5517.139999999999,
   "end": 5522.32,
   "text": " If you want to share it from transferred from one laptop to another, from your mobile to"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5522.32,
   "end": 5528.48,
   "text": " laptop, vice versa, you could use this service as it is and use it as your own personal file"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5528.48,
   "end": 5530.679999999999,
   "text": " to share it with your friends."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5530.679999999999,
   "end": 5532.88,
   "text": " Now there's a couple of restrictions, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5532.88,
   "end": 5540.9,
   "text": " We've got some security issues here because anyone who gets that URL, and in fact, anyone"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5540.9,
   "end": 5547.24,
   "text": " who gets the upload URL, in fact, the API Gator URL can start creating upload URLs and"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5547.24,
   "end": 5549.0199999999995,
   "text": " putting files onto our bucket, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5549.0199999999995,
   "end": 5551.36,
   "text": " Which isn't great."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5551.36,
   "end": 5555.48,
   "text": " They could certainly do a denial of wallet attack if they wanted to by just continually"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5555.48,
   "end": 5561.179999999999,
   "text": " uploading large objects and also retrieving them because that's where you really pay because"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5561.179999999999,
   "end": 5566.099999999999,
   "text": " you have your data retrieval costs out of AWS."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5566.099999999999,
   "end": 5570.24,
   "text": " So the next thing we're going to do is start figuring out how to protect that and lock"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5570.24,
   "end": 5572.8,
   "text": " it down a little bit more."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5572.8,
   "end": 5573.8,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5573.8,
   "end": 5578.12,
   "text": " So this has been deployed and now you've got an upload URL or sorry, we've got an API URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5578.12,
   "end": 5587,
   "text": " So we can start invoking our post URI, creating a share and seeing what response we get back."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5587,
   "end": 5589.639999999999,
   "text": " So let's say clear for this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5589.639999999999,
   "end": 5594.44,
   "text": " So let's create a post to our API endpoint."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5594.44,
   "end": 5595.44,
   "text": " Aha."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5595.44,
   "end": 5599.44,
   "text": " What went wrong?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5599.44,
   "end": 5609.799999999999,
   "text": " Okay, let's give it a go."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5609.799999999999,
   "end": 5612.4,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5612.4,
   "end": 5614,
   "text": " So this is our log group."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5614,
   "end": 5620.639999999999,
   "text": " We've seen you've got a log stream here and it says we can't find package AWS SDK client"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5620.64,
   "end": 5629.4800000000005,
   "text": " S3, which in fact, if you look at the function code, there is no node modules."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5629.4800000000005,
   "end": 5630.92,
   "text": " I'm not really sure why that's the case."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5630.92,
   "end": 5640.200000000001,
   "text": " Do we need to specify something in serverless framework v3 to include dependencies?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5640.200000000001,
   "end": 5641.4400000000005,
   "text": " It's a good question."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5641.44,
   "end": 5653.679999999999,
   "text": " But what I think the, what we've got here is I guess if we look, we've got node node"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5653.679999999999,
   "end": 5654.679999999999,
   "text": " modules here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5654.679999999999,
   "end": 5656.879999999999,
   "text": " I'm just thinking about NPM workspaces."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5656.879999999999,
   "end": 5659.28,
   "text": " This has bitten me before."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5659.28,
   "end": 5666.4,
   "text": " So if we look at the parent node modules, I guess we would get AWS SDK."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5666.4,
   "end": 5674.259999999999,
   "text": " Oh, client S3 is in there."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5674.259999999999,
   "end": 5678.66,
   "text": " So I'm wondering if it's failing to pick that up, but we've did this before, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5678.66,
   "end": 5682.679999999999,
   "text": " We have checked that this would work in advance and we didn't come across this problem."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5682.679999999999,
   "end": 5683.679999999999,
   "text": " So I'm just wondering now."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5683.679999999999,
   "end": 5688.5599999999995,
   "text": " Can you try doing NPM install inside the backend folder?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5688.5599999999995,
   "end": 5689.92,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5689.92,
   "end": 5696.36,
   "text": " I don't think it's going to change anything, but I'm happy to be wrong."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5696.36,
   "end": 5701.719999999999,
   "text": " So we still don't have a node modules here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5701.719999999999,
   "end": 5704.2,
   "text": " Did you try NPM install already?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5704.2,
   "end": 5705.2,
   "text": " I did."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5705.2,
   "end": 5706.2,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5706.2,
   "end": 5707.2,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5707.2,
   "end": 5709.2,
   "text": " I didn't see that command."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5709.2,
   "end": 5711.08,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5711.08,
   "end": 5713.639999999999,
   "text": " That's interesting."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5713.639999999999,
   "end": 5718.639999999999,
   "text": " So would it be okay if I just disable the workspaces because we've only got a single"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5718.639999999999,
   "end": 5723.5199999999995,
   "text": " workspace and see if this goes away and maybe then this is, this is like a bit of homework"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5723.52,
   "end": 5727.160000000001,
   "text": " we can do for the next time to figure out how."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5727.160000000001,
   "end": 5732.96,
   "text": " Maybe there is a plugin for serverless framework to basically use the workspace definition."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5732.96,
   "end": 5733.96,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5733.96,
   "end": 5734.96,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5734.96,
   "end": 5736.84,
   "text": " That would be good."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5736.84,
   "end": 5737.84,
   "text": " So, okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5737.84,
   "end": 5738.84,
   "text": " Let's try that."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5738.84,
   "end": 5744.820000000001,
   "text": " So I think what we have to do then is edit the root package.json and remove this basically."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5744.820000000001,
   "end": 5747.200000000001,
   "text": " Remove the workspaces property."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5747.200000000001,
   "end": 5749.240000000001,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5749.24,
   "end": 5755.679999999999,
   "text": " So if I do that and I go back to the shell and I do NPM install now within backend, does"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5755.679999999999,
   "end": 5758.639999999999,
   "text": " it realize that it has its own world?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5758.639999999999,
   "end": 5759.639999999999,
   "text": " It does."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5759.639999999999,
   "end": 5760.639999999999,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5760.639999999999,
   "end": 5769.04,
   "text": " So now I've got node modules and let's just check that I've got AWS."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5769.04,
   "end": 5770.92,
   "text": " Maybe my problem is here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5770.92,
   "end": 5774.48,
   "text": " Oh, maybe we added them at the top level."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5774.48,
   "end": 5775.48,
   "text": " Interesting."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5775.48,
   "end": 5777.679999999999,
   "text": " This is a known problem, not a node problem."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5777.679999999999,
   "end": 5778.679999999999,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5778.68,
   "end": 5780.76,
   "text": " So let's put workspaces back."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5780.76,
   "end": 5784.56,
   "text": " I added it at the top level instead of the root level."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5784.56,
   "end": 5793.08,
   "text": " So let's go back to our NPM install, add them into backend."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5793.08,
   "end": 5797.6,
   "text": " I'm guessing, yeah, that's gone now because we've got workspaces back."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5797.6,
   "end": 5803.26,
   "text": " If I go back to the root, yeah, I added them in here."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5803.26,
   "end": 5807.12,
   "text": " So we could probably remove them from there."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5807.12,
   "end": 5808.400000000001,
   "text": " Yep."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5808.4,
   "end": 5811.879999999999,
   "text": " Which is NPM uninstall, right?"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5811.879999999999,
   "end": 5815.4,
   "text": " Or RM, I think as well."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5815.4,
   "end": 5816.4,
   "text": " RM."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5816.4,
   "end": 5817.4,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5817.4,
   "end": 5818.4,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5818.4,
   "end": 5823.839999999999,
   "text": " They're gone from there."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5823.839999999999,
   "end": 5826.2,
   "text": " They're in here now as primary dependencies."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5826.2,
   "end": 5828.48,
   "text": " So the AWS SDK version three, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5828.48,
   "end": 5832.839999999999,
   "text": " What I'm seeing from this, the other learning I'm getting here is that the version three"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5832.839999999999,
   "end": 5835.5599999999995,
   "text": " SDK is not packaged with the Lambda runtime."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5835.56,
   "end": 5839.4400000000005,
   "text": " Even with the version, the node 16 latest runtime."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5839.4400000000005,
   "end": 5847.68,
   "text": ""
  },
  {
   "speakerLabel": "spk_0",
   "start": 5847.68,
   "end": 5849.56,
   "text": " As far as I remember, there is a discrepancy depending on whether you use common JS or ESM modules."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5849.56,
   "end": 5855.88,
   "text": " I think if you use common JS, you might have some version package there, but your mileage"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5855.88,
   "end": 5860.88,
   "text": " might vary because it's not necessarily guaranteed to be the latest version or any specific version"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5860.88,
   "end": 5862.320000000001,
   "text": " you might get."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5862.320000000001,
   "end": 5865.080000000001,
   "text": " Whatever is the current version, the Lambda runtime."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5865.08,
   "end": 5866.08,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5866.08,
   "end": 5868.72,
   "text": " So it's always best to package your own dependencies."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5868.72,
   "end": 5874.36,
   "text": " At least you are guaranteed that you get whatever you are requesting, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5874.36,
   "end": 5875.36,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5875.36,
   "end": 5877.48,
   "text": " Yeah, I agree."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5877.48,
   "end": 5878.48,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5878.48,
   "end": 5879.48,
   "text": " Yep."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5879.48,
   "end": 5884.68,
   "text": " It's just something you should be, I guess, more conscious of now than we used to be with"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5884.68,
   "end": 5887,
   "text": " version two."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5887,
   "end": 5888.72,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5888.72,
   "end": 5897.360000000001,
   "text": " So what we can also do actually is we can use an npx sls package and inside the serverless"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5897.360000000001,
   "end": 5900.56,
   "text": " directory you have the full backend uploaded."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5900.56,
   "end": 5906.320000000001,
   "text": " Now the file size looks a little small, so let's have a look at the contents of this."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5906.320000000001,
   "end": 5907.320000000001,
   "text": " Zip."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5907.320000000001,
   "end": 5914.96,
   "text": " I'm actually looking at the files uploaded in the Lambda and we have an odd modules folder,"
  },
  {
   "speakerLabel": "spk_0",
   "start": 5914.96,
   "end": 5915.96,
   "text": " but it's empty."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5915.96,
   "end": 5918.4400000000005,
   "text": " So it's interesting."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5918.44,
   "end": 5921.28,
   "text": " I think we're still going to have some problems there."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5921.28,
   "end": 5922.5599999999995,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5922.5599999999995,
   "end": 5926.12,
   "text": " Can I go back to removing workspaces?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 5926.12,
   "end": 5929.759999999999,
   "text": " I think so, yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5929.759999999999,
   "end": 5930.759999999999,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5930.759999999999,
   "end": 5933.48,
   "text": " All right."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5933.48,
   "end": 5942.839999999999,
   "text": " So let's do another install npm install."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5942.839999999999,
   "end": 5945.4,
   "text": " I like that it works even with a typo."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5945.4,
   "end": 5946.96,
   "text": " With a typo."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5946.96,
   "end": 5947.96,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5947.96,
   "end": 5951,
   "text": " Any sub-stream, any prefix will do."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5951,
   "end": 5952,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5952,
   "end": 5956.84,
   "text": " So in node modules now it looks like we have something a bit more expected."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5956.84,
   "end": 5958.52,
   "text": " Let's run one more."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5958.52,
   "end": 5961.44,
   "text": " Let's just do the package command because that's really quick."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5961.44,
   "end": 5962.44,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5962.44,
   "end": 5966.24,
   "text": " And we'll do our unzip again."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5966.24,
   "end": 5967.4800000000005,
   "text": " Ah yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5967.4800000000005,
   "end": 5971.4800000000005,
   "text": " Now we've got a lot more going on."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5971.4800000000005,
   "end": 5974.4800000000005,
   "text": " All right."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5974.48,
   "end": 5979.08,
   "text": " I'm getting more confident that this is going to work."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5979.08,
   "end": 5984.4,
   "text": ""
  },
  {
   "speakerLabel": "spk_0",
   "start": 5984.4,
   "end": 5986.16,
   "text": " I also like that we did everything we could to avoid to bring that UUID dependency and somehow it's there anyway."
  },
  {
   "speakerLabel": "spk_0",
   "start": 5986.16,
   "end": 5993.28,
   "text": " I'm going to guess it's a dependency of the AWS SDK."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5993.28,
   "end": 5997.16,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 5997.16,
   "end": 6007.08,
   "text": ""
  },
  {
   "speakerLabel": "spk_0",
   "start": 6007.08,
   "end": 6008.08,
   "text": " So we have Will in the chat saying that AWS SDK version 2 is included in this common JS runtime."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6008.08,
   "end": 6011.2,
   "text": " So you don't get the version 3."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6011.2,
   "end": 6013.2,
   "text": " Thank you, Will, for the clarification."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6013.2,
   "end": 6014.2,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6014.2,
   "end": 6015.2,
   "text": " That's right."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6015.2,
   "end": 6022.72,
   "text": " So does that mean you get the AWS SDK version 3 if you use common JS or not?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6022.72,
   "end": 6025.8,
   "text": " You only get the AWS SDK version 2?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6025.8,
   "end": 6030.52,
   "text": " You get the AWS SDK version 2 as far as I understand."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6030.52,
   "end": 6031.52,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6031.52,
   "end": 6032.52,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6032.52,
   "end": 6033.52,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6033.52,
   "end": 6034.52,
   "text": " All right."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6034.52,
   "end": 6035.52,
   "text": " Let's give another go to our command."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6035.52,
   "end": 6042.12,
   "text": " So we're going to curl minus X post to this and hopefully we'll get back a couple of URLs."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6042.12,
   "end": 6043.12,
   "text": " Let's see."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6043.12,
   "end": 6044.12,
   "text": " Not."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6044.12,
   "end": 6045.12,
   "text": " No such joy."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6045.12,
   "end": 6046.12,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6046.12,
   "end": 6047.12,
   "text": " Ah, okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6047.12,
   "end": 6048.12,
   "text": " I've given myself a few more."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6048.12,
   "end": 6055.92,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6055.92,
   "end": 6066.92,
   "text": " Ah, okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6066.92,
   "end": 6067.92,
   "text": " I've given a Python syntax in our handler."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6067.92,
   "end": 6068.92,
   "text": " Snake case is no good here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6068.92,
   "end": 6071.92,
   "text": " So I think it was handle event, but let's just verify that here."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6071.92,
   "end": 6073.5599999999995,
   "text": " Nope."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6073.5599999999995,
   "end": 6075.84,
   "text": " It's called handler."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6075.84,
   "end": 6079.76,
   "text": " So I think I prefer to give it a verb."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6079.76,
   "end": 6080.76,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6080.76,
   "end": 6081.76,
   "text": " Than a noun."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6081.76,
   "end": 6084.76,
   "text": " So let's stick with handler event."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6084.76,
   "end": 6087.76,
   "text": " It's always weird when you see handler dot handler."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6087.76,
   "end": 6090.360000000001,
   "text": " It's not very clear what that means."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6090.360000000001,
   "end": 6091.360000000001,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6091.360000000001,
   "end": 6092.360000000001,
   "text": " Oops."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6092.360000000001,
   "end": 6093.360000000001,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6093.360000000001,
   "end": 6104.68,
   "text": " So in a couple of seconds we should have all that resolved."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6104.68,
   "end": 6109.360000000001,
   "text": " And like with a proper project structure here, we might have a sub we would have a sub directory"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6109.360000000001,
   "end": 6115.400000000001,
   "text": " for our handlers and then separate directories for the logic that occurs within these handlers"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6115.400000000001,
   "end": 6121.4400000000005,
   "text": " and probably not avoid having all of our modules at the root with all of the code and that"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6121.4400000000005,
   "end": 6124.88,
   "text": " the lambda handler itself."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6124.88,
   "end": 6130.360000000001,
   "text": " Will is also clarifying that the SDK version three is not included in any runtime, not"
  },
  {
   "speakerLabel": "spk_0",
   "start": 6130.36,
   "end": 6134.759999999999,
   "text": " just runtime, but hopefully will be not JS 18."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6134.759999999999,
   "end": 6135.759999999999,
   "text": " Oh, okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6135.759999999999,
   "end": 6136.759999999999,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6136.759999999999,
   "end": 6140.12,
   "text": " Cause I was, I was wondering if the reason not to include it was just to keep the runtime"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6140.12,
   "end": 6146.679999999999,
   "text": " light and to like reduce cold start time by, because I suppose what the advantage of the"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6146.679999999999,
   "end": 6150.28,
   "text": " version three SDK is that they're modular and you don't have to bundle them all."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6150.28,
   "end": 6152.759999999999,
   "text": " So that's interesting."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6152.759999999999,
   "end": 6158.48,
   "text": " I guess having it in the runtime is good for people who are using, you know, cloud nine"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6158.48,
   "end": 6164,
   "text": " or the inbuilt lambda console editor to try something fairly basic because you don't have"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6164,
   "end": 6167.759999999999,
   "text": " to worry about packaging modules there."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6167.759999999999,
   "end": 6170.639999999999,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6170.639999999999,
   "end": 6172.639999999999,
   "text": " We are."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6172.639999999999,
   "end": 6174.5199999999995,
   "text": " Nice."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6174.5199999999995,
   "end": 6176.28,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6176.28,
   "end": 6180.44,
   "text": " We've got our first URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6180.44,
   "end": 6185.32,
   "text": " So now we've got, um, an upload URL and our download URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6185.32,
   "end": 6189.32,
   "text": " So let me, I did promise that the URLs weren't going to be pretty."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6189.32,
   "end": 6193.12,
   "text": " I think I've lived up to that promise."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6193.12,
   "end": 6196.2,
   "text": " So let's, let's put something up on S3."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6196.2,
   "end": 6198,
   "text": " Let's upload something to WeShare."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6198,
   "end": 6200.44,
   "text": " So what'll I use?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6200.44,
   "end": 6207.28,
   "text": " Let's say, let's use our diagram from the repository."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6207.28,
   "end": 6209.28,
   "text": " What is it called?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6209.28,
   "end": 6214.08,
   "text": " Oh, it's in the, um, in the directory."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6214.08,
   "end": 6218.08,
   "text": " Yeah, and it's called MVP-DIAG.png."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6218.08,
   "end": 6220.08,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6220.08,
   "end": 6232.8,
   "text": " That's, looks to have succeeded."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6232.8,
   "end": 6239.96,
   "text": " So let me just go back to the download URL."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6239.96,
   "end": 6250.44,
   "text": " Ah, I don't know if this is going to work for me, my scrolling and pasting in my terminal."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6250.44,
   "end": 6252.96,
   "text": " This might be a slight gotcha for this demo."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6252.96,
   "end": 6254.56,
   "text": " Let's see how we get on."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6254.56,
   "end": 6257.76,
   "text": " Well, I can confirm that I see something in a stream."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6257.76,
   "end": 6258.76,
   "text": " Oh yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6258.76,
   "end": 6259.76,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6259.76,
   "end": 6260.76,
   "text": " This is good."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6260.76,
   "end": 6261.76,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6261.76,
   "end": 6265.52,
   "text": " I have a problem here with this URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6265.52,
   "end": 6267.52,
   "text": " So let me do it a slightly different way."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6267.52,
   "end": 6272.92,
   "text": " I can show very quickly that here we have this file in S3."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6272.92,
   "end": 6273.92,
   "text": " Nice."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6273.92,
   "end": 6274.92,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6274.92,
   "end": 6279.92,
   "text": " Let me do this again."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6279.92,
   "end": 6285.080000000001,
   "text": " MVP-DIAG.png."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6285.080000000001,
   "end": 6296.72,
   "text": " What did I miss?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6296.72,
   "end": 6297.72,
   "text": " MVN."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6297.72,
   "end": 6298.72,
   "text": " MVP."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6298.72,
   "end": 6299.72,
   "text": " MVN."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6299.72,
   "end": 6305.12,
   "text": " It's like a hangover from my days of using Maven."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6305.12,
   "end": 6307.320000000001,
   "text": " Excellent."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6307.320000000001,
   "end": 6315.740000000001,
   "text": " Let's give our, um, upload, download URL a go."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6315.740000000001,
   "end": 6319.76,
   "text": " So I'm going to do curl minus V just so we can see like things like the response headers"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6319.76,
   "end": 6320.76,
   "text": " and stuff."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6320.76,
   "end": 6323.52,
   "text": " Can you zoom a little bit your font?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6323.52,
   "end": 6324.52,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6324.52,
   "end": 6329.76,
   "text": " Actually, let's just, um, let's just paste this into the browser."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6329.76,
   "end": 6331.56,
   "text": " So this is the download URL."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6331.56,
   "end": 6334.92,
   "text": " I don't need the curl command."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6334.92,
   "end": 6336.6,
   "text": " Okay."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6336.6,
   "end": 6343.900000000001,
   "text": " So now I've got a file with a not too obvious name in my downloads folder."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6343.900000000001,
   "end": 6344.900000000001,
   "text": " So let me do it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6344.900000000001,
   "end": 6350.360000000001,
   "text": " Let me open up my downloads folder so everyone can see."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6350.36,
   "end": 6360.28,
   "text": " And I guess I'm going to have to rename this to.png."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6360.28,
   "end": 6362.44,
   "text": " And let's open it up."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6362.44,
   "end": 6366.32,
   "text": " And we have our architecture diagram."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6366.32,
   "end": 6367.32,
   "text": " Awesome."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6367.32,
   "end": 6373.96,
   "text": " That's a success for MVP."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6373.96,
   "end": 6374.96,
   "text": " I think so."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6374.96,
   "end": 6375.96,
   "text": " Excellent."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6375.96,
   "end": 6382.16,
   "text": " Let's have a quick check of what we added since last commit."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6382.16,
   "end": 6398.92,
   "text": " And I'm going to commit the add handler to generate, upload and download URLs and push"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6398.92,
   "end": 6402.32,
   "text": " that and everybody can have a go."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6402.32,
   "end": 6408.759999999999,
   "text": " And deploy it to their own environments."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6408.759999999999,
   "end": 6415.16,
   "text": " And what I'm going to do before we wrap up is I'm just going to remove this stack because"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6415.16,
   "end": 6418.24,
   "text": " I don't want us to be DDoSed on our bucket."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6418.24,
   "end": 6422.96,
   "text": " Yeah, because everyone saw the URL for uploading, right?"
  },
  {
   "speakerLabel": "spk_1",
   "start": 6422.96,
   "end": 6423.96,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6423.96,
   "end": 6428.719999999999,
   "text": " Maybe, maybe we've got a few surprise objects, but we better not share them publicly."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6428.719999999999,
   "end": 6430.719999999999,
   "text": " Yeah, absolutely."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6430.72,
   "end": 6437.56,
   "text": " I think just to wrap things up, of course, we did a very simple implementation, like"
  },
  {
   "speakerLabel": "spk_0",
   "start": 6437.56,
   "end": 6440.84,
   "text": " the bare minimum that you could possibly do to get this working."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6440.84,
   "end": 6445.12,
   "text": " There are a few things that would be nice to do and maybe something we can consider"
  },
  {
   "speakerLabel": "spk_0",
   "start": 6445.12,
   "end": 6447.16,
   "text": " for the next episode."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6447.16,
   "end": 6452.6,
   "text": " For instance, one thing that we saw is that when you were downloading the file, you totally"
  },
  {
   "speakerLabel": "spk_0",
   "start": 6452.6,
   "end": 6455.76,
   "text": " lost the file name, the extension."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6455.76,
   "end": 6458,
   "text": " So you needed to figure out, oh, this is a PNG."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6458,
   "end": 6459.72,
   "text": " Let me rename it and open it."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6459.72,
   "end": 6465.400000000001,
   "text": " There are actually ways that we could retain the MIME type and the file name."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6465.400000000001,
   "end": 6468.900000000001,
   "text": " So we could implement all of that in the next session."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6468.900000000001,
   "end": 6473.22,
   "text": " And then other things we will be doing are making this a little bit more production ready."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6473.22,
   "end": 6478.04,
   "text": " For instance, by adding proper logging metrics and stuff like that, we could be using something"
  },
  {
   "speakerLabel": "spk_0",
   "start": 6478.04,
   "end": 6480.96,
   "text": " like MIDI to implement all these features."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6480.96,
   "end": 6484.12,
   "text": " We will be using power tools as well."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6484.12,
   "end": 6488.400000000001,
   "text": " So maybe in the next session, we try to do all of this."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6488.4,
   "end": 6492.4,
   "text": " But by any means, if you have other ideas or specific questions, feel free to ask and"
  },
  {
   "speakerLabel": "spk_0",
   "start": 6492.4,
   "end": 6496.879999999999,
   "text": " we'll try to tackle those questions in the next episode."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6496.879999999999,
   "end": 6502,
   "text": " Which probably is gonna be next week, more or less, same day, same time."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6502,
   "end": 6506.94,
   "text": " But just stay tuned on YouTube and our social media channels, because as soon as we have"
  },
  {
   "speakerLabel": "spk_0",
   "start": 6506.94,
   "end": 6510.12,
   "text": " all of that scheduled, we are gonna announce it."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6510.12,
   "end": 6511.12,
   "text": " Yeah."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6511.12,
   "end": 6513,
   "text": " Look forward to it."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6513,
   "end": 6518.36,
   "text": " It was good to get all that setup done, because there's quite a few small pieces there."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6518.36,
   "end": 6522.24,
   "text": " We were at the start before we got to actually writing the code."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6522.24,
   "end": 6524.5199999999995,
   "text": " I think it's gonna be interesting next week."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6524.5199999999995,
   "end": 6530.2,
   "text": " We should be able to plow ahead with making this a little bit more user friendly."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6530.2,
   "end": 6532.679999999999,
   "text": " I don't like the look of those URLs."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6532.679999999999,
   "end": 6538.24,
   "text": " Just as a reminder, in the chat, I'm gonna be posting our repository."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6538.24,
   "end": 6541.38,
   "text": " And I think this is all we have for today."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6541.38,
   "end": 6548,
   "text": " So hopefully you enjoyed all of that and we'll see you next time."
  },
  {
   "speakerLabel": "spk_0",
   "start": 6548,
   "end": 6549,
   "text": " Bye everyone."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6549,
   "end": 6550,
   "text": " Thanks everyone."
  },
  {
   "speakerLabel": "spk_1",
   "start": 6550,
   "end": 6578.08,
   "text": " We'll see you next time."
  }
 ]
}